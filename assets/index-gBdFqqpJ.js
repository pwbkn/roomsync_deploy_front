function SR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function dT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fT={exports:{}},Yc={},pT={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),IR=Symbol.for("react.portal"),PR=Symbol.for("react.fragment"),AR=Symbol.for("react.strict_mode"),RR=Symbol.for("react.profiler"),CR=Symbol.for("react.provider"),kR=Symbol.for("react.context"),xR=Symbol.for("react.forward_ref"),bR=Symbol.for("react.suspense"),DR=Symbol.for("react.memo"),OR=Symbol.for("react.lazy"),cv=Symbol.iterator;function NR(t){return t===null||typeof t!="object"?null:(t=cv&&t[cv]||t["@@iterator"],typeof t=="function"?t:null)}var mT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gT=Object.assign,yT={};function So(t,e,n){this.props=t,this.context=e,this.refs=yT,this.updater=n||mT}So.prototype.isReactComponent={};So.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};So.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vT(){}vT.prototype=So.prototype;function Yp(t,e,n){this.props=t,this.context=e,this.refs=yT,this.updater=n||mT}var Xp=Yp.prototype=new vT;Xp.constructor=Yp;gT(Xp,So.prototype);Xp.isPureReactComponent=!0;var hv=Array.isArray,_T=Object.prototype.hasOwnProperty,Jp={current:null},wT={key:!0,ref:!0,__self:!0,__source:!0};function TT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_T.call(e,r)&&!wT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cl,type:t,key:s,ref:o,props:i,_owner:Jp.current}}function VR(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function MR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dv=/\/+/g;function od(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MR(""+t.key):e.toString(36)}function Su(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case IR:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+od(o,0):r,hv(i)?(n="",t!=null&&(n=t.replace(dv,"$&/")+"/"),Su(i,e,n,"",function(c){return c})):i!=null&&(Zp(i)&&(i=VR(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",hv(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+od(s,a);o+=Su(s,e,n,l,i)}else if(l=NR(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+od(s,a++),o+=Su(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xl(t,e,n){if(t==null)return t;var r=[],i=0;return Su(t,r,"","",function(s){return e.call(n,s,i++)}),r}function LR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},Iu={transition:null},UR={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Iu,ReactCurrentOwner:Jp};function ET(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Xl,forEach:function(t,e,n){Xl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xl(t,function(){e++}),e},toArray:function(t){return Xl(t,function(e){return e})||[]},only:function(t){if(!Zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=So;de.Fragment=PR;de.Profiler=RR;de.PureComponent=Yp;de.StrictMode=AR;de.Suspense=bR;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UR;de.act=ET;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Jp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)_T.call(e,l)&&!wT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:cl,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:kR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:CR,_context:t},t.Consumer=t};de.createElement=TT;de.createFactory=function(t){var e=TT.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:xR,render:t}};de.isValidElement=Zp;de.lazy=function(t){return{$$typeof:OR,_payload:{_status:-1,_result:t},_init:LR}};de.memo=function(t,e){return{$$typeof:DR,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Iu.transition;Iu.transition={};try{t()}finally{Iu.transition=e}};de.unstable_act=ET;de.useCallback=function(t,e){return Vt.current.useCallback(t,e)};de.useContext=function(t){return Vt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Vt.current.useEffect(t,e)};de.useId=function(){return Vt.current.useId()};de.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Vt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};de.useRef=function(t){return Vt.current.useRef(t)};de.useState=function(t){return Vt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Vt.current.useTransition()};de.version="18.3.1";pT.exports=de;var F=pT.exports;const em=dT(F),FR=SR({__proto__:null,default:em},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jR=F,BR=Symbol.for("react.element"),$R=Symbol.for("react.fragment"),zR=Object.prototype.hasOwnProperty,HR=jR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WR={key:!0,ref:!0,__self:!0,__source:!0};function ST(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zR.call(e,r)&&!WR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:BR,type:t,key:s,ref:o,props:i,_owner:HR.current}}Yc.Fragment=$R;Yc.jsx=ST;Yc.jsxs=ST;fT.exports=Yc;var M=fT.exports,IT={exports:{}},Zt={},PT={exports:{}},AT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,O){var U=V.length;V.push(O);e:for(;0<U;){var $=U-1>>>1,D=V[$];if(0<i(D,O))V[$]=O,V[U]=D,U=$;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var O=V[0],U=V.pop();if(U!==O){V[0]=U;e:for(var $=0,D=V.length,B=D>>>1;$<B;){var H=2*($+1)-1,q=V[H],Y=H+1,ie=V[Y];if(0>i(q,U))Y<D&&0>i(ie,q)?(V[$]=ie,V[Y]=U,$=Y):(V[$]=q,V[H]=U,$=H);else if(Y<D&&0>i(ie,U))V[$]=ie,V[Y]=U,$=Y;else break e}}return O}function i(V,O){var U=V.sortIndex-O.sortIndex;return U!==0?U:V.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,T=!1,C=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=V)r(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function b(V){if(x=!1,E(V),!C)if(n(l)!==null)C=!0,ce(L);else{var O=n(c);O!==null&&te(b,O.startTime-V)}}function L(V,O){C=!1,x&&(x=!1,_(g),g=-1),T=!0;var U=p;try{for(E(O),f=n(l);f!==null&&(!(f.expirationTime>O)||V&&!R());){var $=f.callback;if(typeof $=="function"){f.callback=null,p=f.priorityLevel;var D=$(f.expirationTime<=O);O=t.unstable_now(),typeof D=="function"?f.callback=D:f===n(l)&&r(l),E(O)}else r(l);f=n(l)}if(f!==null)var B=!0;else{var H=n(c);H!==null&&te(b,H.startTime-O),B=!1}return B}finally{f=null,p=U,T=!1}}var N=!1,P=null,g=-1,y=5,w=-1;function R(){return!(t.unstable_now()-w<y)}function A(){if(P!==null){var V=t.unstable_now();w=V;var O=!0;try{O=P(!0,V)}finally{O?S():(N=!1,P=null)}}else N=!1}var S;if(typeof v=="function")S=function(){v(A)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,ae=X.port2;X.port1.onmessage=A,S=function(){ae.postMessage(null)}}else S=function(){k(A,0)};function ce(V){P=V,N||(N=!0,S())}function te(V,O){g=k(function(){V(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){C||T||(C=!0,ce(L))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var U=p;p=O;try{return V()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,O){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var U=p;p=V;try{return O()}finally{p=U}},t.unstable_scheduleCallback=function(V,O,U){var $=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?$+U:$):U=$,V){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=U+D,V={id:h++,callback:O,priorityLevel:V,startTime:U,expirationTime:D,sortIndex:-1},U>$?(V.sortIndex=U,e(c,V),n(l)===null&&V===n(c)&&(x?(_(g),g=-1):x=!0,te(b,U-$))):(V.sortIndex=D,e(l,V),C||T||(C=!0,ce(L))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var O=p;return function(){var U=p;p=O;try{return V.apply(this,arguments)}finally{p=U}}}})(AT);PT.exports=AT;var qR=PT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR=F,Xt=qR;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RT=new Set,Na={};function ns(t,e){eo(t,e),eo(t+"Capture",e)}function eo(t,e){for(Na[t]=e,t=0;t<e.length;t++)RT.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cf=Object.prototype.hasOwnProperty,GR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fv={},pv={};function QR(t){return cf.call(pv,t)?!0:cf.call(fv,t)?!1:GR.test(t)?pv[t]=!0:(fv[t]=!0,!1)}function YR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XR(t,e,n,r){if(e===null||typeof e>"u"||YR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function nm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tm,nm);mt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tm,nm);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tm,nm);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function rm(t,e,n,r){var i=mt.hasOwnProperty(e)?mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XR(e,n,i,r)&&(n=null),r||i===null?QR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=KR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jl=Symbol.for("react.element"),As=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),im=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),CT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),df=Symbol.for("react.suspense"),ff=Symbol.for("react.suspense_list"),om=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),xT=Symbol.for("react.offscreen"),mv=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=mv&&t[mv]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,ad;function ia(t){if(ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ad=e&&e[1]||""}return`
`+ad+t}var ld=!1;function ud(t,e){if(!t||ld)return"";ld=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ld=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ia(t):""}function JR(t){switch(t.tag){case 5:return ia(t.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 2:case 15:return t=ud(t.type,!1),t;case 11:return t=ud(t.type.render,!1),t;case 1:return t=ud(t.type,!0),t;default:return""}}function pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case As:return"Portal";case hf:return"Profiler";case im:return"StrictMode";case df:return"Suspense";case ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kT:return(t.displayName||"Context")+".Consumer";case CT:return(t._context.displayName||"Context")+".Provider";case sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case om:return e=t.displayName||null,e!==null?e:pf(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return pf(t(e))}catch{}}return null}function ZR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pf(e);case 8:return e===im?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eC(t){var e=bT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zl(t){t._valueTracker||(t._valueTracker=eC(t))}function DT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mf(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OT(t,e){e=e.checked,e!=null&&rm(t,"checked",e,!1)}function gf(t,e){OT(t,e);var n=Jr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yf(t,e.type,n):e.hasOwnProperty("defaultValue")&&yf(t,e.type,Jr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yf(t,e,n){(e!=="number"||Yu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sa=Array.isArray;function Hs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(sa(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jr(n)}}function NT(t,e){var n=Jr(e.value),r=Jr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _v(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function VT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?VT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eu,MT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eu=eu||document.createElement("div"),eu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Va(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tC=["Webkit","ms","Moz","O"];Object.keys(ga).forEach(function(t){tC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ga[e]=ga[t]})});function LT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ga.hasOwnProperty(t)&&ga[t]?(""+e).trim():e+"px"}function UT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=LT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nC=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wf(t,e){if(e){if(nC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Tf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=null;function am(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sf=null,Ws=null,qs=null;function wv(t){if(t=fl(t)){if(typeof Sf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=th(e),Sf(t.stateNode,t.type,e))}}function FT(t){Ws?qs?qs.push(t):qs=[t]:Ws=t}function jT(){if(Ws){var t=Ws,e=qs;if(qs=Ws=null,wv(t),e)for(t=0;t<e.length;t++)wv(e[t])}}function BT(t,e){return t(e)}function $T(){}var cd=!1;function zT(t,e,n){if(cd)return t(e,n);cd=!0;try{return BT(t,e,n)}finally{cd=!1,(Ws!==null||qs!==null)&&($T(),jT())}}function Ma(t,e){var n=t.stateNode;if(n===null)return null;var r=th(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var If=!1;if(or)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){If=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{If=!1}function rC(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ya=!1,Xu=null,Ju=!1,Pf=null,iC={onError:function(t){ya=!0,Xu=t}};function sC(t,e,n,r,i,s,o,a,l){ya=!1,Xu=null,rC.apply(iC,arguments)}function oC(t,e,n,r,i,s,o,a,l){if(sC.apply(this,arguments),ya){if(ya){var c=Xu;ya=!1,Xu=null}else throw Error(G(198));Ju||(Ju=!0,Pf=c)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tv(t){if(rs(t)!==t)throw Error(G(188))}function aC(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Tv(i),t;if(s===r)return Tv(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function WT(t){return t=aC(t),t!==null?qT(t):null}function qT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qT(t);if(e!==null)return e;t=t.sibling}return null}var KT=Xt.unstable_scheduleCallback,Ev=Xt.unstable_cancelCallback,lC=Xt.unstable_shouldYield,uC=Xt.unstable_requestPaint,We=Xt.unstable_now,cC=Xt.unstable_getCurrentPriorityLevel,lm=Xt.unstable_ImmediatePriority,GT=Xt.unstable_UserBlockingPriority,Zu=Xt.unstable_NormalPriority,hC=Xt.unstable_LowPriority,QT=Xt.unstable_IdlePriority,Xc=null,xn=null;function dC(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Xc,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:mC,fC=Math.log,pC=Math.LN2;function mC(t){return t>>>=0,t===0?32:31-(fC(t)/pC|0)|0}var tu=64,nu=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=oa(a):(s&=o,s!==0&&(r=oa(s)))}else o=n&~i,o!==0?r=oa(o):s!==0&&(r=oa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),i=1<<n,r|=t[n],e&=~i;return r}function gC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=gC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Af(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YT(){var t=tu;return tu<<=1,!(tu&4194240)&&(tu=64),t}function hd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function vC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function um(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function XT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JT,cm,ZT,eE,tE,Rf=!1,ru=[],jr=null,Br=null,$r=null,La=new Map,Ua=new Map,xr=[],_C="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sv(t,e){switch(t){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":La.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function Yo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fl(e),e!==null&&cm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wC(t,e,n,r,i){switch(e){case"focusin":return jr=Yo(jr,t,e,n,r,i),!0;case"dragenter":return Br=Yo(Br,t,e,n,r,i),!0;case"mouseover":return $r=Yo($r,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return La.set(s,Yo(La.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ua.set(s,Yo(Ua.get(s)||null,t,e,n,r,i)),!0}return!1}function nE(t){var e=Oi(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=HT(n),e!==null){t.blockedOn=e,tE(t.priority,function(){ZT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ef=r,n.target.dispatchEvent(r),Ef=null}else return e=fl(n),e!==null&&cm(e),t.blockedOn=n,!1;e.shift()}return!0}function Iv(t,e,n){Pu(t)&&n.delete(e)}function TC(){Rf=!1,jr!==null&&Pu(jr)&&(jr=null),Br!==null&&Pu(Br)&&(Br=null),$r!==null&&Pu($r)&&($r=null),La.forEach(Iv),Ua.forEach(Iv)}function Xo(t,e){t.blockedOn===e&&(t.blockedOn=null,Rf||(Rf=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,TC)))}function Fa(t){function e(i){return Xo(i,t)}if(0<ru.length){Xo(ru[0],t);for(var n=1;n<ru.length;n++){var r=ru[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jr!==null&&Xo(jr,t),Br!==null&&Xo(Br,t),$r!==null&&Xo($r,t),La.forEach(e),Ua.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)nE(n),n.blockedOn===null&&xr.shift()}var Ks=mr.ReactCurrentBatchConfig,tc=!0;function EC(t,e,n,r){var i=Te,s=Ks.transition;Ks.transition=null;try{Te=1,hm(t,e,n,r)}finally{Te=i,Ks.transition=s}}function SC(t,e,n,r){var i=Te,s=Ks.transition;Ks.transition=null;try{Te=4,hm(t,e,n,r)}finally{Te=i,Ks.transition=s}}function hm(t,e,n,r){if(tc){var i=Cf(t,e,n,r);if(i===null)Td(t,e,r,nc,n),Sv(t,r);else if(wC(i,t,e,n,r))r.stopPropagation();else if(Sv(t,r),e&4&&-1<_C.indexOf(t)){for(;i!==null;){var s=fl(i);if(s!==null&&JT(s),s=Cf(t,e,n,r),s===null&&Td(t,e,r,nc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Td(t,e,r,null,n)}}var nc=null;function Cf(t,e,n,r){if(nc=null,t=am(r),t=Oi(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nc=t,null}function rE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cC()){case lm:return 1;case GT:return 4;case Zu:case hC:return 16;case QT:return 536870912;default:return 16}default:return 16}}var Vr=null,dm=null,Au=null;function iE(){if(Au)return Au;var t,e=dm,n=e.length,r,i="value"in Vr?Vr.value:Vr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Au=i.slice(t,1<r?1-r:void 0)}function Ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iu(){return!0}function Pv(){return!1}function en(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iu:Pv,this.isPropagationStopped=Pv,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),e}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fm=en(Io),dl=Le({},Io,{view:0,detail:0}),IC=en(dl),dd,fd,Jo,Jc=Le({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(dd=t.screenX-Jo.screenX,fd=t.screenY-Jo.screenY):fd=dd=0,Jo=t),dd)},movementY:function(t){return"movementY"in t?t.movementY:fd}}),Av=en(Jc),PC=Le({},Jc,{dataTransfer:0}),AC=en(PC),RC=Le({},dl,{relatedTarget:0}),pd=en(RC),CC=Le({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),kC=en(CC),xC=Le({},Io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bC=en(xC),DC=Le({},Io,{data:0}),Rv=en(DC),OC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VC[t])?!!e[t]:!1}function pm(){return MC}var LC=Le({},dl,{key:function(t){if(t.key){var e=OC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pm,charCode:function(t){return t.type==="keypress"?Ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UC=en(LC),FC=Le({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cv=en(FC),jC=Le({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pm}),BC=en(jC),$C=Le({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),zC=en($C),HC=Le({},Jc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WC=en(HC),qC=[9,13,27,32],mm=or&&"CompositionEvent"in window,va=null;or&&"documentMode"in document&&(va=document.documentMode);var KC=or&&"TextEvent"in window&&!va,sE=or&&(!mm||va&&8<va&&11>=va),kv=" ",xv=!1;function oE(t,e){switch(t){case"keyup":return qC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cs=!1;function GC(t,e){switch(t){case"compositionend":return aE(e);case"keypress":return e.which!==32?null:(xv=!0,kv);case"textInput":return t=e.data,t===kv&&xv?null:t;default:return null}}function QC(t,e){if(Cs)return t==="compositionend"||!mm&&oE(t,e)?(t=iE(),Au=dm=Vr=null,Cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sE&&e.locale!=="ko"?null:e.data;default:return null}}var YC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YC[t.type]:e==="textarea"}function lE(t,e,n,r){FT(r),e=rc(e,"onChange"),0<e.length&&(n=new fm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _a=null,ja=null;function XC(t){_E(t,0)}function Zc(t){var e=bs(t);if(DT(e))return t}function JC(t,e){if(t==="change")return e}var uE=!1;if(or){var md;if(or){var gd="oninput"in document;if(!gd){var Dv=document.createElement("div");Dv.setAttribute("oninput","return;"),gd=typeof Dv.oninput=="function"}md=gd}else md=!1;uE=md&&(!document.documentMode||9<document.documentMode)}function Ov(){_a&&(_a.detachEvent("onpropertychange",cE),ja=_a=null)}function cE(t){if(t.propertyName==="value"&&Zc(ja)){var e=[];lE(e,ja,t,am(t)),zT(XC,e)}}function ZC(t,e,n){t==="focusin"?(Ov(),_a=e,ja=n,_a.attachEvent("onpropertychange",cE)):t==="focusout"&&Ov()}function ek(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zc(ja)}function tk(t,e){if(t==="click")return Zc(e)}function nk(t,e){if(t==="input"||t==="change")return Zc(e)}function rk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:rk;function Ba(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!cf.call(e,i)||!En(t[i],e[i]))return!1}return!0}function Nv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Vv(t,e){var n=Nv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nv(n)}}function hE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dE(){for(var t=window,e=Yu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yu(t.document)}return e}function gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ik(t){var e=dE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hE(n.ownerDocument.documentElement,n)){if(r!==null&&gm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Vv(n,s);var o=Vv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sk=or&&"documentMode"in document&&11>=document.documentMode,ks=null,kf=null,wa=null,xf=!1;function Mv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xf||ks==null||ks!==Yu(r)||(r=ks,"selectionStart"in r&&gm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wa&&Ba(wa,r)||(wa=r,r=rc(kf,"onSelect"),0<r.length&&(e=new fm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ks)))}function su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xs={animationend:su("Animation","AnimationEnd"),animationiteration:su("Animation","AnimationIteration"),animationstart:su("Animation","AnimationStart"),transitionend:su("Transition","TransitionEnd")},yd={},fE={};or&&(fE=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function eh(t){if(yd[t])return yd[t];if(!xs[t])return t;var e=xs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fE)return yd[t]=e[n];return t}var pE=eh("animationend"),mE=eh("animationiteration"),gE=eh("animationstart"),yE=eh("transitionend"),vE=new Map,Lv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ai(t,e){vE.set(t,e),ns(e,[t])}for(var vd=0;vd<Lv.length;vd++){var _d=Lv[vd],ok=_d.toLowerCase(),ak=_d[0].toUpperCase()+_d.slice(1);ai(ok,"on"+ak)}ai(pE,"onAnimationEnd");ai(mE,"onAnimationIteration");ai(gE,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(yE,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function Uv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oC(r,e,void 0,t),t.currentTarget=null}function _E(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Uv(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Uv(i,a,c),s=l}}}if(Ju)throw t=Pf,Ju=!1,Pf=null,t}function Re(t,e){var n=e[Vf];n===void 0&&(n=e[Vf]=new Set);var r=t+"__bubble";n.has(r)||(wE(e,t,2,!1),n.add(r))}function wd(t,e,n){var r=0;e&&(r|=4),wE(n,t,r,e)}var ou="_reactListening"+Math.random().toString(36).slice(2);function $a(t){if(!t[ou]){t[ou]=!0,RT.forEach(function(n){n!=="selectionchange"&&(lk.has(n)||wd(n,!1,t),wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ou]||(e[ou]=!0,wd("selectionchange",!1,e))}}function wE(t,e,n,r){switch(rE(e)){case 1:var i=EC;break;case 4:i=SC;break;default:i=hm}n=i.bind(null,e,n,t),i=void 0,!If||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Td(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Oi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}zT(function(){var c=s,h=am(n),f=[];e:{var p=vE.get(t);if(p!==void 0){var T=fm,C=t;switch(t){case"keypress":if(Ru(n)===0)break e;case"keydown":case"keyup":T=UC;break;case"focusin":C="focus",T=pd;break;case"focusout":C="blur",T=pd;break;case"beforeblur":case"afterblur":T=pd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Av;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=AC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=BC;break;case pE:case mE:case gE:T=kC;break;case yE:T=zC;break;case"scroll":T=IC;break;case"wheel":T=WC;break;case"copy":case"cut":case"paste":T=bC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Cv}var x=(e&4)!==0,k=!x&&t==="scroll",_=x?p!==null?p+"Capture":null:p;x=[];for(var v=c,E;v!==null;){E=v;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,_!==null&&(b=Ma(v,_),b!=null&&x.push(za(v,b,E)))),k)break;v=v.return}0<x.length&&(p=new T(p,C,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",p&&n!==Ef&&(C=n.relatedTarget||n.fromElement)&&(Oi(C)||C[ar]))break e;if((T||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,T?(C=n.relatedTarget||n.toElement,T=c,C=C?Oi(C):null,C!==null&&(k=rs(C),C!==k||C.tag!==5&&C.tag!==6)&&(C=null)):(T=null,C=c),T!==C)){if(x=Av,b="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=Cv,b="onPointerLeave",_="onPointerEnter",v="pointer"),k=T==null?p:bs(T),E=C==null?p:bs(C),p=new x(b,v+"leave",T,n,h),p.target=k,p.relatedTarget=E,b=null,Oi(h)===c&&(x=new x(_,v+"enter",C,n,h),x.target=E,x.relatedTarget=k,b=x),k=b,T&&C)t:{for(x=T,_=C,v=0,E=x;E;E=vs(E))v++;for(E=0,b=_;b;b=vs(b))E++;for(;0<v-E;)x=vs(x),v--;for(;0<E-v;)_=vs(_),E--;for(;v--;){if(x===_||_!==null&&x===_.alternate)break t;x=vs(x),_=vs(_)}x=null}else x=null;T!==null&&Fv(f,p,T,x,!1),C!==null&&k!==null&&Fv(f,k,C,x,!0)}}e:{if(p=c?bs(c):window,T=p.nodeName&&p.nodeName.toLowerCase(),T==="select"||T==="input"&&p.type==="file")var L=JC;else if(bv(p))if(uE)L=nk;else{L=ek;var N=ZC}else(T=p.nodeName)&&T.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=tk);if(L&&(L=L(t,c))){lE(f,L,n,h);break e}N&&N(t,p,c),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&yf(p,"number",p.value)}switch(N=c?bs(c):window,t){case"focusin":(bv(N)||N.contentEditable==="true")&&(ks=N,kf=c,wa=null);break;case"focusout":wa=kf=ks=null;break;case"mousedown":xf=!0;break;case"contextmenu":case"mouseup":case"dragend":xf=!1,Mv(f,n,h);break;case"selectionchange":if(sk)break;case"keydown":case"keyup":Mv(f,n,h)}var P;if(mm)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Cs?oE(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(sE&&n.locale!=="ko"&&(Cs||g!=="onCompositionStart"?g==="onCompositionEnd"&&Cs&&(P=iE()):(Vr=h,dm="value"in Vr?Vr.value:Vr.textContent,Cs=!0)),N=rc(c,g),0<N.length&&(g=new Rv(g,t,null,n,h),f.push({event:g,listeners:N}),P?g.data=P:(P=aE(n),P!==null&&(g.data=P)))),(P=KC?GC(t,n):QC(t,n))&&(c=rc(c,"onBeforeInput"),0<c.length&&(h=new Rv("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=P))}_E(f,e)})}function za(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ma(t,n),s!=null&&r.unshift(za(t,s,i)),s=Ma(t,e),s!=null&&r.push(za(t,s,i))),t=t.return}return r}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ma(n,s),l!=null&&o.unshift(za(n,l,a))):i||(l=Ma(n,s),l!=null&&o.push(za(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uk=/\r\n?/g,ck=/\u0000|\uFFFD/g;function jv(t){return(typeof t=="string"?t:""+t).replace(uk,`
`).replace(ck,"")}function au(t,e,n){if(e=jv(e),jv(t)!==e&&n)throw Error(G(425))}function ic(){}var bf=null,Df=null;function Of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nf=typeof setTimeout=="function"?setTimeout:void 0,hk=typeof clearTimeout=="function"?clearTimeout:void 0,Bv=typeof Promise=="function"?Promise:void 0,dk=typeof queueMicrotask=="function"?queueMicrotask:typeof Bv<"u"?function(t){return Bv.resolve(null).then(t).catch(fk)}:Nf;function fk(t){setTimeout(function(){throw t})}function Ed(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Fa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Fa(e)}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $v(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Po=Math.random().toString(36).slice(2),kn="__reactFiber$"+Po,Ha="__reactProps$"+Po,ar="__reactContainer$"+Po,Vf="__reactEvents$"+Po,pk="__reactListeners$"+Po,mk="__reactHandles$"+Po;function Oi(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$v(t);t!==null;){if(n=t[kn])return n;t=$v(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[kn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function th(t){return t[Ha]||null}var Mf=[],Ds=-1;function li(t){return{current:t}}function ke(t){0>Ds||(t.current=Mf[Ds],Mf[Ds]=null,Ds--)}function Pe(t,e){Ds++,Mf[Ds]=t.current,t.current=e}var Zr={},xt=li(Zr),Bt=li(!1),Ki=Zr;function to(t,e){var n=t.type.contextTypes;if(!n)return Zr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function sc(){ke(Bt),ke(xt)}function zv(t,e,n){if(xt.current!==Zr)throw Error(G(168));Pe(xt,e),Pe(Bt,n)}function TE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,ZR(t)||"Unknown",i));return Le({},n,r)}function oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zr,Ki=xt.current,Pe(xt,t),Pe(Bt,Bt.current),!0}function Hv(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=TE(t,e,Ki),r.__reactInternalMemoizedMergedChildContext=t,ke(Bt),ke(xt),Pe(xt,t)):ke(Bt),Pe(Bt,n)}var Wn=null,nh=!1,Sd=!1;function EE(t){Wn===null?Wn=[t]:Wn.push(t)}function gk(t){nh=!0,EE(t)}function ui(){if(!Sd&&Wn!==null){Sd=!0;var t=0,e=Te;try{var n=Wn;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,nh=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(t+1)),KT(lm,ui),i}finally{Te=e,Sd=!1}}return null}var Os=[],Ns=0,ac=null,lc=0,rn=[],sn=0,Gi=null,Gn=1,Qn="";function Ci(t,e){Os[Ns++]=lc,Os[Ns++]=ac,ac=t,lc=e}function SE(t,e,n){rn[sn++]=Gn,rn[sn++]=Qn,rn[sn++]=Gi,Gi=t;var r=Gn;t=Qn;var i=32-vn(r)-1;r&=~(1<<i),n+=1;var s=32-vn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gn=1<<32-vn(e)+i|n<<i|r,Qn=s+t}else Gn=1<<s|n<<i|r,Qn=t}function ym(t){t.return!==null&&(Ci(t,1),SE(t,1,0))}function vm(t){for(;t===ac;)ac=Os[--Ns],Os[Ns]=null,lc=Os[--Ns],Os[Ns]=null;for(;t===Gi;)Gi=rn[--sn],rn[sn]=null,Qn=rn[--sn],rn[sn]=null,Gn=rn[--sn],rn[sn]=null}var Qt=null,Kt=null,be=!1,yn=null;function IE(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gi!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Kt=null,!0):!1;default:return!1}}function Lf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uf(t){if(be){var e=Kt;if(e){var n=e;if(!Wv(t,e)){if(Lf(t))throw Error(G(418));e=zr(n.nextSibling);var r=Qt;e&&Wv(t,e)?IE(r,n):(t.flags=t.flags&-4097|2,be=!1,Qt=t)}}else{if(Lf(t))throw Error(G(418));t.flags=t.flags&-4097|2,be=!1,Qt=t}}}function qv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function lu(t){if(t!==Qt)return!1;if(!be)return qv(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Of(t.type,t.memoizedProps)),e&&(e=Kt)){if(Lf(t))throw PE(),Error(G(418));for(;e;)IE(t,e),e=zr(e.nextSibling)}if(qv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Qt?zr(t.stateNode.nextSibling):null;return!0}function PE(){for(var t=Kt;t;)t=zr(t.nextSibling)}function no(){Kt=Qt=null,be=!1}function _m(t){yn===null?yn=[t]:yn.push(t)}var yk=mr.ReactCurrentBatchConfig;function Zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function uu(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kv(t){var e=t._init;return e(t._payload)}function AE(t){function e(_,v){if(t){var E=_.deletions;E===null?(_.deletions=[v],_.flags|=16):E.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=Kr(_,v),_.index=0,_.sibling=null,_}function s(_,v,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<v?(_.flags|=2,v):E):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,E,b){return v===null||v.tag!==6?(v=xd(E,_.mode,b),v.return=_,v):(v=i(v,E),v.return=_,v)}function l(_,v,E,b){var L=E.type;return L===Rs?h(_,v,E.props.children,b,E.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Cr&&Kv(L)===v.type)?(b=i(v,E.props),b.ref=Zo(_,v,E),b.return=_,b):(b=Nu(E.type,E.key,E.props,null,_.mode,b),b.ref=Zo(_,v,E),b.return=_,b)}function c(_,v,E,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=bd(E,_.mode,b),v.return=_,v):(v=i(v,E.children||[]),v.return=_,v)}function h(_,v,E,b,L){return v===null||v.tag!==7?(v=Bi(E,_.mode,b,L),v.return=_,v):(v=i(v,E),v.return=_,v)}function f(_,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=xd(""+v,_.mode,E),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jl:return E=Nu(v.type,v.key,v.props,null,_.mode,E),E.ref=Zo(_,null,v),E.return=_,E;case As:return v=bd(v,_.mode,E),v.return=_,v;case Cr:var b=v._init;return f(_,b(v._payload),E)}if(sa(v)||Go(v))return v=Bi(v,_.mode,E,null),v.return=_,v;uu(_,v)}return null}function p(_,v,E,b){var L=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return L!==null?null:a(_,v,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jl:return E.key===L?l(_,v,E,b):null;case As:return E.key===L?c(_,v,E,b):null;case Cr:return L=E._init,p(_,v,L(E._payload),b)}if(sa(E)||Go(E))return L!==null?null:h(_,v,E,b,null);uu(_,E)}return null}function T(_,v,E,b,L){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(E)||null,a(v,_,""+b,L);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jl:return _=_.get(b.key===null?E:b.key)||null,l(v,_,b,L);case As:return _=_.get(b.key===null?E:b.key)||null,c(v,_,b,L);case Cr:var N=b._init;return T(_,v,E,N(b._payload),L)}if(sa(b)||Go(b))return _=_.get(E)||null,h(v,_,b,L,null);uu(v,b)}return null}function C(_,v,E,b){for(var L=null,N=null,P=v,g=v=0,y=null;P!==null&&g<E.length;g++){P.index>g?(y=P,P=null):y=P.sibling;var w=p(_,P,E[g],b);if(w===null){P===null&&(P=y);break}t&&P&&w.alternate===null&&e(_,P),v=s(w,v,g),N===null?L=w:N.sibling=w,N=w,P=y}if(g===E.length)return n(_,P),be&&Ci(_,g),L;if(P===null){for(;g<E.length;g++)P=f(_,E[g],b),P!==null&&(v=s(P,v,g),N===null?L=P:N.sibling=P,N=P);return be&&Ci(_,g),L}for(P=r(_,P);g<E.length;g++)y=T(P,_,g,E[g],b),y!==null&&(t&&y.alternate!==null&&P.delete(y.key===null?g:y.key),v=s(y,v,g),N===null?L=y:N.sibling=y,N=y);return t&&P.forEach(function(R){return e(_,R)}),be&&Ci(_,g),L}function x(_,v,E,b){var L=Go(E);if(typeof L!="function")throw Error(G(150));if(E=L.call(E),E==null)throw Error(G(151));for(var N=L=null,P=v,g=v=0,y=null,w=E.next();P!==null&&!w.done;g++,w=E.next()){P.index>g?(y=P,P=null):y=P.sibling;var R=p(_,P,w.value,b);if(R===null){P===null&&(P=y);break}t&&P&&R.alternate===null&&e(_,P),v=s(R,v,g),N===null?L=R:N.sibling=R,N=R,P=y}if(w.done)return n(_,P),be&&Ci(_,g),L;if(P===null){for(;!w.done;g++,w=E.next())w=f(_,w.value,b),w!==null&&(v=s(w,v,g),N===null?L=w:N.sibling=w,N=w);return be&&Ci(_,g),L}for(P=r(_,P);!w.done;g++,w=E.next())w=T(P,_,g,w.value,b),w!==null&&(t&&w.alternate!==null&&P.delete(w.key===null?g:w.key),v=s(w,v,g),N===null?L=w:N.sibling=w,N=w);return t&&P.forEach(function(A){return e(_,A)}),be&&Ci(_,g),L}function k(_,v,E,b){if(typeof E=="object"&&E!==null&&E.type===Rs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Jl:e:{for(var L=E.key,N=v;N!==null;){if(N.key===L){if(L=E.type,L===Rs){if(N.tag===7){n(_,N.sibling),v=i(N,E.props.children),v.return=_,_=v;break e}}else if(N.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Cr&&Kv(L)===N.type){n(_,N.sibling),v=i(N,E.props),v.ref=Zo(_,N,E),v.return=_,_=v;break e}n(_,N);break}else e(_,N);N=N.sibling}E.type===Rs?(v=Bi(E.props.children,_.mode,b,E.key),v.return=_,_=v):(b=Nu(E.type,E.key,E.props,null,_.mode,b),b.ref=Zo(_,v,E),b.return=_,_=b)}return o(_);case As:e:{for(N=E.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(_,v.sibling),v=i(v,E.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=bd(E,_.mode,b),v.return=_,_=v}return o(_);case Cr:return N=E._init,k(_,v,N(E._payload),b)}if(sa(E))return C(_,v,E,b);if(Go(E))return x(_,v,E,b);uu(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(_,v.sibling),v=i(v,E),v.return=_,_=v):(n(_,v),v=xd(E,_.mode,b),v.return=_,_=v),o(_)):n(_,v)}return k}var ro=AE(!0),RE=AE(!1),uc=li(null),cc=null,Vs=null,wm=null;function Tm(){wm=Vs=cc=null}function Em(t){var e=uc.current;ke(uc),t._currentValue=e}function Ff(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Gs(t,e){cc=t,wm=Vs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(wm!==t)if(t={context:t,memoizedValue:e,next:null},Vs===null){if(cc===null)throw Error(G(308));Vs=t,cc.dependencies={lanes:0,firstContext:t}}else Vs=Vs.next=t;return e}var Ni=null;function Sm(t){Ni===null?Ni=[t]:Ni.push(t)}function CE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sm(e)):(n.next=i.next,i.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function Im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,lr(t,n)}return i=r.interleaved,i===null?(e.next=e,Sm(r)):(e.next=i.next,i.next=e),r.interleaved=e,lr(t,n)}function Cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,um(t,n)}}function Gv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hc(t,e,n,r){var i=t.updateQueue;kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,T=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:T,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var C=t,x=a;switch(p=e,T=n,x.tag){case 1:if(C=x.payload,typeof C=="function"){f=C.call(T,f,p);break e}f=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=x.payload,p=typeof C=="function"?C.call(T,f,p):C,p==null)break e;f=Le({},f,p);break e;case 2:kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else T={eventTime:T,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=T,l=f):h=h.next=T,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yi|=o,t.lanes=o,t.memoizedState=f}}function Qv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var pl={},bn=li(pl),Wa=li(pl),qa=li(pl);function Vi(t){if(t===pl)throw Error(G(174));return t}function Pm(t,e){switch(Pe(qa,e),Pe(Wa,t),Pe(bn,pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_f(e,t)}ke(bn),Pe(bn,e)}function io(){ke(bn),ke(Wa),ke(qa)}function xE(t){Vi(qa.current);var e=Vi(bn.current),n=_f(e,t.type);e!==n&&(Pe(Wa,t),Pe(bn,n))}function Am(t){Wa.current===t&&(ke(bn),ke(Wa))}var Ne=li(0);function dc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Id=[];function Rm(){for(var t=0;t<Id.length;t++)Id[t]._workInProgressVersionPrimary=null;Id.length=0}var ku=mr.ReactCurrentDispatcher,Pd=mr.ReactCurrentBatchConfig,Qi=0,Me=null,Je=null,st=null,fc=!1,Ta=!1,Ka=0,vk=0;function Tt(){throw Error(G(321))}function Cm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function km(t,e,n,r,i,s){if(Qi=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ku.current=t===null||t.memoizedState===null?Ek:Sk,t=n(r,i),Ta){s=0;do{if(Ta=!1,Ka=0,25<=s)throw Error(G(301));s+=1,st=Je=null,e.updateQueue=null,ku.current=Ik,t=n(r,i)}while(Ta)}if(ku.current=pc,e=Je!==null&&Je.next!==null,Qi=0,st=Je=Me=null,fc=!1,e)throw Error(G(300));return t}function xm(){var t=Ka!==0;return Ka=0,t}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Me.memoizedState=st=t:st=st.next=t,st}function cn(){if(Je===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=st===null?Me.memoizedState:st.next;if(e!==null)st=e,Je=t;else{if(t===null)throw Error(G(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},st===null?Me.memoizedState=st=t:st=st.next=t}return st}function Ga(t,e){return typeof e=="function"?e(t):e}function Ad(t){var e=cn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Qi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Me.lanes|=h,Yi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,En(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,Yi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rd(t){var e=cn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);En(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bE(){}function DE(t,e){var n=Me,r=cn(),i=e(),s=!En(r.memoizedState,i);if(s&&(r.memoizedState=i,Ft=!0),r=r.queue,bm(VE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Qa(9,NE.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(G(349));Qi&30||OE(n,e,i)}return i}function OE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NE(t,e,n,r){e.value=n,e.getSnapshot=r,ME(e)&&LE(t)}function VE(t,e,n){return n(function(){ME(e)&&LE(t)})}function ME(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function LE(t){var e=lr(t,1);e!==null&&_n(e,t,1,-1)}function Yv(t){var e=Rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:t},e.queue=t,t=t.dispatch=Tk.bind(null,Me,t),[e.memoizedState,t]}function Qa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function UE(){return cn().memoizedState}function xu(t,e,n,r){var i=Rn();Me.flags|=t,i.memoizedState=Qa(1|e,n,void 0,r===void 0?null:r)}function rh(t,e,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(Je!==null){var o=Je.memoizedState;if(s=o.destroy,r!==null&&Cm(r,o.deps)){i.memoizedState=Qa(e,n,s,r);return}}Me.flags|=t,i.memoizedState=Qa(1|e,n,s,r)}function Xv(t,e){return xu(8390656,8,t,e)}function bm(t,e){return rh(2048,8,t,e)}function FE(t,e){return rh(4,2,t,e)}function jE(t,e){return rh(4,4,t,e)}function BE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $E(t,e,n){return n=n!=null?n.concat([t]):null,rh(4,4,BE.bind(null,e,t),n)}function Dm(){}function zE(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HE(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function WE(t,e,n){return Qi&21?(En(n,e)||(n=YT(),Me.lanes|=n,Yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function _k(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Pd.transition;Pd.transition={};try{t(!1),e()}finally{Te=n,Pd.transition=r}}function qE(){return cn().memoizedState}function wk(t,e,n){var r=qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KE(t))GE(e,n);else if(n=CE(t,e,n,r),n!==null){var i=Ot();_n(n,t,r,i),QE(n,e,r)}}function Tk(t,e,n){var r=qr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KE(t))GE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,En(a,o)){var l=e.interleaved;l===null?(i.next=i,Sm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=CE(t,e,i,r),n!==null&&(i=Ot(),_n(n,t,r,i),QE(n,e,r))}}function KE(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function GE(t,e){Ta=fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,um(t,n)}}var pc={readContext:un,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},Ek={readContext:un,useCallback:function(t,e){return Rn().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:Xv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xu(4194308,4,BE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xu(4194308,4,t,e)},useInsertionEffect:function(t,e){return xu(4,2,t,e)},useMemo:function(t,e){var n=Rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wk.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Rn();return t={current:t},e.memoizedState=t},useState:Yv,useDebugValue:Dm,useDeferredValue:function(t){return Rn().memoizedState=t},useTransition:function(){var t=Yv(!1),e=t[0];return t=_k.bind(null,t[1]),Rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=Rn();if(be){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),ot===null)throw Error(G(349));Qi&30||OE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Xv(VE.bind(null,r,s,t),[t]),r.flags|=2048,Qa(9,NE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Rn(),e=ot.identifierPrefix;if(be){var n=Qn,r=Gn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Sk={readContext:un,useCallback:zE,useContext:un,useEffect:bm,useImperativeHandle:$E,useInsertionEffect:FE,useLayoutEffect:jE,useMemo:HE,useReducer:Ad,useRef:UE,useState:function(){return Ad(Ga)},useDebugValue:Dm,useDeferredValue:function(t){var e=cn();return WE(e,Je.memoizedState,t)},useTransition:function(){var t=Ad(Ga)[0],e=cn().memoizedState;return[t,e]},useMutableSource:bE,useSyncExternalStore:DE,useId:qE,unstable_isNewReconciler:!1},Ik={readContext:un,useCallback:zE,useContext:un,useEffect:bm,useImperativeHandle:$E,useInsertionEffect:FE,useLayoutEffect:jE,useMemo:HE,useReducer:Rd,useRef:UE,useState:function(){return Rd(Ga)},useDebugValue:Dm,useDeferredValue:function(t){var e=cn();return Je===null?e.memoizedState=t:WE(e,Je.memoizedState,t)},useTransition:function(){var t=Rd(Ga)[0],e=cn().memoizedState;return[t,e]},useMutableSource:bE,useSyncExternalStore:DE,useId:qE,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ih={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=qr(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(_n(e,t,i,r),Cu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=qr(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(_n(e,t,i,r),Cu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=qr(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hr(t,i,r),e!==null&&(_n(e,t,r,n),Cu(e,t,r))}};function Jv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ba(n,r)||!Ba(i,s):!0}function YE(t,e,n){var r=!1,i=Zr,s=e.contextType;return typeof s=="object"&&s!==null?s=un(s):(i=$t(e)?Ki:xt.current,r=e.contextTypes,s=(r=r!=null)?to(t,i):Zr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ih,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Zv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ih.enqueueReplaceState(e,e.state,null)}function Bf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Im(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=un(s):(s=$t(e)?Ki:xt.current,i.context=to(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ih.enqueueReplaceState(i,i.state,null),hc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function so(t,e){try{var n="",r=e;do n+=JR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function $f(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Pk=typeof WeakMap=="function"?WeakMap:Map;function XE(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gc||(gc=!0,Jf=r),$f(t,e)},n}function JE(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){$f(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){$f(t,e),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function e_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Pk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Fk.bind(null,t,e,n),e.then(t,t))}function t_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function n_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var Ak=mr.ReactCurrentOwner,Ft=!1;function Dt(t,e,n,r){e.child=t===null?RE(e,null,n,r):ro(e,t.child,n,r)}function r_(t,e,n,r,i){n=n.render;var s=e.ref;return Gs(e,i),r=km(t,e,n,r,s,i),n=xm(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ur(t,e,i)):(be&&n&&ym(e),e.flags|=1,Dt(t,e,r,i),e.child)}function i_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ZE(t,e,s,r,i)):(t=Nu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ba,n(o,r)&&t.ref===e.ref)return ur(t,e,i)}return e.flags|=1,t=Kr(s,r),t.ref=e.ref,t.return=e,e.child=t}function ZE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ba(s,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,ur(t,e,i)}return zf(t,e,n,r,i)}function eS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Ls,qt),qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Ls,qt),qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(Ls,qt),qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(Ls,qt),qt|=r;return Dt(t,e,i,n),e.child}function tS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zf(t,e,n,r,i){var s=$t(n)?Ki:xt.current;return s=to(e,s),Gs(e,i),n=km(t,e,n,r,s,i),r=xm(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ur(t,e,i)):(be&&r&&ym(e),e.flags|=1,Dt(t,e,n,i),e.child)}function s_(t,e,n,r,i){if($t(n)){var s=!0;oc(e)}else s=!1;if(Gs(e,i),e.stateNode===null)bu(t,e),YE(e,n,r),Bf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=un(c):(c=$t(n)?Ki:xt.current,c=to(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Zv(e,o,r,c),kr=!1;var p=e.memoizedState;o.state=p,hc(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Bt.current||kr?(typeof h=="function"&&(jf(e,n,h,r),l=e.memoizedState),(a=kr||Jv(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:mn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=un(l):(l=$t(n)?Ki:xt.current,l=to(e,l));var T=n.getDerivedStateFromProps;(h=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&Zv(e,o,r,l),kr=!1,p=e.memoizedState,o.state=p,hc(e,r,o,i);var C=e.memoizedState;a!==f||p!==C||Bt.current||kr?(typeof T=="function"&&(jf(e,n,T,r),C=e.memoizedState),(c=kr||Jv(e,n,c,r,p,C,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Hf(t,e,n,r,s,i)}function Hf(t,e,n,r,i,s){tS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Hv(e,n,!1),ur(t,e,s);r=e.stateNode,Ak.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ro(e,t.child,null,s),e.child=ro(e,null,a,s)):Dt(t,e,a,s),e.memoizedState=r.state,i&&Hv(e,n,!0),e.child}function nS(t){var e=t.stateNode;e.pendingContext?zv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zv(t,e.context,!1),Pm(t,e.containerInfo)}function o_(t,e,n,r,i){return no(),_m(i),e.flags|=256,Dt(t,e,n,r),e.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function qf(t){return{baseLanes:t,cachePool:null,transitions:null}}function rS(t,e,n){var r=e.pendingProps,i=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(Ne,i&1),t===null)return Uf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ah(o,r,0,null),t=Bi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qf(n),e.memoizedState=Wf,t):Om(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Rk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Kr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Kr(a,s):(s=Bi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?qf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Wf,r}return s=t.child,t=s.sibling,r=Kr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Om(t,e){return e=ah({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cu(t,e,n,r){return r!==null&&_m(r),ro(e,t.child,null,n),t=Om(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cd(Error(G(422))),cu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ah({mode:"visible",children:r.children},i,0,null),s=Bi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ro(e,t.child,null,o),e.child.memoizedState=qf(o),e.memoizedState=Wf,s);if(!(e.mode&1))return cu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(G(419)),r=Cd(s,r,void 0),cu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ft||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lr(t,i),_n(r,t,i,-1))}return Fm(),r=Cd(Error(G(421))),cu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kt=zr(i.nextSibling),Qt=e,be=!0,yn=null,t!==null&&(rn[sn++]=Gn,rn[sn++]=Qn,rn[sn++]=Gi,Gn=t.id,Qn=t.overflow,Gi=e),e=Om(e,r.children),e.flags|=4096,e)}function a_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ff(t.return,e,n)}function kd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a_(t,n,e);else if(t.tag===19)a_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kd(e,!0,n,null,s);break;case"together":kd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ur(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ck(t,e,n){switch(e.tag){case 3:nS(e),no();break;case 5:xE(e);break;case 1:$t(e.type)&&oc(e);break;case 4:Pm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(uc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?rS(t,e,n):(Pe(Ne,Ne.current&1),t=ur(t,e,n),t!==null?t.sibling:null);Pe(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,eS(t,e,n)}return ur(t,e,n)}var sS,Kf,oS,aS;sS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kf=function(){};oS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Vi(bn.current);var s=null;switch(n){case"input":i=mf(t,i),r=mf(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=vf(t,i),r=vf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ic)}wf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Na.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Na.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Re("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ea(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kk(t,e,n){var r=e.pendingProps;switch(vm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return $t(e.type)&&sc(),Et(e),null;case 3:return r=e.stateNode,io(),ke(Bt),ke(xt),Rm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(tp(yn),yn=null))),Kf(t,e),Et(e),null;case 5:Am(e);var i=Vi(qa.current);if(n=e.type,t!==null&&e.stateNode!=null)oS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Et(e),null}if(t=Vi(bn.current),lu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[kn]=e,r[Ha]=s,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<aa.length;i++)Re(aa[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":gv(r,s),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Re("invalid",r);break;case"textarea":vv(r,s),Re("invalid",r)}wf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&au(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&au(r.textContent,a,t),i=["children",""+a]):Na.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Zl(r),yv(r,s,!0);break;case"textarea":Zl(r),_v(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ic)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=VT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kn]=e,t[Ha]=r,sS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tf(n,r),n){case"dialog":Re("cancel",t),Re("close",t),i=r;break;case"iframe":case"object":case"embed":Re("load",t),i=r;break;case"video":case"audio":for(i=0;i<aa.length;i++)Re(aa[i],t);i=r;break;case"source":Re("error",t),i=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),i=r;break;case"details":Re("toggle",t),i=r;break;case"input":gv(t,r),i=mf(t,r),Re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Re("invalid",t);break;case"textarea":vv(t,r),i=vf(t,r),Re("invalid",t);break;default:i=r}wf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?UT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&MT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Va(t,l):typeof l=="number"&&Va(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Na.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Re("scroll",t):l!=null&&rm(t,s,l,o))}switch(n){case"input":Zl(t),yv(t,r,!1);break;case"textarea":Zl(t),_v(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)aS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Vi(qa.current),Vi(bn.current),lu(e)){if(r=e.stateNode,n=e.memoizedProps,r[kn]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:au(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&au(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kn]=e,e.stateNode=r}return Et(e),null;case 13:if(ke(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&Kt!==null&&e.mode&1&&!(e.flags&128))PE(),no(),e.flags|=98560,s=!1;else if(s=lu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[kn]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else yn!==null&&(tp(yn),yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?et===0&&(et=3):Fm())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return io(),Kf(t,e),t===null&&$a(e.stateNode.containerInfo),Et(e),null;case 10:return Em(e.type._context),Et(e),null;case 17:return $t(e.type)&&sc(),Et(e),null;case 19:if(ke(Ne),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ea(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=dc(t),o!==null){for(e.flags|=128,ea(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>oo&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304)}else{if(!r)if(t=dc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return Et(e),null}else 2*We()-s.renderingStartTime>oo&&n!==1073741824&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=Ne.current,Pe(Ne,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Um(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function xk(t,e){switch(vm(e),e.tag){case 1:return $t(e.type)&&sc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return io(),ke(Bt),ke(xt),Rm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Am(e),null;case 13:if(ke(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(Ne),null;case 4:return io(),null;case 10:return Em(e.type._context),null;case 22:case 23:return Um(),null;case 24:return null;default:return null}}var hu=!1,At=!1,bk=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function Gf(t,e,n){try{n()}catch(r){Be(t,e,r)}}var l_=!1;function Dk(t,e){if(bf=tc,t=dE(),gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var T;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(T=f.firstChild)!==null;)p=f,f=T;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(T=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=T}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Df={focusedElem:t,selectionRange:n},tc=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var x=C.memoizedProps,k=C.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:mn(e.type,x),k);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(b){Be(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return C=l_,l_=!1,C}function Ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gf(e,n,s)}i=i.next}while(i!==r)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lS(t){var e=t.alternate;e!==null&&(t.alternate=null,lS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[Ha],delete e[Vf],delete e[pk],delete e[mk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uS(t){return t.tag===5||t.tag===3||t.tag===4}function u_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ic));else if(r!==4&&(t=t.child,t!==null))for(Yf(t,e,n),t=t.sibling;t!==null;)Yf(t,e,n),t=t.sibling}function Xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xf(t,e,n),t=t.sibling;t!==null;)Xf(t,e,n),t=t.sibling}var ut=null,gn=!1;function Ir(t,e,n){for(n=n.child;n!==null;)cS(t,e,n),n=n.sibling}function cS(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Xc,n)}catch{}switch(n.tag){case 5:At||Ms(n,e);case 6:var r=ut,i=gn;ut=null,Ir(t,e,n),ut=r,gn=i,ut!==null&&(gn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(gn?(t=ut,n=n.stateNode,t.nodeType===8?Ed(t.parentNode,n):t.nodeType===1&&Ed(t,n),Fa(t)):Ed(ut,n.stateNode));break;case 4:r=ut,i=gn,ut=n.stateNode.containerInfo,gn=!0,Ir(t,e,n),ut=r,gn=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gf(n,e,o),i=i.next}while(i!==r)}Ir(t,e,n);break;case 1:if(!At&&(Ms(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Be(n,e,a)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,Ir(t,e,n),At=r):Ir(t,e,n);break;default:Ir(t,e,n)}}function c_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bk),e.forEach(function(r){var i=Bk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,gn=!1;break e;case 3:ut=a.stateNode.containerInfo,gn=!0;break e;case 4:ut=a.stateNode.containerInfo,gn=!0;break e}a=a.return}if(ut===null)throw Error(G(160));cS(s,o,i),ut=null,gn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hS(e,t),e=e.sibling}function hS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),An(t),r&4){try{Ea(3,t,t.return),sh(3,t)}catch(x){Be(t,t.return,x)}try{Ea(5,t,t.return)}catch(x){Be(t,t.return,x)}}break;case 1:pn(e,t),An(t),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(pn(e,t),An(t),r&512&&n!==null&&Ms(n,n.return),t.flags&32){var i=t.stateNode;try{Va(i,"")}catch(x){Be(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&OT(i,s),Tf(a,o);var c=Tf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?UT(i,f):h==="dangerouslySetInnerHTML"?MT(i,f):h==="children"?Va(i,f):rm(i,h,f,c)}switch(a){case"input":gf(i,s);break;case"textarea":NT(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var T=s.value;T!=null?Hs(i,!!s.multiple,T,!1):p!==!!s.multiple&&(s.defaultValue!=null?Hs(i,!!s.multiple,s.defaultValue,!0):Hs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ha]=s}catch(x){Be(t,t.return,x)}}break;case 6:if(pn(e,t),An(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Be(t,t.return,x)}}break;case 3:if(pn(e,t),An(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fa(e.containerInfo)}catch(x){Be(t,t.return,x)}break;case 4:pn(e,t),An(t);break;case 13:pn(e,t),An(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mm=We())),r&4&&c_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(c=At)||h,pn(e,t),At=c):pn(e,t),An(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(J=t,h=t.child;h!==null;){for(f=J=h;J!==null;){switch(p=J,T=p.child,p.tag){case 0:case 11:case 14:case 15:Ea(4,p,p.return);break;case 1:Ms(p,p.return);var C=p.stateNode;if(typeof C.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(x){Be(r,n,x)}}break;case 5:Ms(p,p.return);break;case 22:if(p.memoizedState!==null){d_(f);continue}}T!==null?(T.return=p,J=T):d_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=LT("display",o))}catch(x){Be(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Be(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pn(e,t),An(t),r&4&&c_(t);break;case 21:break;default:pn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uS(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Va(i,""),r.flags&=-33);var s=u_(t);Xf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=u_(t);Yf(t,a,o);break;default:throw Error(G(161))}}catch(l){Be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ok(t,e,n){J=t,dS(t)}function dS(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||hu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||At;a=hu;var c=At;if(hu=o,(At=l)&&!c)for(J=i;J!==null;)o=J,l=o.child,o.tag===22&&o.memoizedState!==null?f_(i):l!==null?(l.return=o,J=l):f_(i);for(;s!==null;)J=s,dS(s),s=s.sibling;J=i,hu=a,At=c}h_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,J=s):h_(t)}}function h_(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||sh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Qv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Fa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}At||e.flags&512&&Qf(e)}catch(p){Be(e,e.return,p)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function d_(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function f_(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sh(4,e)}catch(l){Be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Be(e,i,l)}}var s=e.return;try{Qf(e)}catch(l){Be(e,s,l)}break;case 5:var o=e.return;try{Qf(e)}catch(l){Be(e,o,l)}}}catch(l){Be(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var Nk=Math.ceil,mc=mr.ReactCurrentDispatcher,Nm=mr.ReactCurrentOwner,an=mr.ReactCurrentBatchConfig,ge=0,ot=null,Qe=null,ft=0,qt=0,Ls=li(0),et=0,Ya=null,Yi=0,oh=0,Vm=0,Sa=null,Lt=null,Mm=0,oo=1/0,Hn=null,gc=!1,Jf=null,Wr=null,du=!1,Mr=null,yc=0,Ia=0,Zf=null,Du=-1,Ou=0;function Ot(){return ge&6?We():Du!==-1?Du:Du=We()}function qr(t){return t.mode&1?ge&2&&ft!==0?ft&-ft:yk.transition!==null?(Ou===0&&(Ou=YT()),Ou):(t=Te,t!==0||(t=window.event,t=t===void 0?16:rE(t.type)),t):1}function _n(t,e,n,r){if(50<Ia)throw Ia=0,Zf=null,Error(G(185));hl(t,n,r),(!(ge&2)||t!==ot)&&(t===ot&&(!(ge&2)&&(oh|=n),et===4&&br(t,ft)),zt(t,r),n===1&&ge===0&&!(e.mode&1)&&(oo=We()+500,nh&&ui()))}function zt(t,e){var n=t.callbackNode;yC(t,e);var r=ec(t,t===ot?ft:0);if(r===0)n!==null&&Ev(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ev(n),e===1)t.tag===0?gk(p_.bind(null,t)):EE(p_.bind(null,t)),dk(function(){!(ge&6)&&ui()}),n=null;else{switch(XT(r)){case 1:n=lm;break;case 4:n=GT;break;case 16:n=Zu;break;case 536870912:n=QT;break;default:n=Zu}n=wS(n,fS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fS(t,e){if(Du=-1,Ou=0,ge&6)throw Error(G(327));var n=t.callbackNode;if(Qs()&&t.callbackNode!==n)return null;var r=ec(t,t===ot?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vc(t,r);else{e=r;var i=ge;ge|=2;var s=mS();(ot!==t||ft!==e)&&(Hn=null,oo=We()+500,ji(t,e));do try{Lk();break}catch(a){pS(t,a)}while(!0);Tm(),mc.current=s,ge=i,Qe!==null?e=0:(ot=null,ft=0,e=et)}if(e!==0){if(e===2&&(i=Af(t),i!==0&&(r=i,e=ep(t,i))),e===1)throw n=Ya,ji(t,0),br(t,r),zt(t,We()),n;if(e===6)br(t,r);else{if(i=t.current.alternate,!(r&30)&&!Vk(i)&&(e=vc(t,r),e===2&&(s=Af(t),s!==0&&(r=s,e=ep(t,s))),e===1))throw n=Ya,ji(t,0),br(t,r),zt(t,We()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:ki(t,Lt,Hn);break;case 3:if(br(t,r),(r&130023424)===r&&(e=Mm+500-We(),10<e)){if(ec(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Nf(ki.bind(null,t,Lt,Hn),e);break}ki(t,Lt,Hn);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nk(r/1960))-r,10<r){t.timeoutHandle=Nf(ki.bind(null,t,Lt,Hn),r);break}ki(t,Lt,Hn);break;case 5:ki(t,Lt,Hn);break;default:throw Error(G(329))}}}return zt(t,We()),t.callbackNode===n?fS.bind(null,t):null}function ep(t,e){var n=Sa;return t.current.memoizedState.isDehydrated&&(ji(t,e).flags|=256),t=vc(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&tp(e)),t}function tp(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function Vk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!En(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~Vm,e&=~oh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function p_(t){if(ge&6)throw Error(G(327));Qs();var e=ec(t,0);if(!(e&1))return zt(t,We()),null;var n=vc(t,e);if(t.tag!==0&&n===2){var r=Af(t);r!==0&&(e=r,n=ep(t,r))}if(n===1)throw n=Ya,ji(t,0),br(t,e),zt(t,We()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ki(t,Lt,Hn),zt(t,We()),null}function Lm(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(oo=We()+500,nh&&ui())}}function Xi(t){Mr!==null&&Mr.tag===0&&!(ge&6)&&Qs();var e=ge;ge|=1;var n=an.transition,r=Te;try{if(an.transition=null,Te=1,t)return t()}finally{Te=r,an.transition=n,ge=e,!(ge&6)&&ui()}}function Um(){qt=Ls.current,ke(Ls)}function ji(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hk(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(vm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sc();break;case 3:io(),ke(Bt),ke(xt),Rm();break;case 5:Am(r);break;case 4:io();break;case 13:ke(Ne);break;case 19:ke(Ne);break;case 10:Em(r.type._context);break;case 22:case 23:Um()}n=n.return}if(ot=t,Qe=t=Kr(t.current,null),ft=qt=e,et=0,Ya=null,Vm=oh=Yi=0,Lt=Sa=null,Ni!==null){for(e=0;e<Ni.length;e++)if(n=Ni[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ni=null}return t}function pS(t,e){do{var n=Qe;try{if(Tm(),ku.current=pc,fc){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fc=!1}if(Qi=0,st=Je=Me=null,Ta=!1,Ka=0,Nm.current=null,n===null||n.return===null){et=1,Ya=e,Qe=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var T=t_(o);if(T!==null){T.flags&=-257,n_(T,o,a,s,e),T.mode&1&&e_(s,c,e),e=T,l=c;var C=e.updateQueue;if(C===null){var x=new Set;x.add(l),e.updateQueue=x}else C.add(l);break e}else{if(!(e&1)){e_(s,c,e),Fm();break e}l=Error(G(426))}}else if(be&&a.mode&1){var k=t_(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),n_(k,o,a,s,e),_m(so(l,a));break e}}s=l=so(l,a),et!==4&&(et=2),Sa===null?Sa=[s]:Sa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=XE(s,l,e);Gv(s,_);break e;case 1:a=l;var v=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Wr===null||!Wr.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=JE(s,a,e);Gv(s,b);break e}}s=s.return}while(s!==null)}yS(n)}catch(L){e=L,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function mS(){var t=mc.current;return mc.current=pc,t===null?pc:t}function Fm(){(et===0||et===3||et===2)&&(et=4),ot===null||!(Yi&268435455)&&!(oh&268435455)||br(ot,ft)}function vc(t,e){var n=ge;ge|=2;var r=mS();(ot!==t||ft!==e)&&(Hn=null,ji(t,e));do try{Mk();break}catch(i){pS(t,i)}while(!0);if(Tm(),ge=n,mc.current=r,Qe!==null)throw Error(G(261));return ot=null,ft=0,et}function Mk(){for(;Qe!==null;)gS(Qe)}function Lk(){for(;Qe!==null&&!lC();)gS(Qe)}function gS(t){var e=_S(t.alternate,t,qt);t.memoizedProps=t.pendingProps,e===null?yS(t):Qe=e,Nm.current=null}function yS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xk(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Qe=null;return}}else if(n=kk(n,e,qt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);et===0&&(et=5)}function ki(t,e,n){var r=Te,i=an.transition;try{an.transition=null,Te=1,Uk(t,e,n,r)}finally{an.transition=i,Te=r}return null}function Uk(t,e,n,r){do Qs();while(Mr!==null);if(ge&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(vC(t,s),t===ot&&(Qe=ot=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||du||(du=!0,wS(Zu,function(){return Qs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=an.transition,an.transition=null;var o=Te;Te=1;var a=ge;ge|=4,Nm.current=null,Dk(t,n),hS(n,t),ik(Df),tc=!!bf,Df=bf=null,t.current=n,Ok(n),uC(),ge=a,Te=o,an.transition=s}else t.current=n;if(du&&(du=!1,Mr=t,yc=i),s=t.pendingLanes,s===0&&(Wr=null),dC(n.stateNode),zt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gc)throw gc=!1,t=Jf,Jf=null,t;return yc&1&&t.tag!==0&&Qs(),s=t.pendingLanes,s&1?t===Zf?Ia++:(Ia=0,Zf=t):Ia=0,ui(),null}function Qs(){if(Mr!==null){var t=XT(yc),e=an.transition,n=Te;try{if(an.transition=null,Te=16>t?16:t,Mr===null)var r=!1;else{if(t=Mr,Mr=null,yc=0,ge&6)throw Error(G(331));var i=ge;for(ge|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(J=c;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:Ea(8,h,s)}var f=h.child;if(f!==null)f.return=h,J=f;else for(;J!==null;){h=J;var p=h.sibling,T=h.return;if(lS(h),h===c){J=null;break}if(p!==null){p.return=T,J=p;break}J=T}}}var C=s.alternate;if(C!==null){var x=C.child;if(x!==null){C.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ea(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,J=_;break e}J=s.return}}var v=t.current;for(J=v;J!==null;){o=J;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,J=E;else e:for(o=v;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sh(9,a)}}catch(L){Be(a,a.return,L)}if(a===o){J=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,J=b;break e}J=a.return}}if(ge=i,ui(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Xc,t)}catch{}r=!0}return r}finally{Te=n,an.transition=e}}return!1}function m_(t,e,n){e=so(n,e),e=XE(t,e,1),t=Hr(t,e,1),e=Ot(),t!==null&&(hl(t,1,e),zt(t,e))}function Be(t,e,n){if(t.tag===3)m_(t,t,n);else for(;e!==null;){if(e.tag===3){m_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){t=so(n,t),t=JE(e,t,1),e=Hr(e,t,1),t=Ot(),e!==null&&(hl(e,1,t),zt(e,t));break}}e=e.return}}function Fk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ft&n)===n&&(et===4||et===3&&(ft&130023424)===ft&&500>We()-Mm?ji(t,0):Vm|=n),zt(t,e)}function vS(t,e){e===0&&(t.mode&1?(e=nu,nu<<=1,!(nu&130023424)&&(nu=4194304)):e=1);var n=Ot();t=lr(t,e),t!==null&&(hl(t,e,n),zt(t,n))}function jk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vS(t,n)}function Bk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),vS(t,n)}var _S;_S=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,Ck(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,be&&e.flags&1048576&&SE(e,lc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bu(t,e),t=e.pendingProps;var i=to(e,xt.current);Gs(e,n),i=km(null,e,r,t,i,n);var s=xm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(s=!0,oc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Im(e),i.updater=ih,e.stateNode=i,i._reactInternals=e,Bf(e,r,t,n),e=Hf(null,e,r,!0,s,n)):(e.tag=0,be&&s&&ym(e),Dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zk(r),t=mn(r,t),i){case 0:e=zf(null,e,r,t,n);break e;case 1:e=s_(null,e,r,t,n);break e;case 11:e=r_(null,e,r,t,n);break e;case 14:e=i_(null,e,r,mn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),zf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),s_(t,e,r,i,n);case 3:e:{if(nS(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,kE(t,e),hc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=so(Error(G(423)),e),e=o_(t,e,r,n,i);break e}else if(r!==i){i=so(Error(G(424)),e),e=o_(t,e,r,n,i);break e}else for(Kt=zr(e.stateNode.containerInfo.firstChild),Qt=e,be=!0,yn=null,n=RE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(no(),r===i){e=ur(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return xE(e),t===null&&Uf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Of(r,i)?o=null:s!==null&&Of(r,s)&&(e.flags|=32),tS(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&Uf(e),null;case 13:return rS(t,e,n);case 4:return Pm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ro(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),r_(t,e,r,i,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Pe(uc,r._currentValue),r._currentValue=o,s!==null)if(En(s.value,o)){if(s.children===i.children&&!Bt.current){e=ur(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=er(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ff(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(G(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ff(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Gs(e,n),i=un(i),r=r(i),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,i=mn(r,e.pendingProps),i=mn(r.type,i),i_(t,e,r,i,n);case 15:return ZE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),bu(t,e),e.tag=1,$t(r)?(t=!0,oc(e)):t=!1,Gs(e,n),YE(e,r,i),Bf(e,r,i,n),Hf(null,e,r,!0,t,n);case 19:return iS(t,e,n);case 22:return eS(t,e,n)}throw Error(G(156,e.tag))};function wS(t,e){return KT(t,e)}function $k(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new $k(t,e,n,r)}function jm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zk(t){if(typeof t=="function")return jm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sm)return 11;if(t===om)return 14}return 2}function Kr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")jm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return Bi(n.children,i,s,e);case im:o=8,i|=8;break;case hf:return t=on(12,n,e,i|2),t.elementType=hf,t.lanes=s,t;case df:return t=on(13,n,e,i),t.elementType=df,t.lanes=s,t;case ff:return t=on(19,n,e,i),t.elementType=ff,t.lanes=s,t;case xT:return ah(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case CT:o=10;break e;case kT:o=9;break e;case sm:o=11;break e;case om:o=14;break e;case Cr:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=on(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Bi(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function ah(t,e,n,r){return t=on(22,t,r,e),t.elementType=xT,t.lanes=n,t.stateNode={isHidden:!1},t}function xd(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function bd(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hd(0),this.expirationTimes=hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bm(t,e,n,r,i,s,o,a,l){return t=new Hk(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=on(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Im(s),t}function Wk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function TS(t){if(!t)return Zr;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if($t(n))return TE(t,n,e)}return e}function ES(t,e,n,r,i,s,o,a,l){return t=Bm(n,r,!0,t,i,s,o,a,l),t.context=TS(null),n=t.current,r=Ot(),i=qr(n),s=er(r,i),s.callback=e??null,Hr(n,s,i),t.current.lanes=i,hl(t,i,r),zt(t,r),t}function lh(t,e,n,r){var i=e.current,s=Ot(),o=qr(i);return n=TS(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(i,e,o),t!==null&&(_n(t,i,o,s),Cu(t,i,o)),o}function _c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function g_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $m(t,e){g_(t,e),(t=t.alternate)&&g_(t,e)}function qk(){return null}var SS=typeof reportError=="function"?reportError:function(t){console.error(t)};function zm(t){this._internalRoot=t}uh.prototype.render=zm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));lh(t,e,null,null)};uh.prototype.unmount=zm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xi(function(){lh(null,t,null,null)}),e[ar]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=eE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&nE(t)}};function Hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function y_(){}function Kk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=_c(o);s.call(c)}}var o=ES(e,r,t,0,null,!1,!1,"",y_);return t._reactRootContainer=o,t[ar]=o.current,$a(t.nodeType===8?t.parentNode:t),Xi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=_c(l);a.call(c)}}var l=Bm(t,0,!1,null,null,!1,!1,"",y_);return t._reactRootContainer=l,t[ar]=l.current,$a(t.nodeType===8?t.parentNode:t),Xi(function(){lh(e,l,n,r)}),l}function hh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_c(o);a.call(l)}}lh(e,o,t,i)}else o=Kk(n,e,t,i,r);return _c(o)}JT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(um(e,n|1),zt(e,We()),!(ge&6)&&(oo=We()+500,ui()))}break;case 13:Xi(function(){var r=lr(t,1);if(r!==null){var i=Ot();_n(r,t,1,i)}}),$m(t,1)}};cm=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=Ot();_n(e,t,134217728,n)}$m(t,134217728)}};ZT=function(t){if(t.tag===13){var e=qr(t),n=lr(t,e);if(n!==null){var r=Ot();_n(n,t,e,r)}$m(t,e)}};eE=function(){return Te};tE=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Sf=function(t,e,n){switch(e){case"input":if(gf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=th(r);if(!i)throw Error(G(90));DT(r),gf(r,i)}}}break;case"textarea":NT(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};BT=Lm;$T=Xi;var Gk={usingClientEntryPoint:!1,Events:[fl,bs,th,FT,jT,Lm]},ta={findFiberByHostInstance:Oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qk={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WT(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fu.isDisabled&&fu.supportsFiber)try{Xc=fu.inject(Qk),xn=fu}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hm(e))throw Error(G(200));return Wk(t,e,null,n)};Zt.createRoot=function(t,e){if(!Hm(t))throw Error(G(299));var n=!1,r="",i=SS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bm(t,1,!1,null,null,n,!1,r,i),t[ar]=e.current,$a(t.nodeType===8?t.parentNode:t),new zm(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=WT(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return Xi(t)};Zt.hydrate=function(t,e,n){if(!ch(e))throw Error(G(200));return hh(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!Hm(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=SS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ES(e,null,t,1,n??null,i,!1,s,o),t[ar]=e.current,$a(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new uh(e)};Zt.render=function(t,e,n){if(!ch(e))throw Error(G(200));return hh(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!ch(t))throw Error(G(40));return t._reactRootContainer?(Xi(function(){hh(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};Zt.unstable_batchedUpdates=Lm;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ch(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return hh(t,e,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function IS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IS)}catch(t){console.error(t)}}IS(),IT.exports=Zt;var Yk=IT.exports,PS,v_=Yk;PS=v_.createRoot,v_.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xa(){return Xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xa.apply(this,arguments)}var Lr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Lr||(Lr={}));const __="popstate";function Xk(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return np("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:wc(i)}return Zk(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jk(){return Math.random().toString(36).substr(2,8)}function w_(t,e){return{usr:t.state,key:t.key,idx:e}}function np(t,e,n,r){return n===void 0&&(n=null),Xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ao(e):e,{state:n,key:e&&e.key||r||Jk()})}function wc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Zk(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Lr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Xa({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Lr.Pop;let k=h(),_=k==null?null:k-c;c=k,l&&l({action:a,location:x.location,delta:_})}function p(k,_){a=Lr.Push;let v=np(x.location,k,_);c=h()+1;let E=w_(v,c),b=x.createHref(v);try{o.pushState(E,"",b)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(b)}s&&l&&l({action:a,location:x.location,delta:1})}function T(k,_){a=Lr.Replace;let v=np(x.location,k,_);c=h();let E=w_(v,c),b=x.createHref(v);o.replaceState(E,"",b),s&&l&&l({action:a,location:x.location,delta:0})}function C(k){let _=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof k=="string"?k:wc(k);return v=v.replace(/ $/,"%20"),qe(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let x={get action(){return a},get location(){return t(i,o)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(__,f),l=k,()=>{i.removeEventListener(__,f),l=null}},createHref(k){return e(i,k)},createURL:C,encodeLocation(k){let _=C(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:T,go(k){return o.go(k)}};return x}var T_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(T_||(T_={}));function ex(t,e,n){return n===void 0&&(n="/"),tx(t,e,n,!1)}function tx(t,e,n,r){let i=typeof e=="string"?Ao(e):e,s=Wm(i.pathname||"/",n);if(s==null)return null;let o=RS(t);nx(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=fx(s);a=hx(o[l],c,r)}return a}function RS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Gr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),RS(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:ux(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of CS(s.path))i(s,o,l)}),e}function CS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=CS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function nx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rx=/^:[\w-]+$/,ix=3,sx=2,ox=1,ax=10,lx=-2,E_=t=>t==="*";function ux(t,e){let n=t.split("/"),r=n.length;return n.some(E_)&&(r+=lx),e&&(r+=sx),n.filter(i=>!E_(i)).reduce((i,s)=>i+(rx.test(s)?ix:s===""?ox:ax),r)}function cx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hx(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=S_({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=S_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Gr([s,f.pathname]),pathnameBase:yx(Gr([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Gr([s,f.pathnameBase]))}return o}function S_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:T}=h;if(p==="*"){let x=a[f]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const C=a[f];return T&&!C?c[p]=void 0:c[p]=(C||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function dx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),AS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function fx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function px(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ao(t):t;return{pathname:n?n.startsWith("/")?n:mx(n,e):e,search:vx(r),hash:_x(i)}}function mx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Dd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qm(t,e){let n=gx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Km(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ao(t):(i=Xa({},t),qe(!i.pathname||!i.pathname.includes("?"),Dd("?","pathname","search",i)),qe(!i.pathname||!i.pathname.includes("#"),Dd("#","pathname","hash",i)),qe(!i.search||!i.search.includes("#"),Dd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=px(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Gr=t=>t.join("/").replace(/\/\/+/g,"/"),yx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_x=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kS=["post","put","patch","delete"];new Set(kS);const Tx=["get",...kS];new Set(Tx);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ja(){return Ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ja.apply(this,arguments)}const Gm=F.createContext(null),Ex=F.createContext(null),ci=F.createContext(null),dh=F.createContext(null),hi=F.createContext({outlet:null,matches:[],isDataRoute:!1}),xS=F.createContext(null);function Sx(t,e){let{relative:n}=e===void 0?{}:e;Ro()||qe(!1);let{basename:r,navigator:i}=F.useContext(ci),{hash:s,pathname:o,search:a}=DS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Gr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ro(){return F.useContext(dh)!=null}function ml(){return Ro()||qe(!1),F.useContext(dh).location}function bS(t){F.useContext(ci).static||F.useLayoutEffect(t)}function fh(){let{isDataRoute:t}=F.useContext(hi);return t?Mx():Ix()}function Ix(){Ro()||qe(!1);let t=F.useContext(Gm),{basename:e,future:n,navigator:r}=F.useContext(ci),{matches:i}=F.useContext(hi),{pathname:s}=ml(),o=JSON.stringify(qm(i,n.v7_relativeSplatPath)),a=F.useRef(!1);return bS(()=>{a.current=!0}),F.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Km(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Gr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}function DS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(ci),{matches:i}=F.useContext(hi),{pathname:s}=ml(),o=JSON.stringify(qm(i,r.v7_relativeSplatPath));return F.useMemo(()=>Km(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Px(t,e){return Ax(t,e)}function Ax(t,e,n,r){Ro()||qe(!1);let{navigator:i}=F.useContext(ci),{matches:s}=F.useContext(hi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ml(),h;if(e){var f;let k=typeof e=="string"?Ao(e):e;l==="/"||(f=k.pathname)!=null&&f.startsWith(l)||qe(!1),h=k}else h=c;let p=h.pathname||"/",T=p;if(l!=="/"){let k=l.replace(/^\//,"").split("/");T="/"+p.replace(/^\//,"").split("/").slice(k.length).join("/")}let C=ex(t,{pathname:T}),x=bx(C&&C.map(k=>Object.assign({},k,{params:Object.assign({},a,k.params),pathname:Gr([l,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?l:Gr([l,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r);return e&&x?F.createElement(dh.Provider,{value:{location:Ja({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Lr.Pop}},x):x}function Rx(){let t=Vx(),e=wx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,null)}const Cx=F.createElement(Rx,null);class kx extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(hi.Provider,{value:this.props.routeContext},F.createElement(xS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xx(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(Gm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(hi.Provider,{value:e},r)}function bx(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||qe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:T}=n,C=f.route.loader&&p[f.route.id]===void 0&&(!T||T[f.route.id]===void 0);if(f.route.lazy||C){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let T,C=!1,x=null,k=null;n&&(T=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||Cx,l&&(c<0&&p===0?(C=!0,k=null):c===p&&(C=!0,k=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),v=()=>{let E;return T?E=x:C?E=k:f.route.Component?E=F.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,F.createElement(xx,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?F.createElement(kx,{location:n.location,revalidation:n.revalidation,component:x,error:T,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var OS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OS||{}),Tc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tc||{});function Dx(t){let e=F.useContext(Gm);return e||qe(!1),e}function Ox(t){let e=F.useContext(Ex);return e||qe(!1),e}function Nx(t){let e=F.useContext(hi);return e||qe(!1),e}function NS(t){let e=Nx(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function Vx(){var t;let e=F.useContext(xS),n=Ox(Tc.UseRouteError),r=NS(Tc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Mx(){let{router:t}=Dx(OS.UseNavigateStable),e=NS(Tc.UseNavigateStable),n=F.useRef(!1);return bS(()=>{n.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ja({fromRouteId:e},s)))},[t,e])}function Od(t){let{to:e,replace:n,state:r,relative:i}=t;Ro()||qe(!1);let{future:s,static:o}=F.useContext(ci),{matches:a}=F.useContext(hi),{pathname:l}=ml(),c=fh(),h=Km(e,qm(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(h);return F.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function la(t){qe(!1)}function Lx(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Lr.Pop,navigator:s,static:o=!1,future:a}=t;Ro()&&qe(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:s,static:o,future:Ja({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Ao(r));let{pathname:h="/",search:f="",hash:p="",state:T=null,key:C="default"}=r,x=F.useMemo(()=>{let k=Wm(h,l);return k==null?null:{location:{pathname:k,search:f,hash:p,state:T,key:C},navigationType:i}},[l,h,f,p,T,C,i]);return x==null?null:F.createElement(ci.Provider,{value:c},F.createElement(dh.Provider,{children:n,value:x}))}function Ux(t){let{children:e,location:n}=t;return Px(rp(e),n)}new Promise(()=>{});function rp(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){n.push.apply(n,rp(r.props.children,s));return}r.type!==la&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ip.apply(this,arguments)}function Fx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Bx(t,e){return t.button===0&&(!e||e==="_self")&&!jx(t)}const $x=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zx="6";try{window.__reactRouterVersion=zx}catch{}const Hx="startTransition",I_=FR[Hx];function Wx(t){let{basename:e,children:n,future:r,window:i}=t,s=F.useRef();s.current==null&&(s.current=Xk({window:i,v5Compat:!0}));let o=s.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=F.useCallback(f=>{c&&I_?I_(()=>l(f)):l(f)},[l,c]);return F.useLayoutEffect(()=>o.listen(h),[o,h]),F.createElement(Lx,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const qx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nd=F.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,p=Fx(e,$x),{basename:T}=F.useContext(ci),C,x=!1;if(typeof c=="string"&&Kx.test(c)&&(C=c,qx))try{let E=new URL(window.location.href),b=c.startsWith("//")?new URL(E.protocol+c):new URL(c),L=Wm(b.pathname,T);b.origin===E.origin&&L!=null?c=L+b.search+b.hash:x=!0}catch{}let k=Sx(c,{relative:i}),_=Gx(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function v(E){r&&r(E),E.defaultPrevented||_(E)}return F.createElement("a",ip({},p,{href:C||k,onClick:x||s?r:v,ref:n,target:l}))});var P_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(P_||(P_={}));var A_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A_||(A_={}));function Gx(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=fh(),c=ml(),h=DS(t,{relative:o});return F.useCallback(f=>{if(Bx(f,n)){f.preventDefault();let p=r!==void 0?r:wc(c)===wc(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var R_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Qx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},MS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,T=c&63;l||(T=64,o||(p=64)),r.push(n[h],n[f],n[p],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Qx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new Yx;const p=s<<2|a>>4;if(r.push(p),c!==64){const T=a<<4&240|c>>2;if(r.push(T),f!==64){const C=c<<6&192|f;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Yx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xx=function(t){const e=VS(t);return MS.encodeByteArray(e,!0)},Ec=function(t){return Xx(t).replace(/\./g,"")},Qm=function(t){try{return MS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=()=>Jx().__FIREBASE_DEFAULTS__,eb=()=>{if(typeof process>"u"||typeof R_>"u")return;const t=R_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Qm(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return Zx()||eb()||tb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LS=t=>{var e,n;return(n=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nb=t=>{const e=LS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},US=()=>{var t;return(t=ph())===null||t===void 0?void 0:t.config},FS=t=>{var e;return(e=ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ec(JSON.stringify(n)),Ec(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function sb(){var t;const e=(t=ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $S(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ob(){const t=xe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ab(){return!sb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lb(){try{return typeof indexedDB=="object"}catch{return!1}}function ub(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="FirebaseError";class Pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cb,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,di.prototype.create)}}class di{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?hb(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pn(i,a,r)}}function hb(t,e){return t.replace(db,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const db=/\{\$([^}]+)}/g;function fb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ao(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(C_(s)&&C_(o)){if(!ao(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function C_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HS(t,e){const n=new pb(t,e);return n.subscribe.bind(n)}class pb{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mb(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vd),i.error===void 0&&(i.error=Vd),i.complete===void 0&&(i.complete=Vd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class cr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vb(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yb(t){return t===xi?void 0:t}function vb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const wb={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},Tb=he.INFO,Eb={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},Sb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Eb[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=Tb,this._logHandler=Sb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const Ib=(t,e)=>e.some(n=>t instanceof n);let k_,x_;function Pb(){return k_||(k_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ab(){return x_||(x_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WS=new WeakMap,sp=new WeakMap,qS=new WeakMap,Md=new WeakMap,Ym=new WeakMap;function Rb(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WS.set(n,t)}).catch(()=>{}),Ym.set(e,t),e}function Cb(t){if(sp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sp.set(t,e)}let op={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kb(t){op=t(op)}function xb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ld(this),e,...n);return qS.set(r,e.sort?e.sort():[e]),Qr(r)}:Ab().includes(t)?function(...e){return t.apply(Ld(this),e),Qr(WS.get(this))}:function(...e){return Qr(t.apply(Ld(this),e))}}function bb(t){return typeof t=="function"?xb(t):(t instanceof IDBTransaction&&Cb(t),Ib(t,Pb())?new Proxy(t,op):t)}function Qr(t){if(t instanceof IDBRequest)return Rb(t);if(Md.has(t))return Md.get(t);const e=bb(t);return e!==t&&(Md.set(t,e),Ym.set(e,t)),e}const Ld=t=>Ym.get(t);function Db(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Qr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qr(o.result),l.oldVersion,l.newVersion,Qr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Ob=["get","getKey","getAll","getAllKeys","count"],Nb=["put","add","delete","clear"],Ud=new Map;function b_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Nb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ob.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Ud.set(e,s),s}kb(t=>({...t,get:(e,n,r)=>b_(e,n)||t.get(e,n,r),has:(e,n)=>!!b_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Mb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ap="@firebase/app",D_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new mh("@firebase/app"),Lb="@firebase/app-compat",Ub="@firebase/analytics-compat",Fb="@firebase/analytics",jb="@firebase/app-check-compat",Bb="@firebase/app-check",$b="@firebase/auth",zb="@firebase/auth-compat",Hb="@firebase/database",Wb="@firebase/data-connect",qb="@firebase/database-compat",Kb="@firebase/functions",Gb="@firebase/functions-compat",Qb="@firebase/installations",Yb="@firebase/installations-compat",Xb="@firebase/messaging",Jb="@firebase/messaging-compat",Zb="@firebase/performance",eD="@firebase/performance-compat",tD="@firebase/remote-config",nD="@firebase/remote-config-compat",rD="@firebase/storage",iD="@firebase/storage-compat",sD="@firebase/firestore",oD="@firebase/vertexai-preview",aD="@firebase/firestore-compat",lD="firebase",uD="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",cD={[ap]:"fire-core",[Lb]:"fire-core-compat",[Fb]:"fire-analytics",[Ub]:"fire-analytics-compat",[Bb]:"fire-app-check",[jb]:"fire-app-check-compat",[$b]:"fire-auth",[zb]:"fire-auth-compat",[Hb]:"fire-rtdb",[Wb]:"fire-data-connect",[qb]:"fire-rtdb-compat",[Kb]:"fire-fn",[Gb]:"fire-fn-compat",[Qb]:"fire-iid",[Yb]:"fire-iid-compat",[Xb]:"fire-fcm",[Jb]:"fire-fcm-compat",[Zb]:"fire-perf",[eD]:"fire-perf-compat",[tD]:"fire-rc",[nD]:"fire-rc-compat",[rD]:"fire-gcs",[iD]:"fire-gcs-compat",[sD]:"fire-fst",[aD]:"fire-fst-compat",[oD]:"fire-vertex","fire-js":"fire-js",[lD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Map,hD=new Map,up=new Map;function O_(t,e){try{t.container.addComponent(e)}catch(n){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ei(t){const e=t.name;if(up.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;up.set(e,t);for(const n of Sc.values())O_(n,t);for(const n of hD.values())O_(n,t);return!0}function Xm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jt(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new di("app","Firebase",dD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=uD;function KS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yr.create("bad-app-name",{appName:String(i)});if(n||(n=US()),!n)throw Yr.create("no-options");const s=Sc.get(i);if(s){if(ao(n,s.options)&&ao(r,s.config))return s;throw Yr.create("duplicate-app",{appName:i})}const o=new _b(i);for(const l of up.values())o.addComponent(l);const a=new fD(n,r,o);return Sc.set(i,a),a}function GS(t=lp){const e=Sc.get(t);if(!e&&t===lp&&US())return KS();if(!e)throw Yr.create("no-app",{appName:t});return e}function Dn(t,e,n){var r;let i=(r=cD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(a.join(" "));return}ei(new cr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD="firebase-heartbeat-database",mD=1,Za="firebase-heartbeat-store";let Fd=null;function QS(){return Fd||(Fd=Db(pD,mD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Za)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function gD(t){try{const n=(await QS()).transaction(Za),r=await n.objectStore(Za).get(YS(t));return await n.done,r}catch(e){if(e instanceof Pn)hr.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hr.warn(n.message)}}}async function N_(t,e){try{const r=(await QS()).transaction(Za,"readwrite");await r.objectStore(Za).put(e,YS(t)),await r.done}catch(n){if(n instanceof Pn)hr.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hr.warn(r.message)}}}function YS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1024,vD=30*24*60*60*1e3;class _D{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=V_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=vD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){hr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V_(),{heartbeatsToSend:r,unsentEntries:i}=wD(this._heartbeatsCache.heartbeats),s=Ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hr.warn(n),""}}}function V_(){return new Date().toISOString().substring(0,10)}function wD(t,e=yD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),M_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),M_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lb()?ub().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return N_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return N_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function M_(t){return Ec(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){ei(new cr("platform-logger",e=>new Vb(e),"PRIVATE")),ei(new cr("heartbeat",e=>new _D(e),"PRIVATE")),Dn(ap,D_,t),Dn(ap,D_,"esm2017"),Dn("fire-js","")}ED("");function Co(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function XS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SD=XS,JS=new di("auth","Firebase",XS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new mh("@firebase/auth");function ID(t,...e){Ic.logLevel<=he.WARN&&Ic.warn(`Auth (${gr}): ${t}`,...e)}function Vu(t,...e){Ic.logLevel<=he.ERROR&&Ic.error(`Auth (${gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Zm(t,...e)}function wn(t,...e){return Zm(t,...e)}function Jm(t,e,n){const r=Object.assign(Object.assign({},SD()),{[e]:n});return new di("auth","Firebase",r).create(e,{appName:t.name})}function $i(t){return Jm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PD(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(t,"argument-error"),Jm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JS.create(t,...e)}function se(t,e,...n){if(!t)throw Zm(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vu(e),new Error(e)}function dr(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function AD(){return L_()==="http:"||L_()==="https:"}function L_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AD()||$S()||"connection"in navigator)?navigator.onLine:!0}function CD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=jS()||zS()}get(){return RD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZS=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD=new gl(3e4,6e4);function tg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ko(t,e,n,r,i={}){return eI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=fi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return BS()||(c.referrerPolicy="no-referrer"),ZS.fetch()(tI(t,t.config.apiHost,n,a),c)})}async function eI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kD),e);try{const i=new DD(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw pu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw pu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw pu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw pu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Jm(t,h,c);Un(t,h)}}catch(i){if(i instanceof Pn)throw i;Un(t,"network-request-failed",{message:String(i)})}}async function bD(t,e,n,r,i={}){const s=await ko(t,e,n,r,i);return"mfaPendingCredential"in s&&Un(t,"multi-factor-auth-required",{_serverResponse:s}),s}function tI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?eg(t.config,i):`${t.config.apiScheme}://${i}`}let DD=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),xD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function pu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=wn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(t,e){return ko(t,"POST","/v1/accounts:delete",e)}async function nI(t,e){return ko(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ND(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),i=ng(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pa(jd(i.auth_time)),issuedAtTime:Pa(jd(i.iat)),expirationTime:Pa(jd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jd(t){return Number(t)*1e3}function ng(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qm(n);return i?JSON.parse(i):(Vu("Failed to decode base64 JWT payload"),null)}catch(i){return Vu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function U_(t){const e=ng(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pn&&VD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MD=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pa(this.lastLoginAt),this.creationTime=Pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await el(t,nI(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rI(s.providerUserInfo):[],a=UD(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function LD(t){const e=Ke(t);await Pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rI(t){return t.map(e=>{var{providerId:n}=e,r=Co(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){const n=await eI(t,{},async()=>{const r=fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=tI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jD(t,e){return ko(t,"POST","/v2/accounts:revokeToken",tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd=class dp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=U_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await FD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new dp;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dp,this.toJSON())}_performRefresh(){return Yn("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}let Ac=class ua{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Co(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await el(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ND(this,e)}reload(){return LD(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ua(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject($i(this.auth));const e=await this.getIdToken();return await el(this,OD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:b,isAnonymous:L,providerData:N,stsTokenManager:P}=n;se(E&&P,e,"internal-error");const g=Bd.fromJSON(this.name,P);se(typeof E=="string",e,"internal-error"),Pr(f,e.name),Pr(p,e.name),se(typeof b=="boolean",e,"internal-error"),se(typeof L=="boolean",e,"internal-error"),Pr(T,e.name),Pr(C,e.name),Pr(x,e.name),Pr(k,e.name),Pr(_,e.name),Pr(v,e.name);const y=new ua({uid:E,auth:e,email:p,emailVerified:b,displayName:f,isAnonymous:L,photoURL:C,phoneNumber:T,tenantId:x,stsTokenManager:g,createdAt:_,lastLoginAt:v});return N&&Array.isArray(N)&&(y.providerData=N.map(w=>Object.assign({},w))),k&&(y._redirectEventId=k),y}static async _fromIdTokenResponse(e,n,r=!1){const i=new Bd;i.updateFromServerResponse(n);const s=new ua({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Bd;a.updateFromIdToken(r);const l=new ua({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;function Xn(t){dr(t instanceof Function,"Expected a class definition");let e=F_.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,F_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iI=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};iI.type="NONE";const j_=iI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t,e,n){return`firebase:${t}:${e}:${n}`}let B_=class Lu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Mu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ac._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Lu(Xn(j_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Xn(j_);const o=Mu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Ac._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Lu(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Lu(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cI(e))return"Blackberry";if(hI(e))return"Webos";if(oI(e))return"Safari";if((e.includes("chrome/")||aI(e))&&!e.includes("edge/"))return"Chrome";if(uI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sI(t=xe()){return/firefox\//i.test(t)}function oI(t=xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aI(t=xe()){return/crios\//i.test(t)}function lI(t=xe()){return/iemobile/i.test(t)}function uI(t=xe()){return/android/i.test(t)}function cI(t=xe()){return/blackberry/i.test(t)}function hI(t=xe()){return/webos/i.test(t)}function rg(t=xe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BD(t=xe()){var e;return rg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $D(){return ob()&&document.documentMode===10}function dI(t=xe()){return rg(t)||uI(t)||hI(t)||cI(t)||/windows phone/i.test(t)||lI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t,e=[]){let n;switch(t){case"Browser":n=$_(xe());break;case"Worker":n=`${$_(xe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zD=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e={}){return ko(t,"GET","/v2/passwordPolicy",tg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=6;let qD=class{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:WD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KD=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z_(this),this.idTokenSubscription=new z_(this),this.beforeStateQueue=new zD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await B_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nI(this,{idToken:e}),r=await Ac._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject($i(this));const n=e?Ke(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject($i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject($i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HD(this),n=new qD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new di("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await B_.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&ID(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}};function gh(t){return Ke(t)}let z_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=HS(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GD(t){ig=t}function QD(t){return ig.loadJS(t)}function YD(){return ig.gapiScript}function XD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t,e){const n=Xm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ao(s,e??{}))return i;Un(i,"already-initialized")}return n.initialize({options:e})}function ZD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eO(t,e,n){const r=gh(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=pI(e),{host:o,port:a}=tO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),nO()}function pI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function tO(t){const e=pI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:H_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:H_(o)}}}function H_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function nO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mI=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(t,e){return bD(t,"POST","/v1/accounts:signInWithIdp",tg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="http://localhost";let yh=class fp extends mI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Co(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fp(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ys(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ys(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ys(e,n)}buildRequest(){const e={requestUri:rO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fi(n)}return e}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl=class extends sg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gI=class _s extends yl{constructor(){super("facebook.com")}static credential(e){return yh._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}};gI.FACEBOOK_SIGN_IN_METHOD="facebook.com";gI.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og=class ws extends yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yh._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ws.credential(n,r)}catch{return null}}};og.GOOGLE_SIGN_IN_METHOD="google.com";og.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yI=class Ts extends yl{constructor(){super("github.com")}static credential(e){return yh._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}};yI.GITHUB_SIGN_IN_METHOD="github.com";yI.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vI=class Es extends yl{constructor(){super("twitter.com")}static credential(e,n){return yh._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Es.credential(n,r)}catch{return null}}};vI.TWITTER_SIGN_IN_METHOD="twitter.com";vI.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ac._fromIdTokenResponse(e,r,i),o=W_(r);return new lo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=W_(r);return new lo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function W_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Pn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Rc(e,n,r,i)}}function _I(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(t,s,e,r):s})}async function iO(t,e,n=!1){const r=await el(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(t,e,n=!1){const{auth:r}=t;if(jt(r.app))return Promise.reject($i(r));const i="reauthenticate";try{const s=await el(t,_I(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=ng(s.idToken);se(o,r,"internal-error");const{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),lo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(t,e,n=!1){if(jt(t.app))return Promise.reject($i(t));const r="signIn",i=await _I(t,r,e),s=await lo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function aO(t,e,n,r){return Ke(t).onIdTokenChanged(e,n,r)}function lO(t,e,n){return Ke(t).beforeAuthStateChanged(e,n)}function uO(t,e,n,r){return Ke(t).onAuthStateChanged(e,n,r)}function cO(t){return Ke(t).signOut()}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=1e3,dO=10;class TI extends wI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$D()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TI.type="LOCAL";const fO=TI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI extends wI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}EI.type="SESSION";const SI=EI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new vh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await pO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=ag("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function gO(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function yO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _O(){return II()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="firebaseLocalStorageDb",wO=1,kc="firebaseLocalStorage",AI="fbase_key";class vl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _h(t,e){return t.transaction([kc],e?"readwrite":"readonly").objectStore(kc)}function TO(){const t=indexedDB.deleteDatabase(PI);return new vl(t).toPromise()}function pp(){const t=indexedDB.open(PI,wO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kc,{keyPath:AI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kc)?e(r):(r.close(),await TO(),e(await pp()))})})}async function q_(t,e,n){const r=_h(t,!0).put({[AI]:e,value:n});return new vl(r).toPromise()}async function EO(t,e){const n=_h(t,!1).get(e),r=await new vl(n).toPromise();return r===void 0?null:r.value}function K_(t,e){const n=_h(t,!0).delete(e);return new vl(n).toPromise()}const SO=800,IO=3;class RI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>IO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return II()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vh._getInstance(_O()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await yO(),!this.activeServiceWorker)return;this.sender=new mO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await q_(e,Cc,"1"),await K_(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>q_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>EO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>K_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=_h(i,!1).getAll();return new vl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RI.type="LOCAL";const PO=RI;new gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e){return e?Xn(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg extends mI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ys(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ys(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ys(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AO(t){return oO(t.auth,new lg(t),t.bypassAuthState)}function RO(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),sO(n,new lg(t),t.bypassAuthState)}async function CO(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),iO(n,new lg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AO;case"linkViaPopup":case"linkViaRedirect":return CO;case"reauthViaPopup":case"reauthViaRedirect":return RO;default:Un(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new gl(2e3,1e4);async function xO(t,e,n){if(jt(t.app))return Promise.reject(wn(t,"operation-not-supported-in-this-environment"));const r=gh(t);PD(t,e,sg);const i=CI(r,n);return new Mi(r,"signInViaPopup",e,i).executeNotNull()}class Mi extends kI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Mi.currentPopupAction&&Mi.currentPopupAction.cancel(),Mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kO.get())};e()}}Mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="pendingRedirect",Uu=new Map;class DO extends kI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uu.get(this.auth._key());if(!e){try{const r=await OO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uu.set(this.auth._key(),e)}return this.bypassAuthState||Uu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OO(t,e){const n=MO(e),r=VO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function NO(t,e){Uu.set(t._key(),e)}function VO(t){return Xn(t._redirectPersistence)}function MO(t){return Mu(bO,t.config.apiKey,t.name)}async function LO(t,e,n=!1){if(jt(t.app))return Promise.reject($i(t));const r=gh(t),i=CI(r,e),o=await new DO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=10*60*1e3;class FO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xI(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UO&&this.cachedEventUids.clear(),this.cachedEventUids.has(G_(e))}saveEventToCache(e){this.cachedEventUids.add(G_(e)),this.lastProcessedEventTime=Date.now()}}function G_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function jO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(t,e={}){return ko(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zO=/^https?/;async function HO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BO(t);for(const n of e)try{if(WO(n))return}catch{}Un(t,"unauthorized-domain")}function WO(t){const e=cp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!zO.test(n))return!1;if($O.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=new gl(3e4,6e4);function Q_(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KO(t){return new Promise((e,n)=>{var r,i,s;function o(){Q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q_(),n(wn(t,"network-request-failed"))},timeout:qO.get()})}if(!((i=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=On().gapi)===null||s===void 0)&&s.load)o();else{const a=XD("iframefcb");return On()[a]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},QD(`${YD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fu=null,e})}let Fu=null;function GO(t){return Fu=Fu||KO(t),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=new gl(5e3,15e3),YO="__/auth/iframe",XO="emulator/auth/iframe",JO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?eg(e,XO):`https://${t.config.authDomain}/${YO}`,r={apiKey:e.apiKey,appName:t.name,v:gr},i=ZO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${fi(r).slice(1)}`}async function tN(t){const e=await GO(t),n=On().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:eN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),a=On().setTimeout(()=>{s(o)},QO.get());function l(){On().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rN=500,iN=600,sN="_blank",oN="http://localhost";class Y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aN(t,e,n,r=rN,i=iN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},nN),{width:r.toString(),height:i.toString(),top:s,left:o}),c=xe().toLowerCase();n&&(a=aI(c)?sN:n),sI(c)&&(e=e||oN,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[T,C])=>`${p}${T}=${C},`,"");if(BD(c)&&a!=="_self")return lN(e||"",a),new Y_(null);const f=window.open(e||"",a,h);se(f,t,"popup-blocked");try{f.focus()}catch{}return new Y_(f)}function lN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="__/auth/handler",cN="emulator/auth/handler",hN=encodeURIComponent("fac");async function X_(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gr,eventId:i};if(e instanceof sg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof yl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${hN}=${encodeURIComponent(l)}`:"";return`${dN(t)}?${fi(a).slice(1)}${c}`}function dN({config:t}){return t.emulator?eg(t,cN):`https://${t.authDomain}/${uN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="webStorageSupport";class fN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SI,this._completeRedirectFn=LO,this._overrideRedirectResult=NO}async _openPopup(e,n,r,i){var s;dr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await X_(e,n,r,cp(),i);return aN(e,o,ag())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await X_(e,n,r,cp(),i);return gO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(dr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tN(e),r=new FO(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($d,{type:$d},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$d];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dI()||oI()||rg()}}const pN=fN;var J_="@firebase/auth",Z_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mN=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yN(t){ei(new cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fI(t)},c=new KD(r,i,s,l);return ZD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new cr("auth-internal",e=>{const n=gh(e.getProvider("auth").getImmediate());return(r=>new mN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(J_,Z_,gN(t)),Dn(J_,Z_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=5*60,_N=FS("authIdTokenMaxAge")||vN;let e0=null;const wN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_N)return;const i=n==null?void 0:n.token;e0!==i&&(e0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function TN(t=GS()){const e=Xm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JD(t,{popupRedirectResolver:pN,persistence:[PO,fO,SI]}),r=FS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=wN(s.toString());lO(n,o,()=>o(n.currentUser)),aO(n,a=>o(a))}}const i=LS("auth");return i&&eO(n,`http://${i}`),n}function EN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=wn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",EN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yN("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function SN(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,[])).next())})}function IN(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Us=function(){return Us=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Us.apply(this,arguments)},bI=function(t){return{loading:t==null,value:t}},PN=function(){return function(t,e){switch(e.type){case"error":return Us(Us({},t),{error:e.error,loading:!1,value:void 0});case"reset":return bI(e.defaultValue);case"value":return Us(Us({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},AN=function(t){var e=t?t():void 0,n=F.useReducer(PN(),bI(e)),r=n[0],i=n[1],s=F.useCallback(function(){var l=t?t():void 0;i({type:"reset",defaultValue:l})},[t]),o=F.useCallback(function(l){i({type:"error",error:l})},[]),a=F.useCallback(function(l){i({type:"value",value:l})},[]);return F.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:a,value:r.value}},[r.error,r.loading,s,o,a,r.value])},xo=function(t,e){var n=AN(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,a=n.value;return F.useEffect(function(){var l=uO(t,function(c){return SN(void 0,void 0,void 0,function(){var h;return IN(this,function(f){switch(f.label){case 0:return[3,4];case 1:return f.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return f.sent(),[3,4];case 3:return h=f.sent(),s(h),[3,4];case 4:return o(c),[2]}})})},s);return function(){l()}},[t]),[a,i,r]},RN="firebase",CN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn(RN,CN,"app");function DI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kN=DI,OI=new di("auth","Firebase",DI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new mh("@firebase/auth");function xN(t,...e){xc.logLevel<=he.WARN&&xc.warn(`Auth (${gr}): ${t}`,...e)}function ju(t,...e){xc.logLevel<=he.ERROR&&xc.error(`Auth (${gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t,...e){throw ug(t,...e)}function NI(t,...e){return ug(t,...e)}function VI(t,e,n){const r=Object.assign(Object.assign({},kN()),{[e]:n});return new di("auth","Firebase",r).create(e,{appName:t.name})}function Bu(t){return VI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ug(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OI.create(t,...e)}function we(t,e,...n){if(!t)throw ug(e,...n)}function Jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ju(e),new Error(e)}function Dc(t,e){t||Jn(e)}function bN(){return t0()==="http:"||t0()==="https:"}function t0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bN()||$S()||"connection"in navigator)?navigator.onLine:!0}function ON(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.shortDelay=e,this.longDelay=n,Dc(n>e,"Short delay should be less than long delay!"),this.isMobile=jS()||zS()}get(){return DN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(t,e){Dc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new NN(3e4,6e4);function cg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _l(t,e,n,r,i={}){return LI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=fi(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return BS()||(c.referrerPolicy="no-referrer"),MI.fetch()(UI(t,t.config.apiHost,n,a),c)})}async function LI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MN),e);try{const i=new FN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw mu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw mu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw mu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw VI(t,h,c);bc(t,h)}}catch(i){if(i instanceof Pn)throw i;bc(t,"network-request-failed",{message:String(i)})}}async function UN(t,e,n,r,i={}){const s=await _l(t,e,n,r,i);return"mfaPendingCredential"in s&&bc(t,"multi-factor-auth-required",{_serverResponse:s}),s}function UI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?VN(t.config,i):`${t.config.apiScheme}://${i}`}class FN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(NI(this.auth,"network-request-failed")),LN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=NI(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e){return _l(t,"POST","/v1/accounts:delete",e)}async function FI(t,e){return _l(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BN(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),i=jI(r);we(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Aa(zd(i.auth_time)),issuedAtTime:Aa(zd(i.iat)),expirationTime:Aa(zd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zd(t){return Number(t)*1e3}function jI(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ju("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qm(n);return i?JSON.parse(i):(ju("Failed to decode base64 JWT payload"),null)}catch(i){return ju("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function n0(t){const e=jI(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mp(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pn&&$N(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $N({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await mp(t,FI(n,{idToken:r}));we(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?BI(s.providerUserInfo):[],a=WN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function HN(t){const e=Ke(t);await Oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BI(t){return t.map(e=>{var{providerId:n}=e,r=Co(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e){const n=await LI(t,{},async()=>{const r=fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=UI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",MI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KN(t,e){return _l(t,"POST","/v2/accounts:revokeToken",cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=n0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await qN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xs;return r&&(we(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(we(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(we(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ur{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Co(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await mp(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BN(this,e)}reload(){return HN(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Oc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(Bu(this.auth));const e=await this.getIdToken();return await mp(this,jN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,k=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:b,isAnonymous:L,providerData:N,stsTokenManager:P}=n;we(E&&P,e,"internal-error");const g=Xs.fromJSON(this.name,P);we(typeof E=="string",e,"internal-error"),Ar(f,e.name),Ar(p,e.name),we(typeof b=="boolean",e,"internal-error"),we(typeof L=="boolean",e,"internal-error"),Ar(T,e.name),Ar(C,e.name),Ar(x,e.name),Ar(k,e.name),Ar(_,e.name),Ar(v,e.name);const y=new Ur({uid:E,auth:e,email:p,emailVerified:b,displayName:f,isAnonymous:L,photoURL:C,phoneNumber:T,tenantId:x,stsTokenManager:g,createdAt:_,lastLoginAt:v});return N&&Array.isArray(N)&&(y.providerData=N.map(w=>Object.assign({},w))),k&&(y._redirectEventId=k),y}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xs;i.updateFromServerResponse(n);const s=new Ur({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Oc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];we(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?BI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Xs;a.updateFromIdToken(r);const l=new Ur({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;function Li(t){Dc(t instanceof Function,"Expected a class definition");let e=r0.get(t);return e?(Dc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,r0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$I.type="NONE";const i0=$I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t,e,n){return`firebase:${t}:${e}:${n}`}class Js{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Hd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ur._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Js(Li(i0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Li(i0);const o=Hd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Ur._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Js(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Js(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZN(e))return"Blackberry";if(eV(e))return"Webos";if(QN(e))return"Safari";if((e.includes("chrome/")||YN(e))&&!e.includes("edge/"))return"Chrome";if(JN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GN(t=xe()){return/firefox\//i.test(t)}function QN(t=xe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YN(t=xe()){return/crios\//i.test(t)}function XN(t=xe()){return/iemobile/i.test(t)}function JN(t=xe()){return/android/i.test(t)}function ZN(t=xe()){return/blackberry/i.test(t)}function eV(t=xe()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e=[]){let n;switch(t){case"Browser":n=s0(xe());break;case"Worker":n=`${s0(xe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(t,e={}){return _l(t,"GET","/v2/passwordPolicy",cg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=6;class iV{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o0(this),this.idTokenSubscription=new o0(this),this.beforeStateQueue=new tV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Li(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Js.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await FI(this,{idToken:e}),r=await Ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ON()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(Bu(this));const n=e?Ke(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject(Bu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(Bu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nV(this),n=new iV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new di("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Li(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await Js.create(this,[Li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oV(t){return Ke(t)}class o0{constructor(e){this.auth=e,this.observer=null,this.addObserver=HS(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function aV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jn("not implemented")}_getIdTokenResponse(e){return Jn("not implemented")}_linkToIdToken(e,n){return Jn("not implemented")}_getReauthenticationResolver(e){return Jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(t,e){return UN(t,"POST","/v1/accounts:signInWithIdp",cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV="http://localhost";class Ji extends lV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Co(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ji(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Wd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wd(e,n)}buildRequest(){const e={requestUri:uV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends cV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends wh{constructor(){super("facebook.com")}static credential(e){return Ji._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends wh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ji._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qn.credential(n,r)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends wh{constructor(){super("github.com")}static credential(e){return Ji._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends wh{constructor(){super("twitter.com")}static credential(e,n){return Ji._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";var a0="@firebase/auth",l0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fV(t){ei(new cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zI(t)},c=new sV(r,i,s,l);return aV(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ei(new cr("auth-internal",e=>{const n=oV(e.getProvider("auth").getImmediate());return(r=>new hV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(a0,l0,dV(t)),Dn(a0,l0,"esm2017")}fV("WebExtension");var u0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,HI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,g){function y(){}y.prototype=g.prototype,P.D=g.prototype,P.prototype=new y,P.prototype.constructor=P,P.C=function(w,R,A){for(var S=Array(arguments.length-2),X=2;X<arguments.length;X++)S[X-2]=arguments[X];return g.prototype[R].apply(w,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,g,y){y||(y=0);var w=Array(16);if(typeof g=="string")for(var R=0;16>R;++R)w[R]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(R=0;16>R;++R)w[R]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=P.g[0],y=P.g[1],R=P.g[2];var A=P.g[3],S=g+(A^y&(R^A))+w[0]+3614090360&4294967295;g=y+(S<<7&4294967295|S>>>25),S=A+(R^g&(y^R))+w[1]+3905402710&4294967295,A=g+(S<<12&4294967295|S>>>20),S=R+(y^A&(g^y))+w[2]+606105819&4294967295,R=A+(S<<17&4294967295|S>>>15),S=y+(g^R&(A^g))+w[3]+3250441966&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(A^y&(R^A))+w[4]+4118548399&4294967295,g=y+(S<<7&4294967295|S>>>25),S=A+(R^g&(y^R))+w[5]+1200080426&4294967295,A=g+(S<<12&4294967295|S>>>20),S=R+(y^A&(g^y))+w[6]+2821735955&4294967295,R=A+(S<<17&4294967295|S>>>15),S=y+(g^R&(A^g))+w[7]+4249261313&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(A^y&(R^A))+w[8]+1770035416&4294967295,g=y+(S<<7&4294967295|S>>>25),S=A+(R^g&(y^R))+w[9]+2336552879&4294967295,A=g+(S<<12&4294967295|S>>>20),S=R+(y^A&(g^y))+w[10]+4294925233&4294967295,R=A+(S<<17&4294967295|S>>>15),S=y+(g^R&(A^g))+w[11]+2304563134&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(A^y&(R^A))+w[12]+1804603682&4294967295,g=y+(S<<7&4294967295|S>>>25),S=A+(R^g&(y^R))+w[13]+4254626195&4294967295,A=g+(S<<12&4294967295|S>>>20),S=R+(y^A&(g^y))+w[14]+2792965006&4294967295,R=A+(S<<17&4294967295|S>>>15),S=y+(g^R&(A^g))+w[15]+1236535329&4294967295,y=R+(S<<22&4294967295|S>>>10),S=g+(R^A&(y^R))+w[1]+4129170786&4294967295,g=y+(S<<5&4294967295|S>>>27),S=A+(y^R&(g^y))+w[6]+3225465664&4294967295,A=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(A^g))+w[11]+643717713&4294967295,R=A+(S<<14&4294967295|S>>>18),S=y+(A^g&(R^A))+w[0]+3921069994&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(R^A&(y^R))+w[5]+3593408605&4294967295,g=y+(S<<5&4294967295|S>>>27),S=A+(y^R&(g^y))+w[10]+38016083&4294967295,A=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(A^g))+w[15]+3634488961&4294967295,R=A+(S<<14&4294967295|S>>>18),S=y+(A^g&(R^A))+w[4]+3889429448&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(R^A&(y^R))+w[9]+568446438&4294967295,g=y+(S<<5&4294967295|S>>>27),S=A+(y^R&(g^y))+w[14]+3275163606&4294967295,A=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(A^g))+w[3]+4107603335&4294967295,R=A+(S<<14&4294967295|S>>>18),S=y+(A^g&(R^A))+w[8]+1163531501&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(R^A&(y^R))+w[13]+2850285829&4294967295,g=y+(S<<5&4294967295|S>>>27),S=A+(y^R&(g^y))+w[2]+4243563512&4294967295,A=g+(S<<9&4294967295|S>>>23),S=R+(g^y&(A^g))+w[7]+1735328473&4294967295,R=A+(S<<14&4294967295|S>>>18),S=y+(A^g&(R^A))+w[12]+2368359562&4294967295,y=R+(S<<20&4294967295|S>>>12),S=g+(y^R^A)+w[5]+4294588738&4294967295,g=y+(S<<4&4294967295|S>>>28),S=A+(g^y^R)+w[8]+2272392833&4294967295,A=g+(S<<11&4294967295|S>>>21),S=R+(A^g^y)+w[11]+1839030562&4294967295,R=A+(S<<16&4294967295|S>>>16),S=y+(R^A^g)+w[14]+4259657740&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(y^R^A)+w[1]+2763975236&4294967295,g=y+(S<<4&4294967295|S>>>28),S=A+(g^y^R)+w[4]+1272893353&4294967295,A=g+(S<<11&4294967295|S>>>21),S=R+(A^g^y)+w[7]+4139469664&4294967295,R=A+(S<<16&4294967295|S>>>16),S=y+(R^A^g)+w[10]+3200236656&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(y^R^A)+w[13]+681279174&4294967295,g=y+(S<<4&4294967295|S>>>28),S=A+(g^y^R)+w[0]+3936430074&4294967295,A=g+(S<<11&4294967295|S>>>21),S=R+(A^g^y)+w[3]+3572445317&4294967295,R=A+(S<<16&4294967295|S>>>16),S=y+(R^A^g)+w[6]+76029189&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(y^R^A)+w[9]+3654602809&4294967295,g=y+(S<<4&4294967295|S>>>28),S=A+(g^y^R)+w[12]+3873151461&4294967295,A=g+(S<<11&4294967295|S>>>21),S=R+(A^g^y)+w[15]+530742520&4294967295,R=A+(S<<16&4294967295|S>>>16),S=y+(R^A^g)+w[2]+3299628645&4294967295,y=R+(S<<23&4294967295|S>>>9),S=g+(R^(y|~A))+w[0]+4096336452&4294967295,g=y+(S<<6&4294967295|S>>>26),S=A+(y^(g|~R))+w[7]+1126891415&4294967295,A=g+(S<<10&4294967295|S>>>22),S=R+(g^(A|~y))+w[14]+2878612391&4294967295,R=A+(S<<15&4294967295|S>>>17),S=y+(A^(R|~g))+w[5]+4237533241&4294967295,y=R+(S<<21&4294967295|S>>>11),S=g+(R^(y|~A))+w[12]+1700485571&4294967295,g=y+(S<<6&4294967295|S>>>26),S=A+(y^(g|~R))+w[3]+2399980690&4294967295,A=g+(S<<10&4294967295|S>>>22),S=R+(g^(A|~y))+w[10]+4293915773&4294967295,R=A+(S<<15&4294967295|S>>>17),S=y+(A^(R|~g))+w[1]+2240044497&4294967295,y=R+(S<<21&4294967295|S>>>11),S=g+(R^(y|~A))+w[8]+1873313359&4294967295,g=y+(S<<6&4294967295|S>>>26),S=A+(y^(g|~R))+w[15]+4264355552&4294967295,A=g+(S<<10&4294967295|S>>>22),S=R+(g^(A|~y))+w[6]+2734768916&4294967295,R=A+(S<<15&4294967295|S>>>17),S=y+(A^(R|~g))+w[13]+1309151649&4294967295,y=R+(S<<21&4294967295|S>>>11),S=g+(R^(y|~A))+w[4]+4149444226&4294967295,g=y+(S<<6&4294967295|S>>>26),S=A+(y^(g|~R))+w[11]+3174756917&4294967295,A=g+(S<<10&4294967295|S>>>22),S=R+(g^(A|~y))+w[2]+718787259&4294967295,R=A+(S<<15&4294967295|S>>>17),S=y+(A^(R|~g))+w[9]+3951481745&4294967295,P.g[0]=P.g[0]+g&4294967295,P.g[1]=P.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,P.g[2]=P.g[2]+R&4294967295,P.g[3]=P.g[3]+A&4294967295}r.prototype.u=function(P,g){g===void 0&&(g=P.length);for(var y=g-this.blockSize,w=this.B,R=this.h,A=0;A<g;){if(R==0)for(;A<=y;)i(this,P,A),A+=this.blockSize;if(typeof P=="string"){for(;A<g;)if(w[R++]=P.charCodeAt(A++),R==this.blockSize){i(this,w),R=0;break}}else for(;A<g;)if(w[R++]=P[A++],R==this.blockSize){i(this,w),R=0;break}}this.h=R,this.o+=g},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var g=1;g<P.length-8;++g)P[g]=0;var y=8*this.o;for(g=P.length-8;g<P.length;++g)P[g]=y&255,y/=256;for(this.u(P),P=Array(16),g=y=0;4>g;++g)for(var w=0;32>w;w+=8)P[y++]=this.g[g]>>>w&255;return P};function s(P,g){var y=a;return Object.prototype.hasOwnProperty.call(y,P)?y[P]:y[P]=g(P)}function o(P,g){this.h=g;for(var y=[],w=!0,R=P.length-1;0<=R;R--){var A=P[R]|0;w&&A==g||(y[R]=A,w=!1)}this.g=y}var a={};function l(P){return-128<=P&&128>P?s(P,function(g){return new o([g|0],0>g?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return k(c(-P));for(var g=[],y=1,w=0;P>=y;w++)g[w]=P/y|0,y*=4294967296;return new o(g,0)}function h(P,g){if(P.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(P.charAt(0)=="-")return k(h(P.substring(1),g));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(g,8)),w=f,R=0;R<P.length;R+=8){var A=Math.min(8,P.length-R),S=parseInt(P.substring(R,R+A),g);8>A?(A=c(Math.pow(g,A)),w=w.j(A).add(c(S))):(w=w.j(y),w=w.add(c(S)))}return w}var f=l(0),p=l(1),T=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-k(this).m();for(var P=0,g=1,y=0;y<this.g.length;y++){var w=this.i(y);P+=(0<=w?w:4294967296+w)*g,g*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(C(this))return"0";if(x(this))return"-"+k(this).toString(P);for(var g=c(Math.pow(P,6)),y=this,w="";;){var R=b(y,g).g;y=_(y,R.j(g));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(P);if(y=R,C(y))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function C(P){if(P.h!=0)return!1;for(var g=0;g<P.g.length;g++)if(P.g[g]!=0)return!1;return!0}function x(P){return P.h==-1}t.l=function(P){return P=_(this,P),x(P)?-1:C(P)?0:1};function k(P){for(var g=P.g.length,y=[],w=0;w<g;w++)y[w]=~P.g[w];return new o(y,~P.h).add(p)}t.abs=function(){return x(this)?k(this):this},t.add=function(P){for(var g=Math.max(this.g.length,P.g.length),y=[],w=0,R=0;R<=g;R++){var A=w+(this.i(R)&65535)+(P.i(R)&65535),S=(A>>>16)+(this.i(R)>>>16)+(P.i(R)>>>16);w=S>>>16,A&=65535,S&=65535,y[R]=S<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function _(P,g){return P.add(k(g))}t.j=function(P){if(C(this)||C(P))return f;if(x(this))return x(P)?k(this).j(k(P)):k(k(this).j(P));if(x(P))return k(this.j(k(P)));if(0>this.l(T)&&0>P.l(T))return c(this.m()*P.m());for(var g=this.g.length+P.g.length,y=[],w=0;w<2*g;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var R=0;R<P.g.length;R++){var A=this.i(w)>>>16,S=this.i(w)&65535,X=P.i(R)>>>16,ae=P.i(R)&65535;y[2*w+2*R]+=S*ae,v(y,2*w+2*R),y[2*w+2*R+1]+=A*ae,v(y,2*w+2*R+1),y[2*w+2*R+1]+=S*X,v(y,2*w+2*R+1),y[2*w+2*R+2]+=A*X,v(y,2*w+2*R+2)}for(w=0;w<g;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=g;w<2*g;w++)y[w]=0;return new o(y,0)};function v(P,g){for(;(P[g]&65535)!=P[g];)P[g+1]+=P[g]>>>16,P[g]&=65535,g++}function E(P,g){this.g=P,this.h=g}function b(P,g){if(C(g))throw Error("division by zero");if(C(P))return new E(f,f);if(x(P))return g=b(k(P),g),new E(k(g.g),k(g.h));if(x(g))return g=b(P,k(g)),new E(k(g.g),g.h);if(30<P.g.length){if(x(P)||x(g))throw Error("slowDivide_ only works with positive integers.");for(var y=p,w=g;0>=w.l(P);)y=L(y),w=L(w);var R=N(y,1),A=N(w,1);for(w=N(w,2),y=N(y,2);!C(w);){var S=A.add(w);0>=S.l(P)&&(R=R.add(y),A=S),w=N(w,1),y=N(y,1)}return g=_(P,R.j(g)),new E(R,g)}for(R=f;0<=P.l(g);){for(y=Math.max(1,Math.floor(P.m()/g.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=c(y),S=A.j(g);x(S)||0<S.l(P);)y-=w,A=c(y),S=A.j(g);C(A)&&(A=p),R=R.add(A),P=_(P,S)}return new E(R,P)}t.A=function(P){return b(this,P).h},t.and=function(P){for(var g=Math.max(this.g.length,P.g.length),y=[],w=0;w<g;w++)y[w]=this.i(w)&P.i(w);return new o(y,this.h&P.h)},t.or=function(P){for(var g=Math.max(this.g.length,P.g.length),y=[],w=0;w<g;w++)y[w]=this.i(w)|P.i(w);return new o(y,this.h|P.h)},t.xor=function(P){for(var g=Math.max(this.g.length,P.g.length),y=[],w=0;w<g;w++)y[w]=this.i(w)^P.i(w);return new o(y,this.h^P.h)};function L(P){for(var g=P.g.length+1,y=[],w=0;w<g;w++)y[w]=P.i(w)<<1|P.i(w-1)>>>31;return new o(y,P.h)}function N(P,g){var y=g>>5;g%=32;for(var w=P.g.length-y,R=[],A=0;A<w;A++)R[A]=0<g?P.i(A+y)>>>g|P.i(A+y+1)<<32-g:P.i(A+y);return new o(R,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,zi=o}).apply(typeof u0<"u"?u0:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WI,ca,qI,$u,yp,KI,GI,QI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var m=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in m))break e;m=m[j]}u=u[u.length-1],I=m[u],d=d(I),d!=I&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var m=0,I=!1,j={next:function(){if(!I&&m<u.length){var z=m++;return{value:d(z,u[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,I),u.apply(d,j)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function T(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function C(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(I,j,z){for(var Q=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)Q[Ie-2]=arguments[Ie];return d.prototype[j].apply(I,Q)}}function x(u){const d=u.length;if(0<d){const m=Array(d);for(let I=0;I<d;I++)m[I]=u[I];return m}return[]}function k(u,d){for(let m=1;m<arguments.length;m++){const I=arguments[m];if(l(I)){const j=u.length||0,z=I.length||0;u.length=j+z;for(let Q=0;Q<z;Q++)u[j+Q]=I[Q]}else u.push(I)}}class _{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function v(u){return/^[\s\xa0]*$/.test(u)}function E(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var L=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function N(u,d,m){for(const I in u)d.call(m,u[I],I,u)}function P(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function g(u){const d={};for(const m in u)d[m]=u[m];return d}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(u,d){let m,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(m in I)u[m]=I[m];for(let z=0;z<y.length;z++)m=y[z],Object.prototype.hasOwnProperty.call(I,m)&&(u[m]=I[m])}}function R(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function A(u){a.setTimeout(()=>{throw u},0)}function S(){var u=O;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class X{constructor(){this.h=this.g=null}add(d,m){const I=ae.get();I.set(d,m),this.h?this.h.next=I:this.g=I,this.h=I}}var ae=new _(()=>new ce,u=>u.reset());class ce{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let te,V=!1,O=new X,U=()=>{const u=a.Promise.resolve(void 0);te=()=>{u.then($)}};var $=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(m){A(m)}var d=ae;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}V=!1};function D(){this.s=this.s,this.C=this.C}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function q(u,d){if(B.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(L){e:{try{b(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Y[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&q.aa.h.call(this)}}C(q,B);var Y={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),ye=0;function De(u,d,m,I,j){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!I,this.ha=j,this.key=++ye,this.da=this.fa=!1}function Oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function $e(u){this.src=u,this.g={},this.h=0}$e.prototype.add=function(u,d,m,I,j){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var Q=vt(u,d,I,j);return-1<Q?(d=u[Q],m||(d.fa=!1)):(d=new De(d,this.src,z,!!I,j),d.fa=m,u.push(d)),d};function yt(u,d){var m=d.type;if(m in u.g){var I=u.g[m],j=Array.prototype.indexOf.call(I,d,void 0),z;(z=0<=j)&&Array.prototype.splice.call(I,j,1),z&&(Oe(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function vt(u,d,m,I){for(var j=0;j<u.length;++j){var z=u[j];if(!z.da&&z.listener==d&&z.capture==!!m&&z.ha==I)return j}return-1}var hn="closure_lm_"+(1e6*Math.random()|0),nt={};function jn(u,d,m,I,j){if(Array.isArray(d)){for(var z=0;z<d.length;z++)jn(u,d[z],m,I,j);return null}return m=Bn(m),u&&u[ie]?u.K(d,m,c(I)?!!I.capture:!!I,j):yr(u,d,m,!1,I,j)}function yr(u,d,m,I,j,z){if(!d)throw Error("Invalid event type");var Q=c(j)?!!j.capture:!!j,Ie=vr(u);if(Ie||(u[hn]=Ie=new $e(u)),m=Ie.add(d,m,I,Q,z),m.proxy)return m;if(I=dn(),m.proxy=I,I.src=u,I.listener=m,u.addEventListener)H||(j=Q),j===void 0&&(j=!1),u.addEventListener(d.toString(),I,j);else if(u.attachEvent)u.attachEvent(Mo(d.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function dn(){function u(m){return d.call(u.src,u.listener,m)}const d=Ol;return u}function Dl(u,d,m,I,j){if(Array.isArray(d))for(var z=0;z<d.length;z++)Dl(u,d[z],m,I,j);else I=c(I)?!!I.capture:!!I,m=Bn(m),u&&u[ie]?(u=u.i,d=String(d).toString(),d in u.g&&(z=u.g[d],m=vt(z,m,I,j),-1<m&&(Oe(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete u.g[d],u.h--)))):u&&(u=vr(u))&&(d=u.g[d.toString()],u=-1,d&&(u=vt(d,m,I,j)),(m=-1<u?d[u]:null)&&ls(m))}function ls(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[ie])yt(d.i,u);else{var m=u.type,I=u.proxy;d.removeEventListener?d.removeEventListener(m,I,u.capture):d.detachEvent?d.detachEvent(Mo(m),I):d.addListener&&d.removeListener&&d.removeListener(I),(m=vr(d))?(yt(m,u),m.h==0&&(m.src=null,d[hn]=null)):Oe(u)}}}function Mo(u){return u in nt?nt[u]:nt[u]="on"+u}function Ol(u,d){if(u.da)u=!0;else{d=new q(d,this);var m=u.listener,I=u.ha||u.src;u.fa&&ls(u),u=m.call(I,d)}return u}function vr(u){return u=u[hn],u instanceof $e?u:null}var _r="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bn(u){return typeof u=="function"?u:(u[_r]||(u[_r]=function(d){return u.handleEvent(d)}),u[_r])}function Xe(){D.call(this),this.i=new $e(this),this.M=this,this.F=null}C(Xe,D),Xe.prototype[ie]=!0,Xe.prototype.removeEventListener=function(u,d,m,I){Dl(this,u,d,m,I)};function rt(u,d){var m,I=u.F;if(I)for(m=[];I;I=I.F)m.push(I);if(u=u.M,I=d.type||d,typeof d=="string")d=new B(d,u);else if(d instanceof B)d.target=d.target||u;else{var j=d;d=new B(I,u),w(d,j)}if(j=!0,m)for(var z=m.length-1;0<=z;z--){var Q=d.g=m[z];j=us(Q,I,!0,d)&&j}if(Q=d.g=u,j=us(Q,I,!0,d)&&j,j=us(Q,I,!1,d)&&j,m)for(z=0;z<m.length;z++)Q=d.g=m[z],j=us(Q,I,!1,d)&&j}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],I=0;I<m.length;I++)Oe(m[I]);delete u.g[d],u.h--}}this.F=null},Xe.prototype.K=function(u,d,m,I){return this.i.add(String(u),d,!1,m,I)},Xe.prototype.L=function(u,d,m,I){return this.i.add(String(u),d,!0,m,I)};function us(u,d,m,I){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,z=0;z<d.length;++z){var Q=d[z];if(Q&&!Q.da&&Q.capture==m){var Ie=Q.listener,lt=Q.ha||Q.src;Q.fa&&yt(u.i,Q),j=Ie.call(lt,I)!==!1&&j}}return j&&!I.defaultPrevented}function vi(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Nl(u){u.g=vi(()=>{u.g=null,u.i&&(u.i=!1,Nl(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class Kh extends D{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Nl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(u){D.call(this),this.h=u,this.g={}}C(_i,D);var cs=[];function Fe(u){N(u.g,function(d,m){this.g.hasOwnProperty(m)&&ls(d)},u),u.g={}}_i.prototype.N=function(){_i.aa.N.call(this),Fe(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ht=a.JSON.stringify,wi=a.JSON.parse,Vl=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ti(){}Ti.prototype.h=null;function hs(u){return u.h||(u.h=u.i())}function ds(){}var wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fs(){B.call(this,"d")}C(fs,B);function Ei(){B.call(this,"c")}C(Ei,B);var Si={},Ty=null;function Ml(){return Ty=Ty||new Xe}Si.La="serverreachability";function Ey(u){B.call(this,Si.La,u)}C(Ey,B);function Lo(u){const d=Ml();rt(d,new Ey(d))}Si.STAT_EVENT="statevent";function Sy(u,d){B.call(this,Si.STAT_EVENT,u),this.stat=d}C(Sy,B);function bt(u){const d=Ml();rt(d,new Sy(d,u))}Si.Ma="timingevent";function Iy(u,d){B.call(this,Si.Ma,u),this.size=d}C(Iy,B);function Uo(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Fo(){this.g=!0}Fo.prototype.xa=function(){this.g=!1};function eR(u,d,m,I,j,z){u.info(function(){if(u.g)if(z)for(var Q="",Ie=z.split("&"),lt=0;lt<Ie.length;lt++){var ve=Ie[lt].split("=");if(1<ve.length){var _t=ve[0];ve=ve[1];var wt=_t.split("_");Q=2<=wt.length&&wt[1]=="type"?Q+(_t+"="+ve+"&"):Q+(_t+"=redacted&")}}else Q=null;else Q=z;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+d+`
`+m+`
`+Q})}function tR(u,d,m,I,j,z,Q){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+d+`
`+m+`
`+z+" "+Q})}function ps(u,d,m,I){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+rR(u,m)+(I?" "+I:"")})}function nR(u,d){u.info(function(){return"TIMEOUT: "+d})}Fo.prototype.info=function(){};function rR(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var I=m[u];if(!(2>I.length)){var j=I[1];if(Array.isArray(j)&&!(1>j.length)){var z=j[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Q=1;Q<j.length;Q++)j[Q]=""}}}}return Ht(m)}catch{return d}}var Ll={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Py={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gh;function Ul(){}C(Ul,Ti),Ul.prototype.g=function(){return new XMLHttpRequest},Ul.prototype.i=function(){return{}},Gh=new Ul;function Tr(u,d,m,I){this.j=u,this.i=d,this.l=m,this.R=I||1,this.U=new _i(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ay}function Ay(){this.i=null,this.g="",this.h=!1}var Ry={},Qh={};function Yh(u,d,m){u.L=1,u.v=$l($n(d)),u.m=m,u.P=!0,Cy(u,null)}function Cy(u,d){u.F=Date.now(),Fl(u),u.A=$n(u.v);var m=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),$y(m.i,"t",I),u.C=0,m=u.j.J,u.h=new Ay,u.g=ov(u.j,m?d:null,!u.m),0<u.O&&(u.M=new Kh(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,I=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(cs[0]=j.toString()),j=cs);for(var z=0;z<j.length;z++){var Q=jn(m,j[z],I||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=u.H?g(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Lo(),eR(u.i,u.u,u.A,u.l,u.R,u.m)}Tr.prototype.ca=function(u){u=u.target;const d=this.M;d&&zn(u)==3?d.j():this.Y(u)},Tr.prototype.Y=function(u){try{if(u==this.g)e:{const wt=zn(this.g);var d=this.g.Ba();const ys=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||Qy(this.g)))){this.J||wt!=4||d==7||(d==8||0>=ys?Lo(3):Lo(2)),Xh(this);var m=this.g.Z();this.X=m;t:if(ky(this)){var I=Qy(this.g);u="";var j=I.length,z=zn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),jo(this);var Q="";break t}this.h.i=new a.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,u+=this.h.i.decode(I[d],{stream:!(z&&d==j-1)});I.length=0,this.h.g+=u,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=m==200,tR(this.i,this.u,this.A,this.l,this.R,wt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,lt=this.g;if((Ie=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ie)){var ve=Ie;break t}}ve=null}if(m=ve)ps(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jh(this,m);else{this.o=!1,this.s=3,bt(12),Ii(this),jo(this);break e}}if(this.P){m=!0;let fn;for(;!this.J&&this.C<Q.length;)if(fn=iR(this,Q),fn==Qh){wt==4&&(this.s=4,bt(14),m=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==Ry){this.s=4,bt(15),ps(this.i,this.l,Q,"[Invalid Chunk]"),m=!1;break}else ps(this.i,this.l,fn,null),Jh(this,fn);if(ky(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||Q.length!=0||this.h.h||(this.s=1,bt(16),m=!1),this.o=this.o&&m,!m)ps(this.i,this.l,Q,"[Invalid Chunked Response]"),Ii(this),jo(this);else if(0<Q.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),id(_t),_t.M=!0,bt(11))}}else ps(this.i,this.l,Q,null),Jh(this,Q);wt==4&&Ii(this),this.o&&!this.J&&(wt==4?nv(this.j,this):(this.o=!1,Fl(this)))}else TR(this.g),m==400&&0<Q.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Ii(this),jo(this)}}}catch{}finally{}};function ky(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function iR(u,d){var m=u.C,I=d.indexOf(`
`,m);return I==-1?Qh:(m=Number(d.substring(m,I)),isNaN(m)?Ry:(I+=1,I+m>d.length?Qh:(d=d.slice(I,I+m),u.C=I+m,d)))}Tr.prototype.cancel=function(){this.J=!0,Ii(this)};function Fl(u){u.S=Date.now()+u.I,xy(u,u.I)}function xy(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Uo(p(u.ba,u),d)}function Xh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Tr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(nR(this.i,this.A),this.L!=2&&(Lo(),bt(17)),Ii(this),this.s=2,jo(this)):xy(this,this.S-u)};function jo(u){u.j.G==0||u.J||nv(u.j,u)}function Ii(u){Xh(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Fe(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Jh(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||Zh(m.h,u))){if(!u.K&&Zh(m.h,u)&&m.G==3){try{var I=m.Da.g.parse(d)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Gl(m),ql(m);else break e;rd(m),bt(18)}}else m.za=j[1],0<m.za-m.T&&37500>j[2]&&m.F&&m.v==0&&!m.C&&(m.C=Uo(p(m.Za,m),6e3));if(1>=Oy(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ai(m,11)}else if((u.K||m.g==u)&&Gl(m),!v(d))for(j=m.Da.g.parse(d),d=0;d<j.length;d++){let ve=j[d];if(m.T=ve[0],ve=ve[1],m.G==2)if(ve[0]=="c"){m.K=ve[1],m.ia=ve[2];const _t=ve[3];_t!=null&&(m.la=_t,m.j.info("VER="+m.la));const wt=ve[4];wt!=null&&(m.Aa=wt,m.j.info("SVER="+m.Aa));const ys=ve[5];ys!=null&&typeof ys=="number"&&0<ys&&(I=1.5*ys,m.L=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const fn=u.g;if(fn){const Yl=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yl){var z=I.h;z.g||Yl.indexOf("spdy")==-1&&Yl.indexOf("quic")==-1&&Yl.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(ed(z,z.h),z.h=null))}if(I.D){const sd=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;sd&&(I.ya=sd,Ae(I.I,I.D,sd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),I=m;var Q=u;if(I.qa=sv(I,I.J?I.ia:null,I.W),Q.K){Ny(I.h,Q);var Ie=Q,lt=I.L;lt&&(Ie.I=lt),Ie.B&&(Xh(Ie),Fl(Ie)),I.g=Q}else ev(I);0<m.i.length&&Kl(m)}else ve[0]!="stop"&&ve[0]!="close"||Ai(m,7);else m.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Ai(m,7):nd(m):ve[0]!="noop"&&m.l&&m.l.ta(ve),m.v=0)}}Lo(4)}catch{}}var sR=class{constructor(u,d){this.g=u,this.map=d}};function by(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Oy(u){return u.h?1:u.g?u.g.size:0}function Zh(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function ed(u,d){u.g?u.g.add(d):u.h=d}function Ny(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}by.prototype.cancel=function(){if(this.i=Vy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Vy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return x(u.i)}function oR(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,I=0;I<m;I++)d.push(u[I]);return d}d=[],m=0;for(I in u)d[m++]=u[I];return d}function aR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const I in u)d[m++]=I;return d}}}function My(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=aR(u),I=oR(u),j=I.length,z=0;z<j;z++)d.call(void 0,I[z],m&&m[z],u)}var Ly=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lR(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var I=u[m].indexOf("="),j=null;if(0<=I){var z=u[m].substring(0,I);j=u[m].substring(I+1)}else z=u[m];d(z,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Pi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Pi){this.h=u.h,jl(this,u.j),this.o=u.o,this.g=u.g,Bl(this,u.s),this.l=u.l;var d=u.i,m=new zo;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Uy(this,m),this.m=u.m}else u&&(d=String(u).match(Ly))?(this.h=!1,jl(this,d[1]||"",!0),this.o=Bo(d[2]||""),this.g=Bo(d[3]||"",!0),Bl(this,d[4]),this.l=Bo(d[5]||"",!0),Uy(this,d[6]||"",!0),this.m=Bo(d[7]||"")):(this.h=!1,this.i=new zo(null,this.h))}Pi.prototype.toString=function(){var u=[],d=this.j;d&&u.push($o(d,Fy,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push($o(d,Fy,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push($o(m,m.charAt(0)=="/"?hR:cR,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",$o(m,fR)),u.join("")};function $n(u){return new Pi(u)}function jl(u,d,m){u.j=m?Bo(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Bl(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Uy(u,d,m){d instanceof zo?(u.i=d,pR(u.i,u.h)):(m||(d=$o(d,dR)),u.i=new zo(d,u.h))}function Ae(u,d,m){u.i.set(d,m)}function $l(u){return Ae(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Bo(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $o(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,uR),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function uR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Fy=/[#\/\?@]/g,cR=/[#\?:]/g,hR=/[#\?]/g,dR=/[#\?@]/g,fR=/#/g;function zo(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function Er(u){u.g||(u.g=new Map,u.h=0,u.i&&lR(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=zo.prototype,t.add=function(u,d){Er(this),this.i=null,u=ms(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function jy(u,d){Er(u),d=ms(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function By(u,d){return Er(u),d=ms(u,d),u.g.has(d)}t.forEach=function(u,d){Er(this),this.g.forEach(function(m,I){m.forEach(function(j){u.call(d,j,I,this)},this)},this)},t.na=function(){Er(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let I=0;I<d.length;I++){const j=u[I];for(let z=0;z<j.length;z++)m.push(d[I])}return m},t.V=function(u){Er(this);let d=[];if(typeof u=="string")By(this,u)&&(d=d.concat(this.g.get(ms(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return Er(this),this.i=null,u=ms(this,u),By(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function $y(u,d,m){jy(u,d),0<m.length&&(u.i=null,u.g.set(ms(u,d),x(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var I=d[m];const z=encodeURIComponent(String(I)),Q=this.V(I);for(I=0;I<Q.length;I++){var j=z;Q[I]!==""&&(j+="="+encodeURIComponent(String(Q[I]))),u.push(j)}}return this.i=u.join("&")};function ms(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function pR(u,d){d&&!u.j&&(Er(u),u.i=null,u.g.forEach(function(m,I){var j=I.toLowerCase();I!=j&&(jy(this,I),$y(this,j,m))},u)),u.j=d}function mR(u,d){const m=new Fo;if(a.Image){const I=new Image;I.onload=T(Sr,m,"TestLoadImage: loaded",!0,d,I),I.onerror=T(Sr,m,"TestLoadImage: error",!1,d,I),I.onabort=T(Sr,m,"TestLoadImage: abort",!1,d,I),I.ontimeout=T(Sr,m,"TestLoadImage: timeout",!1,d,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else d(!1)}function gR(u,d){const m=new Fo,I=new AbortController,j=setTimeout(()=>{I.abort(),Sr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:I.signal}).then(z=>{clearTimeout(j),z.ok?Sr(m,"TestPingServer: ok",!0,d):Sr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Sr(m,"TestPingServer: error",!1,d)})}function Sr(u,d,m,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(m)}catch{}}function yR(){this.g=new Vl}function vR(u,d,m){const I=m||"";try{My(u,function(j,z){let Q=j;c(j)&&(Q=Ht(j)),d.push(I+z+"="+encodeURIComponent(Q))})}catch(j){throw d.push(I+"type="+encodeURIComponent("_badmap")),j}}function zl(u){this.l=u.Ub||null,this.j=u.eb||!1}C(zl,Ti),zl.prototype.g=function(){return new Hl(this.l,this.j)},zl.prototype.i=function(u){return function(){return u}}({});function Hl(u,d){Xe.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Hl,Xe),t=Hl.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Wo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ho(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function zy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Ho(this):Wo(this),this.readyState==3&&zy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ho(this))},t.Qa=function(u){this.g&&(this.response=u,Ho(this))},t.ga=function(){this.g&&Ho(this)};function Ho(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wo(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function Wo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Hy(u){let d="";return N(u,function(m,I){d+=I,d+=":",d+=m,d+=`\r
`}),d}function td(u,d,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=Hy(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ae(u,d,m))}function je(u){Xe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(je,Xe);var _R=/^https?$/i,wR=["POST","PUT"];t=je.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gh.g(),this.v=this.o?hs(this.o):hs(Gh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(z){Wy(this,z);return}if(u=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)m.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())m.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),j=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wR,d,void 0))||I||j||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Q]of m)this.g.setRequestHeader(z,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gy(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){Wy(this,z)}};function Wy(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,qy(u),Wl(u)}function qy(u){u.A||(u.A=!0,rt(u,"complete"),rt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,rt(this,"complete"),rt(this,"abort"),Wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wl(this,!0)),je.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ky(this):this.bb())},t.bb=function(){Ky(this)};function Ky(u){if(u.h&&typeof o<"u"&&(!u.v[1]||zn(u)!=4||u.Z()!=2)){if(u.u&&zn(u)==4)vi(u.Ea,0,u);else if(rt(u,"readystatechange"),zn(u)==4){u.h=!1;try{const Q=u.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var I;if(I=Q===0){var j=String(u.D).match(Ly)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),I=!_R.test(j?j.toLowerCase():"")}m=I}if(m)rt(u,"complete"),rt(u,"success");else{u.m=6;try{var z=2<zn(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",qy(u)}}finally{Wl(u)}}}}function Wl(u,d){if(u.g){Gy(u);const m=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||rt(u,"ready");try{m.onreadystatechange=I}catch{}}}function Gy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function zn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<zn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),wi(d)}};function Qy(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TR(u){const d={};u=(u.g&&2<=zn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(v(u[I]))continue;var m=R(u[I]);const j=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=d[j]||[];d[j]=z,z.push(m)}P(d,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function Yy(u){this.Aa=0,this.i=[],this.j=new Fo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,u),this.cb=qo("retryDelaySeedMs",1e4,u),this.Wa=qo("forwardChannelMaxRetries",2,u),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new by(u&&u.concurrentRequestLimit),this.Da=new yR,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yy.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,I){bt(0),this.W=u,this.H=d||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.I=sv(this,null,this.W),Kl(this)};function nd(u){if(Xy(u),u.G==3){var d=u.U++,m=$n(u.I);if(Ae(m,"SID",u.K),Ae(m,"RID",d),Ae(m,"TYPE","terminate"),Ko(u,m),d=new Tr(u,u.j,d),d.L=2,d.v=$l($n(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=ov(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Fl(d)}iv(u)}function ql(u){u.g&&(id(u),u.g.cancel(),u.g=null)}function Xy(u){ql(u),u.u&&(a.clearTimeout(u.u),u.u=null),Gl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Kl(u){if(!Dy(u.h)&&!u.s){u.s=!0;var d=u.Ga;te||U(),V||(te(),V=!0),O.add(d,u),u.B=0}}function ER(u,d){return Oy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Uo(p(u.Ga,u,d),rv(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new Tr(this,this.j,u);let z=this.o;if(this.S&&(z?(z=g(z),w(z,this.S)):z=this.S),this.m!==null||this.O||(j.H=z,z=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(d+=I,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Zy(this,j,d),m=$n(this.I),Ae(m,"RID",u),Ae(m,"CVER",22),this.D&&Ae(m,"X-HTTP-Session-Id",this.D),Ko(this,m),z&&(this.O?d="headers="+encodeURIComponent(String(Hy(z)))+"&"+d:this.m&&td(m,this.m,z)),ed(this.h,j),this.Ua&&Ae(m,"TYPE","init"),this.P?(Ae(m,"$req",d),Ae(m,"SID","null"),j.T=!0,Yh(j,m,null)):Yh(j,m,d),this.G=2}}else this.G==3&&(u?Jy(this,u):this.i.length==0||Dy(this.h)||Jy(this))};function Jy(u,d){var m;d?m=d.l:m=u.U++;const I=$n(u.I);Ae(I,"SID",u.K),Ae(I,"RID",m),Ae(I,"AID",u.T),Ko(u,I),u.m&&u.o&&td(I,u.m,u.o),m=new Tr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Zy(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ed(u.h,m),Yh(m,I,d)}function Ko(u,d){u.H&&N(u.H,function(m,I){Ae(d,I,m)}),u.l&&My({},function(m,I){Ae(d,I,m)})}function Zy(u,d,m){m=Math.min(u.i.length,m);var I=u.l?p(u.l.Na,u.l,u):null;e:{var j=u.i;let z=-1;for(;;){const Q=["count="+m];z==-1?0<m?(z=j[0].g,Q.push("ofs="+z)):z=0:Q.push("ofs="+z);let Ie=!0;for(let lt=0;lt<m;lt++){let ve=j[lt].g;const _t=j[lt].map;if(ve-=z,0>ve)z=Math.max(0,j[lt].g-100),Ie=!1;else try{vR(_t,Q,"req"+ve+"_")}catch{I&&I(_t)}}if(Ie){I=Q.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,I}function ev(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;te||U(),V||(te(),V=!0),O.add(d,u),u.v=0}}function rd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Uo(p(u.Fa,u),rv(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,tv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Uo(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),ql(this),tv(this))};function id(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function tv(u){u.g=new Tr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=$n(u.qa);Ae(d,"RID","rpc"),Ae(d,"SID",u.K),Ae(d,"AID",u.T),Ae(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ae(d,"TO",u.ja),Ae(d,"TYPE","xmlhttp"),Ko(u,d),u.m&&u.o&&td(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=$l($n(d)),m.m=null,m.P=!0,Cy(m,u)}t.Za=function(){this.C!=null&&(this.C=null,ql(this),rd(this),bt(19))};function Gl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function nv(u,d){var m=null;if(u.g==d){Gl(u),id(u),u.g=null;var I=2}else if(Zh(u.h,d))m=d.D,Ny(u.h,d),I=1;else return;if(u.G!=0){if(d.o)if(I==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var j=u.B;I=Ml(),rt(I,new Iy(I,m)),Kl(u)}else ev(u);else if(j=d.s,j==3||j==0&&0<d.X||!(I==1&&ER(u,d)||I==2&&rd(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),j){case 1:Ai(u,5);break;case 4:Ai(u,10);break;case 3:Ai(u,6);break;default:Ai(u,2)}}}function rv(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function Ai(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),I=u.Xa;const j=!I;I=new Pi(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jl(I,"https"),$l(I),j?mR(I.toString(),m):gR(I.toString(),m)}else bt(2);u.G=0,u.l&&u.l.sa(d),iv(u),Xy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function iv(u){if(u.G=0,u.ka=[],u.l){const d=Vy(u.h);(d.length!=0||u.i.length!=0)&&(k(u.ka,d),k(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function sv(u,d,m){var I=m instanceof Pi?$n(m):new Pi(m);if(I.g!="")d&&(I.g=d+"."+I.g),Bl(I,I.s);else{var j=a.location;I=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var z=new Pi(null);I&&jl(z,I),d&&(z.g=d),j&&Bl(z,j),m&&(z.l=m),I=z}return m=u.D,d=u.ya,m&&d&&Ae(I,m,d),Ae(I,"VER",u.la),Ko(u,I),I}function ov(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new je(new zl({eb:m})):new je(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function av(){}t=av.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ql(){}Ql.prototype.g=function(u,d){return new Wt(u,d)};function Wt(u,d){Xe.call(this),this.g=new Yy(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!v(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new gs(this)}C(Wt,Xe),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){nd(this.g)},Wt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Ht(u),u=m);d.i.push(new sR(d.Ya++,u)),d.G==3&&Kl(d)},Wt.prototype.N=function(){this.g.l=null,delete this.j,nd(this.g),delete this.g,Wt.aa.N.call(this)};function lv(u){fs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}C(lv,fs);function uv(){Ei.call(this),this.status=1}C(uv,Ei);function gs(u){this.g=u}C(gs,av),gs.prototype.ua=function(){rt(this.g,"a")},gs.prototype.ta=function(u){rt(this.g,new lv(u))},gs.prototype.sa=function(u){rt(this.g,new uv)},gs.prototype.ra=function(){rt(this.g,"b")},Ql.prototype.createWebChannel=Ql.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,QI=function(){return new Ql},GI=function(){return Ml()},KI=Si,yp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ll.NO_ERROR=0,Ll.TIMEOUT=8,Ll.HTTP_ERROR=6,$u=Ll,Py.COMPLETE="complete",qI=Py,ds.EventType=wr,wr.OPEN="a",wr.CLOSE="b",wr.ERROR="c",wr.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,ca=ds,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,WI=je}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const c0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new mh("@firebase/firestore");function na(){return Zi.logLevel}function ee(t,...e){if(Zi.logLevel<=he.DEBUG){const n=e.map(hg);Zi.debug(`Firestore (${bo}): ${t}`,...n)}}function fr(t,...e){if(Zi.logLevel<=he.ERROR){const n=e.map(hg);Zi.error(`Firestore (${bo}): ${t}`,...n)}}function uo(t,...e){if(Zi.logLevel<=he.WARN){const n=e.map(hg);Zi.warn(`Firestore (${bo}): ${t}`,...n)}}function hg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: `+t;throw fr(e),new Error(e)}function Ee(t,e){t||oe()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Pt.UNAUTHENTICATED))}shutdown(){}}class mV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gV{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new YI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new Pt(e)}}class yV{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vV{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yV(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _V{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new _V(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function co(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new tt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new tt(0,0))}static max(){return new le(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ce extends tl{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const EV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends tl{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return EV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Z(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Z(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ce.fromString(e))}static fromName(e){return new ne(Ce.fromString(e).popFirst(5))}static empty(){return new ne(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ce(e.slice()))}}function SV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new tt(n+1,0):new tt(n,r));return new ti(i,ne.empty(),e)}function IV(t){return new ti(t.readTime,t.key,-1)}class ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ti(le.min(),ne.empty(),-1)}static max(){return new ti(le.max(),ne.empty(),-1)}}function PV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==AV)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(i=>i?K.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new K((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new K((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function CV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dg.oe=-1;function Th(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function kV(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new d0(this.data.getIterator())}getIteratorFrom(e){return new d0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class d0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new pt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ZI("Invalid base64 string: "+s):s}}(e);return new gt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const xV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=xV.exec(t);if(Ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function pg(t){const e=t.mapValue.fields.__previous_value__;return fg(e)?pg(e):e}function nl(t){const e=ni(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class rl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fg(t)?4:OV(t)?9007199254740991:DV(t)?10:11:oe()}function Fn(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nl(t).isEqual(nl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ni(i.timestampValue),a=ni(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return es(i.bytesValue).isEqual(es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=He(i.doubleValue),a=He(s.doubleValue);return o===a?Nc(o)===Nc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return co(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(h0(o)!==h0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Fn(o[l],a[l])))return!1;return!0}(t,e);default:return oe()}}function il(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function ho(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=He(s.integerValue||s.doubleValue),l=He(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return f0(t.timestampValue,e.timestampValue);case 4:return f0(nl(t),nl(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(s,o){const a=es(s),l=es(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=_e(a[c],l[c]);if(h!==0)return h}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=_e(He(s.latitude),He(o.latitude));return a!==0?a:_e(He(s.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return p0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const f=s.fields||{},p=o.fields||{},T=(a=f.value)===null||a===void 0?void 0:a.arrayValue,C=(l=p.value)===null||l===void 0?void 0:l.arrayValue,x=_e(((c=T==null?void 0:T.values)===null||c===void 0?void 0:c.length)||0,((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:p0(T,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===vu.mapValue&&o===vu.mapValue)return 0;if(s===vu.mapValue)return 1;if(o===vu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=_e(l[f],h[f]);if(p!==0)return p;const T=ho(a[l[f]],c[h[f]]);if(T!==0)return T}return _e(l.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function f0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=ni(t),r=ni(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function p0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ho(n[i],r[i]);if(s)return s}return _e(n.length,r.length)}function fo(t){return vp(t)}function vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ni(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vp(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function m0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _p(t){return!!t&&"integerValue"in t}function mg(t){return!!t&&"arrayValue"in t}function g0(t){return!!t&&"nullValue"in t}function y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zu(t){return!!t&&"mapValue"in t}function DV(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.value=e}static empty(){return new Ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ra(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());zu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){is(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ut(Ra(this.value))}}function eP(t){const e=[];return is(t.fields,(n,r)=>{const i=new dt([n]);if(zu(r)){const s=eP(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Rt(e,0,le.min(),le.min(),le.min(),Ut.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,le.min(),le.min(),Ut.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,le.min(),le.min(),Ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.position=e,this.inclusive=n}}function v0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=ho(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n="asc"){this.field=e,this.dir=n}}function NV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{}class Ye extends tP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MV(e,n,r):n==="array-contains"?new FV(e,r):n==="in"?new jV(e,r):n==="not-in"?new BV(e,r):n==="array-contains-any"?new $V(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LV(e,r):new UV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ho(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ho(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends tP{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Sn(e,n)}matches(e){return nP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nP(t){return t.op==="and"}function rP(t){return VV(t)&&nP(t)}function VV(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function wp(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(rP(t))return t.filters.map(e=>wp(e)).join(",");{const e=t.filters.map(n=>wp(n)).join(",");return`${t.op}(${e})`}}function iP(t,e){return t instanceof Ye?function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(t,e):t instanceof Sn?function(r,i){return i instanceof Sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&iP(o,i.filters[a]),!0):!1}(t,e):void oe()}function sP(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof Sn?function(n){return n.op.toString()+" {"+n.getFilters().map(sP).join(" ,")+"}"}(t):"Filter"}class MV extends Ye{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class LV extends Ye{constructor(e,n){super(e,"in",n),this.keys=oP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UV extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=oP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class FV extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mg(n)&&il(n.arrayValue,this.value)}}class jV extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class BV extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!il(this.value.arrayValue,n)}}class $V extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>il(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function w0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new zV(t,e,n,r,i,s,o)}function gg(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.ue=n}return e.ue}function yg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_0(t.startAt,e.startAt)&&_0(t.endAt,e.endAt)}function Tp(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HV(t,e,n,r,i,s,o,a){return new El(t,e,n,r,i,s,o,a)}function vg(t){return new El(t)}function T0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aP(t){return t.collectionGroup!==null}function Ca(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pt(dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Mc(s,r))}),n.has(dt.keyField().canonicalString())||e.ce.push(new Mc(dt.keyField(),r))}return e.ce}function Nn(t){const e=ue(t);return e.le||(e.le=WV(e,Ca(t))),e.le}function WV(t,e){if(t.limitType==="F")return w0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Mc(i.field,s)});const n=t.endAt?new Vc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vc(t.startAt.position,t.startAt.inclusive):null;return w0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ep(t,e){const n=t.filters.concat([e]);return new El(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sp(t,e,n){return new El(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return yg(Nn(t),Nn(e))&&t.limitType===e.limitType}function lP(t){return`${gg(Nn(t))}|lt:${t.limitType}`}function Ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sP(i)).join(", ")}]`),Th(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fo(i)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function Sh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ne.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ca(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=v0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ca(r),i)||r.endAt&&!function(o,a,l){const c=v0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ca(r),i))}(t,e)}function qV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uP(t){return(e,n)=>{let r=!1;for(const i of Ca(t)){const s=KV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function KV(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ho(l,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return JI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=new Ue(ne.comparator);function pr(){return GV}const cP=new Ue(ne.comparator);function ha(...t){let e=cP;for(const n of t)e=e.insert(n.key,n);return e}function hP(t){let e=cP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ui(){return ka()}function dP(){return ka()}function ka(){return new Do(t=>t.toString(),(t,e)=>t.isEqual(e))}const QV=new Ue(ne.comparator),YV=new pt(ne.comparator);function pe(...t){let e=YV;for(const n of t)e=e.add(n);return e}const XV=new pt(_e);function JV(){return XV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function fP(t){return{integerValue:""+t}}function ZV(t,e){return kV(e)?fP(e):_g(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this._=void 0}}function eM(t,e,n){return t instanceof Lc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&fg(s)&&(s=pg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof po?mP(t,e):t instanceof mo?gP(t,e):function(i,s){const o=pP(i,s),a=E0(o)+E0(i.Pe);return _p(o)&&_p(i.Pe)?fP(a):_g(i.serializer,a)}(t,e)}function tM(t,e,n){return t instanceof po?mP(t,e):t instanceof mo?gP(t,e):n}function pP(t,e){return t instanceof Uc?function(r){return _p(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Lc extends Ih{}class po extends Ih{constructor(e){super(),this.elements=e}}function mP(t,e){const n=yP(e);for(const r of t.elements)n.some(i=>Fn(i,r))||n.push(r);return{arrayValue:{values:n}}}class mo extends Ih{constructor(e){super(),this.elements=e}}function gP(t,e){let n=yP(e);for(const r of t.elements)n=n.filter(i=>!Fn(i,r));return{arrayValue:{values:n}}}class Uc extends Ih{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function E0(t){return He(t.integerValue||t.doubleValue)}function yP(t){return mg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n){this.field=e,this.transform=n}}function nM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof po&&i instanceof po||r instanceof mo&&i instanceof mo?co(r.elements,i.elements,Fn):r instanceof Uc&&i instanceof Uc?Fn(r.Pe,i.Pe):r instanceof Lc&&i instanceof Lc}(t.transform,e.transform)}class rM{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ph{}function _P(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wg(t.key,ln.none()):new Sl(t.key,t.data,ln.none());{const n=t.data,r=Ut.empty();let i=new pt(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new pi(t.key,r,new Gt(i.toArray()),ln.none())}}function iM(t,e,n){t instanceof Sl?function(i,s,o){const a=i.value.clone(),l=I0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof pi?function(i,s,o){if(!Hu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=I0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(wP(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xa(t,e,n,r){return t instanceof Sl?function(s,o,a,l){if(!Hu(s.precondition,o))return a;const c=s.value.clone(),h=P0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof pi?function(s,o,a,l){if(!Hu(s.precondition,o))return a;const c=P0(s.fieldTransforms,l,o),h=o.data;return h.setAll(wP(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function sM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=pP(r.transform,i||null);s!=null&&(n===null&&(n=Ut.empty()),n.set(r.field,s))}return n||null}function S0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&co(r,i,(s,o)=>nM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sl extends Ph{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class pi extends Ph{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I0(t,e,n){const r=new Map;Ee(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tM(o,a,n[i]))}return r}function P0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,eM(s,o,e))}return r}class wg extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oM extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=_P(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(n,r)=>S0(n,r))&&co(this.baseMutations,e.baseMutations,(n,r)=>S0(n,r))}}class Tg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length);let i=function(){return QV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Tg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,me;function cM(t){switch(t){default:return oe();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function TP(t){if(t===void 0)return fr("GRPC error has no .code"),W.UNKNOWN;switch(t){case Ge.OK:return W.OK;case Ge.CANCELLED:return W.CANCELLED;case Ge.UNKNOWN:return W.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return W.INTERNAL;case Ge.UNAVAILABLE:return W.UNAVAILABLE;case Ge.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Ge.NOT_FOUND:return W.NOT_FOUND;case Ge.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Ge.ABORTED:return W.ABORTED;case Ge.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Ge.DATA_LOSS:return W.DATA_LOSS;default:return oe()}}(me=Ge||(Ge={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=new zi([4294967295,4294967295],0);function A0(t){const e=hM().encode(t),n=new HI;return n.update(e),new Uint8Array(n.digest())}function R0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([n,r],0),new zi([i,s],0)]}class Eg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new da(`Invalid padding: ${n}`);if(r<0)throw new da(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new da(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new da(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zi.fromNumber(r)));return i.compare(dM)===1&&(i=new zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=A0(e),[r,i]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Eg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=A0(e),[r,i]=R0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class da extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ah(le.min(),i,new Ue(_e),pr(),pe())}}class Il{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Il(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class EP{constructor(e,n){this.targetId=e,this.me=n}}class SP{constructor(e,n,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class C0{constructor(){this.fe=0,this.ge=x0(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),n=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new Il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=x0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fM{constructor(e){this.Le=e,this.Be=new Map,this.ke=pr(),this.qe=k0(),this.Qe=new Ue(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Tp(s))if(r===0){const o=new ne(s.path);this.Ue(n,o,Rt.newNoDocument(o,le.min()))}else Ee(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=es(r).toUint8Array()}catch(l){if(l instanceof ZI)return uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Eg(o,i,s)}catch(l){return uo(l instanceof da?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tp(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Rt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ah(e,n,this.Qe,this.ke,r);return this.ke=pr(),this.qe=k0(),this.Qe=new Ue(_e),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new C0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new C0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function k0(){return new Ue(ne.comparator)}function x0(){return new Ue(ne.comparator)}const pM={asc:"ASCENDING",desc:"DESCENDING"},mM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gM={and:"AND",or:"OR"};class yM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ip(t,e){return t.useProto3Json||Th(e)?e:{value:e}}function Fc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vM(t,e){return Fc(t,e.toTimestamp())}function Vn(t){return Ee(!!t),le.fromTimestamp(function(n){const r=ni(n);return new tt(r.seconds,r.nanos)}(t))}function Sg(t,e){return Pp(t,e).canonicalString()}function Pp(t,e){const n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PP(t){const e=Ce.fromString(t);return Ee(xP(e)),e}function Ap(t,e){return Sg(t.databaseId,e.path)}function qd(t,e){const n=PP(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(RP(n))}function AP(t,e){return Sg(t.databaseId,e)}function _M(t){const e=PP(t);return e.length===4?Ce.emptyPath():RP(e)}function Rp(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RP(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function b0(t,e,n){return{name:Ap(t,e),fields:n.value.mapValue.fields}}function wM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ee(h===void 0||typeof h=="string"),gt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),gt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?W.UNKNOWN:TP(c.code);return new Z(h,c.message||"")}(o);n=new SP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qd(t,r.document.name),s=Vn(r.document.updateTime),o=r.document.createTime?Vn(r.document.createTime):le.min(),a=new Ut({mapValue:{fields:r.document.fields}}),l=Rt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Wu(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qd(t,r.document),s=r.readTime?Vn(r.readTime):le.min(),o=Rt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Wu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qd(t,r.document),s=r.removedTargetIds||[];n=new Wu([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new uM(i,s),a=r.targetId;n=new EP(a,o)}}return n}function TM(t,e){let n;if(e instanceof Sl)n={update:b0(t,e.key,e.value)};else if(e instanceof wg)n={delete:Ap(t,e.key)};else if(e instanceof pi)n={update:b0(t,e.key,e.data),updateMask:xM(e.fieldMask)};else{if(!(e instanceof oM))return oe();n={verify:Ap(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof po)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function EM(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Vn(i.updateTime):Vn(s);return o.isEqual(le.min())&&(o=Vn(s)),new rM(o,i.transformResults||[])}(n,e))):[]}function SM(t,e){return{documents:[AP(t,e.path)]}}function IM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AP(t,i);const s=function(c){if(c.length!==0)return kP(Sn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Is(p.field),direction:RM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ip(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function PM(t){let e=_M(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ee(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=CP(f);return p instanceof Sn&&rP(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(C){return new Mc(Ps(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Th(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,T=f.values||[];return new Vc(T,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,T=f.values||[];return new Vc(T,p)}(n.endAt)),HV(e,i,o,s,a,"F",l,c)}function AM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ps(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ps(n.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ps(n.unaryFilter.field);return Ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ps(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(Ps(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Sn.create(n.compositeFilter.filters.map(r=>CP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function RM(t){return pM[t]}function CM(t){return mM[t]}function kM(t){return gM[t]}function Is(t){return{fieldPath:t.canonicalString()}}function Ps(t){return dt.fromServerFormat(t.fieldPath)}function kP(t){return t instanceof Ye?function(n){if(n.op==="=="){if(y0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(g0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(y0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(g0(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:CM(n.op),value:n.value}}}(t):t instanceof Sn?function(n){const r=n.getFilters().map(i=>kP(i));return r.length===1?r[0]:{compositeFilter:{op:kM(n.op),filters:r}}}(t):oe()}function xM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,i,s=le.min(),o=le.min(),a=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.ct=e}}function DM(t){const e=PM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.un=new NM}addToCollectionParentIndex(e,n){return this.un.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(ti.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class NM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new go(0)}static kn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(){this.changes=new Do(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xa(r.mutation,i,Gt.empty(),tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const i=Ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ha();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=pr();const o=ka(),a=function(){return ka()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof pi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),xa(h.mutation,c,h.mutation.getFieldMask(),tt.now())):o.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new MM(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ka();let i=new Ue((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Gt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||pe()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=dP();h.forEach(p=>{if(!s.has(p)){const T=_P(n.get(p),r.get(p));T!==null&&f.set(p,T),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):K.resolve(Ui());let a=-1,l=s;return o.next(c=>K.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,pe())).next(h=>({batchId:a,changes:hP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let i=ha();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ha();return this.indexManager.getCollectionParents(e,s).next(a=>K.forEach(a,l=>{const c=function(f,p){return new El(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Rt.newInvalidDocument(h)))});let a=ha();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&xa(h.mutation,c,Gt.empty(),tt.now()),Sh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return K.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:DM(i.bundledQuery),readTime:Vn(i.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.overlays=new Ue(ne.comparator),this.Ir=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ui();return K.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const i=Ui(),s=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return K.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ui(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Ui(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return K.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lM(n,r));let s=this.Ir.get(n);s===void 0&&(s=pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(){this.Tr=new pt(it.Er),this.dr=new pt(it.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new it(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new it(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Ce([])),r=new it(n,e),i=new it(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Ce([])),r=new it(n,e),i=new it(n,e+1);let s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new pt(it.Er)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aM(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return K.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),K.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(_e);return n.forEach(i=>{const s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),K.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ne.isDocumentKey(s)||(s=s.child(""));const o=new it(new ne(s),0);let a=new pt(_e);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),K.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return K.forEach(n.mutations,i=>{const s=new it(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new it(n,0),i=this.br.firstAfterOrEqual(r);return K.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.Mr=e,this.docs=function(){return new Ue(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=pr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=pr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PV(IV(h),r)<=0||(i.has(h.key)||Sh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return K.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Or(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new zM(this)}getSize(e){return K.resolve(this.size)}}class zM extends VM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.persistence=e,this.Nr=new Do(n=>gg(n),yg),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ig,this.targetCount=0,this.kr=go.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),K.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Kn(n),K.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(s).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),K.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new dg(0),this.Kr=!1,this.Kr=!0,this.$r=new jM,this.referenceDelegate=e(this),this.Ur=new HM(this),this.indexManager=new OM,this.remoteDocumentCache=function(i){return new $M(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new bM(n),this.Gr=new UM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new FM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new BM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new qM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return K.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class qM extends RV{constructor(e){super(),this.currentSequenceNumber=e}}class Pg{constructor(e){this.persistence=e,this.Jr=new Ig,this.Yr=null}static Zr(e){return new Pg(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),K.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Xr,r=>{const i=ne.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return K.or([()=>K.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=pe(),i=pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ag(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ab()?8:CV(xe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new KM;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(na()<=he.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),K.resolve()):(na()<=he.DEBUG&&ee("QueryEngine","Query:",Ss(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(na()<=he.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):K.resolve())}Yi(e,n){if(T0(n))return K.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sp(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Sp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return T0(n)||i.isEqual(le.min())?K.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?K.resolve(null):(na()<=he.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ss(n)),this.rs(e,o,n,SV(i,-1)).next(a=>a))})}ts(e,n){let r=new pt(uP(e));return n.forEach((i,s)=>{Sh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return na()<=he.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,ti.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ue(_e),this._s=new Do(s=>gg(s),yg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function YM(t,e,n,r){return new QM(t,e,n,r)}async function bP(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=pe();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function XM(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let T=K.resolve();return p.forEach(C=>{T=T.next(()=>h.getEntry(l,C)).next(x=>{const k=c.docVersions.get(C);Ee(k!==null),x.version.compareTo(k)<0&&(f.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function DP(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function JM(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let T=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?T=T.withResumeToken(gt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(h.resumeToken,r)),i=i.insert(f,T),function(x,k,_){return x.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,T,h)&&a.push(n.Ur.updateTargetData(s,T))});let l=pr(),c=pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(ZM(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(le.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return K.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function ZM(t,e,n){let r=pe(),i=pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=pr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function eL(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tL(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,K.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cp(t,e,n){const r=ue(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Tl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function D0(t,e,n){const r=ue(t);let i=le.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ue(l),p=f._s.get(h);return p!==void 0?K.resolve(f.os.get(p)):f.Ur.getTargetData(c,h)}(r,o,Nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:pe())).next(a=>(nL(r,qV(e),a),{documents:a,Ts:s})))}function nL(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class O0{constructor(){this.activeTargetIds=JV()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rL{constructor(){this.so=new O0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new O0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _u=null;function Kd(){return _u===null?_u=function(){return 268435456+Math.round(2147483648*Math.random())}():_u++,"0x"+_u.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class aL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Kd(),l=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw uo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=sL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Kd();return new Promise((o,a)=>{const l=new WI;l.setWithCredentials(!0),l.listenOnce(qI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case $u.NO_ERROR:const h=l.getResponseJson();ee(St,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case $u.TIMEOUT:ee(St,`RPC '${e}' ${s} timed out`),a(new Z(W.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const f=l.getStatus();if(ee(St,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const T=p==null?void 0:p.error;if(T&&T.status&&T.message){const C=function(k){const _=k.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(_)>=0?_:W.UNKNOWN}(T.status);a(new Z(C,T.message))}else a(new Z(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Z(W.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{ee(St,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(St,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Kd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=QI(),a=GI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ee(St,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,T=!1;const C=new oL({Io:k=>{T?ee(St,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(p||(ee(St,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),ee(St,`RPC '${e}' stream ${i} sending:`,k),f.send(k))},To:()=>f.close()}),x=(k,_,v)=>{k.listen(_,E=>{try{v(E)}catch(b){setTimeout(()=>{throw b},0)}})};return x(f,ca.EventType.OPEN,()=>{T||(ee(St,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),x(f,ca.EventType.CLOSE,()=>{T||(T=!0,ee(St,`RPC '${e}' stream ${i} transport closed`),C.So())}),x(f,ca.EventType.ERROR,k=>{T||(T=!0,uo(St,`RPC '${e}' stream ${i} transport errored:`,k),C.So(new Z(W.UNAVAILABLE,"The operation could not be completed")))}),x(f,ca.EventType.MESSAGE,k=>{var _;if(!T){const v=k.data[0];Ee(!!v);const E=v,b=E.error||((_=E[0])===null||_===void 0?void 0:_.error);if(b){ee(St,`RPC '${e}' stream ${i} received error:`,b);const L=b.status;let N=function(y){const w=Ge[y];if(w!==void 0)return TP(w)}(L),P=b.message;N===void 0&&(N=W.INTERNAL,P="Unknown error status: "+L+" with message "+b.message),T=!0,C.So(new Z(N,P)),f.close()}else ee(St,`RPC '${e}' stream ${i} received:`,v),C.bo(v)}}),x(a,KI.STAT_EVENT,k=>{k.stat===yp.PROXY?ee(St,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===yp.NOPROXY&&ee(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return new yM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new OP(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Z(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lL extends NP{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=wM(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Vn(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Rp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Tp(l)?{documents:SM(s,l)}:{query:IM(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=IP(s,o.resumeToken);const c=Ip(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Fc(s,o.snapshotVersion.toTimestamp());const c=Ip(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=AM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Rp(this.serializer),n.removeTarget=e,this.a_(n)}}class uL extends NP{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=EM(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Rp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Pp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(W.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Pp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ss(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await Pl(c),c.q_.set("Unknown"),c.L_.delete(4),await Ch(c)}(this))})}),this.q_=new hL(r,i)}}async function Ch(t){if(ss(t))for(const e of t.B_)await e(!0)}async function Pl(t){for(const e of t.B_)await e(!1)}function VP(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xg(n)?kg(n):Oo(n).r_()&&Cg(n,e))}function Rg(t,e){const n=ue(t),r=Oo(n);n.N_.delete(e),r.r_()&&MP(n,e),n.N_.size===0&&(r.r_()?r.o_():ss(n)&&n.q_.set("Unknown"))}function Cg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(t).A_(e)}function MP(t,e){t.Q_.xe(e),Oo(t).R_(e)}function kg(t){t.Q_=new fM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Oo(t).start(),t.q_.v_()}function xg(t){return ss(t)&&!Oo(t).n_()&&t.N_.size>0}function ss(t){return ue(t).L_.size===0}function LP(t){t.Q_=void 0}async function fL(t){t.q_.set("Online")}async function pL(t){t.N_.forEach((e,n)=>{Cg(t,e)})}async function mL(t,e){LP(t),xg(t)?(t.q_.M_(e),kg(t)):t.q_.set("Unknown")}async function gL(t,e,n){if(t.q_.set("Online"),e instanceof SP&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jc(t,r)}else if(e instanceof Wu?t.Q_.Ke(e):e instanceof EP?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await DP(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(gt.EMPTY_BYTE_STRING,h.snapshotVersion)),MP(s,l);const f=new Fr(h.target,l,c,h.sequenceNumber);Cg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await jc(t,r)}}async function jc(t,e,n){if(!Tl(e))throw e;t.L_.add(1),await Pl(t),t.q_.set("Offline"),n||(n=()=>DP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ch(t)})}function UP(t,e){return e().catch(n=>jc(t,n,e))}async function kh(t){const e=ue(t),n=ri(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;yL(e);)try{const i=await eL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,vL(e,i)}catch(i){await jc(e,i)}FP(e)&&jP(e)}function yL(t){return ss(t)&&t.O_.length<10}function vL(t,e){t.O_.push(e);const n=ri(t);n.r_()&&n.V_&&n.m_(e.mutations)}function FP(t){return ss(t)&&!ri(t).n_()&&t.O_.length>0}function jP(t){ri(t).start()}async function _L(t){ri(t).p_()}async function wL(t){const e=ri(t);for(const n of t.O_)e.m_(n.mutations)}async function TL(t,e,n){const r=t.O_.shift(),i=Tg.from(r,e,n);await UP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await kh(t)}async function EL(t,e){e&&ri(t).V_&&await async function(r,i){if(function(o){return cM(o)&&o!==W.ABORTED}(i.code)){const s=r.O_.shift();ri(r).s_(),await UP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await kh(r)}}(t,e),FP(t)&&jP(t)}async function V0(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ss(n);n.L_.add(3),await Pl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ch(n)}async function SL(t,e){const n=ue(t);e?(n.L_.delete(2),await Ch(n)):e||(n.L_.add(2),await Pl(n),n.q_.set("Unknown"))}function Oo(t){return t.K_||(t.K_=function(n,r,i){const s=ue(n);return s.w_(),new lL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:fL.bind(null,t),Ro:pL.bind(null,t),mo:mL.bind(null,t),d_:gL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xg(t)?kg(t):t.q_.set("Unknown")):(await t.K_.stop(),LP(t))})),t.K_}function ri(t){return t.U_||(t.U_=function(n,r,i){const s=ue(n);return s.w_(),new uL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_L.bind(null,t),mo:EL.bind(null,t),f_:wL.bind(null,t),g_:TL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await kh(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new bg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dg(t,e){if(fr("AsyncQueue",`${e}: ${t}`),Tl(t))return new Z(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=ha(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new Zs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(){this.W_=new Ue(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class yo{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new yo(e,n,Zs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class PL{constructor(){this.queries=L0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),s=i.queries;i.queries=L0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Z(W.ABORTED,"Firestore shutting down"))}}function L0(){return new Do(t=>lP(t),Eh)}async function BP(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new IL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Dg(o,`Initialization of query '${Ss(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Og(n)}async function $P(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AL(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Og(n)}function RL(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Og(t){t.Y_.forEach(e=>{e.next()})}var kp,U0;(U0=kp||(kp={})).ea="default",U0.Cache="cache";class zP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.key=e}}class WP{constructor(e){this.key=e}}class CL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=uP(e),this.Ra=new Zs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new M0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),T=Sh(this.query,f)?f:null,C=!!p&&this.mutatedKeys.has(p.key),x=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let k=!1;p&&T?p.data.isEqual(T.data)?C!==x&&(r.track({type:3,doc:T}),k=!0):this.ga(p,T)||(r.track({type:2,doc:T}),k=!0,(l&&this.Aa(T,l)>0||c&&this.Aa(T,c)<0)&&(a=!0)):!p&&T?(r.track({type:0,doc:T}),k=!0):p&&!T&&(r.track({type:1,doc:p}),k=!0,(l||c)&&(a=!0)),k&&(T?(o=o.add(T),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(T,C){const x=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return x(T)-x(C)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new yo(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new M0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new WP(r))}),this.da.forEach(r=>{e.has(r)||n.push(new HP(r))}),n}ba(e){this.Ta=e.Ts,this.da=pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class kL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class xL{constructor(e){this.key=e,this.va=!1}}class bL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Do(a=>lP(a),Eh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(ne.comparator),this.Na=new Map,this.La=new Ig,this.Ba={},this.ka=new Map,this.qa=go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function DL(t,e,n=!0){const r=XP(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await qP(r,e,n,!0),i}async function OL(t,e){const n=XP(t);await qP(n,e,!0,!1)}async function qP(t,e,n,r){const i=await tL(t.localStore,Nn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await NL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&VP(t.remoteStore,i),a}async function NL(t,e,n,r,i){t.Ka=(f,p,T)=>async function(x,k,_,v){let E=k.view.ma(_);E.ns&&(E=await D0(x.localStore,k.query,!1).then(({documents:P})=>k.view.ma(P,E)));const b=v&&v.targetChanges.get(k.targetId),L=v&&v.targetMismatches.get(k.targetId)!=null,N=k.view.applyChanges(E,x.isPrimaryClient,b,L);return j0(x,k.targetId,N.wa),N.snapshot}(t,f,p,T);const s=await D0(t.localStore,e,!0),o=new CL(e,s.Ts),a=o.ma(s.documents),l=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);j0(t,n,c.wa);const h=new kL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function VL(t,e,n){const r=ue(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Eh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rg(r.remoteStore,i.targetId),xp(r,i.targetId)}).catch(wl)):(xp(r,i.targetId),await Cp(r.localStore,i.targetId,!0))}async function ML(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rg(n.remoteStore,r.targetId))}async function LL(t,e,n){const r=HL(t);try{const i=await function(o,a){const l=ue(o),c=tt.now(),h=a.reduce((T,C)=>T.add(C.key),pe());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=pr(),x=pe();return l.cs.getEntries(T,h).next(k=>{C=k,C.forEach((_,v)=>{v.isValidDocument()||(x=x.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(T,C)).next(k=>{f=k;const _=[];for(const v of a){const E=sM(v,f.get(v.key).overlayedDocument);E!=null&&_.push(new pi(v.key,E,eP(E.value.mapValue),ln.exists(!0)))}return l.mutationQueue.addMutationBatch(T,c,_,a)}).next(k=>{p=k;const _=k.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(T,k.batchId,_)})}).then(()=>({batchId:p.batchId,changes:hP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ue(_e)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Al(r,i.changes),await kh(r.remoteStore)}catch(i){const s=Dg(i,"Failed to persist write");n.reject(s)}}async function KP(t,e){const n=ue(t);try{const r=await JM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ee(o.va):i.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),await Al(n,r,e)}catch(r){await wl(r)}}function F0(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&Og(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UL(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ue(ne.comparator);o=o.insert(s,Rt.newNoDocument(s,le.min()));const a=pe().add(s),l=new Ah(le.min(),new Map,new Ue(_e),o,a);await KP(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ng(r)}else await Cp(r.localStore,e,!1).then(()=>xp(r,e,n)).catch(wl)}async function FL(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await XM(n.localStore,e);QP(n,r,null),GP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Al(n,i)}catch(i){await wl(i)}}async function jL(t,e,n){const r=ue(t);try{const i=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ee(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);QP(r,e,n),GP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Al(r,i)}catch(i){await wl(i)}}function GP(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function QP(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||YP(t,r)})}function YP(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Rg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ng(t))}function j0(t,e,n){for(const r of n)r instanceof HP?(t.La.addReference(r.key,e),BL(t,r)):r instanceof WP?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||YP(t,r.key)):oe()}function BL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ng(t))}function Ng(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Ce.fromString(e)),r=t.qa.next();t.Na.set(r,new xL(n)),t.Oa=t.Oa.insert(n,r),VP(t.remoteStore,new Fr(Nn(vg(n.path)),r,"TargetPurposeLimboResolution",dg.oe))}}async function Al(t,e,n){const r=ue(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=Ag.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ue(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(c,p=>K.forEach(p.$i,T=>h.persistence.referenceDelegate.addReference(f,p.targetId,T)).next(()=>K.forEach(p.Ui,T=>h.persistence.referenceDelegate.removeReference(f,p.targetId,T)))))}catch(f){if(!Tl(f))throw f;ee("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const T=h.os.get(p),C=T.snapshotVersion,x=T.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(p,x)}}}(r.localStore,s))}async function $L(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await bP(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Z(W.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Al(n,r.hs)}}function zL(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function XP(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UL.bind(null,e),e.Ca.d_=AL.bind(null,e.eventManager),e.Ca.$a=RL.bind(null,e.eventManager),e}function HL(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jL.bind(null,e),e}class Bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return YM(this.persistence,new GM,e.initialUser,this.serializer)}Ga(e){return new WM(Pg.Zr,this.serializer)}Wa(e){return new rL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bc.provider={build:()=>new Bc};class bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$L.bind(null,this.syncEngine),await SL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PL}()}createDatastore(e){const n=Rh(e.databaseInfo.databaseId),r=function(s){return new aL(s)}(e.databaseInfo);return function(s,o,a,l){return new cL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new dL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>F0(this.syncEngine,n,0),function(){return N0.D()?new N0:new iL}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new bL(i,s,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ue(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Pl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=XI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function B0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qL(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>V0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>V0(e.remoteStore,i)),t._onlineComponents=e}async function qL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;uo("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new Bc)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Qd(t,new Bc);return t._offlineComponents}async function ZP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await B0(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await B0(t,new bp))),t._onlineComponents}function KL(t){return ZP(t).then(e=>e.syncEngine)}async function e1(t){const e=await ZP(t),n=e.eventManager;return n.onListen=DL.bind(null,e.syncEngine),n.onUnlisten=VL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ML.bind(null,e.syncEngine),n}function GL(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new JP({next:p=>{h.Za(),o.enqueueAndForget(()=>$P(s,f));const T=p.docs.has(a);!T&&p.fromCache?c.reject(new Z(W.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&p.fromCache&&l&&l.source==="server"?c.reject(new Z(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new zP(vg(a.path),h,{includeMetadataChanges:!0,_a:!0});return BP(s,f)}(await e1(t),t.asyncQueue,e,n,r)),r.promise}function QL(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new JP({next:p=>{h.Za(),o.enqueueAndForget(()=>$P(s,f)),p.fromCache&&l.source==="server"?c.reject(new Z(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new zP(a,h,{includeMetadataChanges:!0,_a:!0});return BP(s,f)}(await e1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t,e,n){if(!n)throw new Z(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YL(t,e,n,r){if(e===!0&&r===!0)throw new Z(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z0(t){if(!ne.isDocumentKey(t))throw new Z(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function H0(t){if(ne.isDocumentKey(t))throw new Z(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xh(t);throw new Z(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pV;switch(r.type){case"firstParty":return new vV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$0.get(n);r&&(ee("ComponentProvider","Removing Datastore"),$0.delete(n),r.terminate())}(this),Promise.resolve()}}function XL(t,e,n,r={}){var i;const s=(t=In(t,bh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Pt.MOCK_USER;else{a=ib(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Z(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Pt(c)}t._authCredentials=new mV(new YI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new No(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Xr extends No{constructor(e,n,r){super(e,n,vg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new ne(e))}withConverter(e){return new Xr(this.firestore,e,this._path)}}function at(t,e,...n){if(t=Ke(t),n1("collection","path",e),t instanceof bh){const r=Ce.fromString(e,...n);return H0(r),new Xr(t,null,r)}{if(!(t instanceof Nt||t instanceof Xr))throw new Z(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return H0(r),new Xr(t.firestore,null,r)}}function Ze(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=XI.newId()),n1("doc","path",e),t instanceof bh){const r=Ce.fromString(e,...n);return z0(r),new Nt(t,null,new ne(r))}{if(!(t instanceof Nt||t instanceof Xr))throw new Z(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return z0(r),new Nt(t.firestore,t instanceof Xr?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new OP(this,"async_queue_retry"),this.Vu=()=>{const r=Gd();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Gd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Tl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=bg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class os extends bh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new q0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q0(e),this._firestoreClient=void 0,await e}}}function JL(t,e){const n=typeof t=="object"?t:GS(),r=typeof t=="string"?t:"(default)",i=Xm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=nb("firestore");s&&XL(i,...s)}return i}function Vg(t){if(t._terminated)throw new Z(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZL(t),t._firestoreClient}function ZL(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new bV(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,t1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new WL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(gt.fromBase64String(e))}catch(n){throw new Z(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vo(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=/^__.*__$/;class t2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sl(e,this.data,n,this.fieldTransforms)}}class r1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new pi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function i1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Oh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Oh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $c(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(i1(this.Cu)&&e2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class n2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rh(e)}Qu(e,n,r,i=!1){return new Oh({Cu:e,methodName:n,qu:r,path:dt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nh(t){const e=t._freezeSettings(),n=Rh(t._databaseId);return new n2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function s1(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);jg("Data must be an object, but it was:",o,r);const a=a1(r,o);let l,c;if(s.merge)l=new Gt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Dp(e,f,n);if(!o.contains(p))throw new Z(W.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);u1(h,p)||h.push(p)}l=new Gt(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new t2(new Ut(a),l,c)}class Vh extends Rl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vh}}function o1(t,e,n){return new Oh({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ug extends Rl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=o1(this,e,!0),r=this.Ku.map(s=>as(s,n)),i=new po(r);return new vP(e.path,i)}isEqual(e){return e instanceof Ug&&ao(this.Ku,e.Ku)}}class Fg extends Rl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=o1(this,e,!0),r=this.Ku.map(s=>as(s,n)),i=new mo(r);return new vP(e.path,i)}isEqual(e){return e instanceof Fg&&ao(this.Ku,e.Ku)}}function r2(t,e,n,r){const i=t.Qu(1,e,n);jg("Data must be an object, but it was:",i,r);const s=[],o=Ut.empty();is(r,(l,c)=>{const h=Bg(e,l,n);c=Ke(c);const f=i.Nu(h);if(c instanceof Vh)s.push(h);else{const p=as(c,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Gt(s);return new r1(o,a,i.fieldTransforms)}function i2(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Dp(e,r,n)],l=[i];if(s.length%2!=0)throw new Z(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Dp(e,s[p])),l.push(s[p+1]);const c=[],h=Ut.empty();for(let p=a.length-1;p>=0;--p)if(!u1(c,a[p])){const T=a[p];let C=l[p];C=Ke(C);const x=o.Nu(T);if(C instanceof Vh)c.push(T);else{const k=as(C,x);k!=null&&(c.push(T),h.set(T,k))}}const f=new Gt(c);return new r1(h,f,o.fieldTransforms)}function s2(t,e,n,r=!1){return as(n,t.Qu(r?4:3,e))}function as(t,e){if(l1(t=Ke(t)))return jg("Unsupported field value:",e,t),a1(t,e);if(t instanceof Rl)return function(r,i){if(!i1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=as(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=tt.fromDate(r);return{timestampValue:Fc(i.serializer,s)}}if(r instanceof tt){const s=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fc(i.serializer,s)}}if(r instanceof Mg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:IP(i.serializer,r._byteString)};if(r instanceof Nt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Sg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Lg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return _g(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${xh(r)}`)}(t,e)}function a1(t,e){const n={};return JI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,i)=>{const s=as(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function l1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Mg||t instanceof vo||t instanceof Nt||t instanceof Rl||t instanceof Lg)}function jg(t,e,n){if(!l1(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=xh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Dp(t,e,n){if((e=Ke(e))instanceof Dh)return e._internalPath;if(typeof e=="string")return Bg(t,e);throw $c("Field path arguments must be of type string or ",t,!1,void 0,n)}const o2=new RegExp("[~\\*/\\[\\]]");function Bg(t,e,n){if(e.search(o2)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dh(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $c(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Z(W.INVALID_ARGUMENT,a+t+l)}function u1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a2 extends c1{data(){return super.data()}}function $g(t,e){return typeof e=="string"?Bg(t,e):e instanceof Dh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class u2 extends zg{}function Hi(t,e,...n){let r=[];e instanceof zg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Hg).length,a=s.filter(l=>l instanceof Mh).length;if(o>1||o>0&&a>0)throw new Z(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mh extends u2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mh(e,n,r)}_apply(e){const n=this._parse(e);return h1(e._query,n),new No(e.firestore,e.converter,Ep(e._query,n))}_parse(e){const n=Nh(e.firestore);return function(s,o,a,l,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){G0(f,h);const T=[];for(const C of f)T.push(K0(l,s,C));p={arrayValue:{values:T}}}else p=K0(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||G0(f,h),p=s2(a,o,f,h==="in"||h==="not-in");return Ye.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kn(t,e,n){const r=e,i=$g("where",t);return Mh._create(i,r,n)}class Hg extends zg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Hg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)h1(o,l),o=Ep(o,l)}(e._query,n),new No(e.firestore,e.converter,Ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function K0(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new Z(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aP(e)&&n.indexOf("/")!==-1)throw new Z(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!ne.isDocumentKey(r))throw new Z(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return m0(t,new ne(r))}if(n instanceof Nt)return m0(t,n._key);throw new Z(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(n)}.`)}function G0(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h1(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class c2{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>He(o.doubleValue));return new Lg(s)}convertGeoPoint(e){return new Mg(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=pg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){const n=ni(e);return new tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);Ee(xP(r));const i=new rl(r.get(1),r.get(3)),s=new ne(r.popFirst(5));return i.isEqual(n)||fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class f1 extends c1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qu extends f1{data(e={}){return super.data(e)}}class h2{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new fa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qu(this._firestore,this._userDataWriter,r.key,r,new fa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:d2(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function d2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){t=In(t,Nt);const e=In(t.firestore,os);return GL(Vg(e),t._key).then(n=>p2(e,t,n))}class p1 extends c2{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function Yt(t){t=In(t,No);const e=In(t.firestore,os),n=Vg(e),r=new p1(e);return l2(t._query),QL(n,t._query).then(i=>new h2(e,r,t,i))}function f2(t,e,n){t=In(t,Nt);const r=In(t.firestore,os),i=d1(t.converter,e);return Fh(r,[s1(Nh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ln.none())])}function Cn(t,e,n,...r){t=In(t,Nt);const i=In(t.firestore,os),s=Nh(i);let o;return o=typeof(e=Ke(e))=="string"||e instanceof Dh?i2(s,"updateDoc",t._key,e,n,r):r2(s,"updateDoc",t._key,e),Fh(i,[o.toMutation(t._key,ln.exists(!0))])}function Lh(t){return Fh(In(t.firestore,os),[new wg(t._key,ln.none())])}function Uh(t,e){const n=In(t.firestore,os),r=Ze(t),i=d1(t.converter,e);return Fh(n,[s1(Nh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}function Fh(t,e){return function(r,i){const s=new tr;return r.asyncQueue.enqueueAndForget(async()=>LL(await KL(r),i,s)),s.promise}(Vg(t),e)}function p2(t,e,n){const r=n.docs.get(e._key),i=new p1(t);return new f1(t,i,e._key,r,new fa(n.hasPendingWrites,n.fromCache),e.converter)}function m2(...t){return new Ug("arrayUnion",t)}function g2(...t){return new Fg("arrayRemove",t)}(function(e,n=!0){(function(i){bo=i})(gr),ei(new cr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new os(new gV(r.getProvider("auth-internal")),new wV(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Z(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Dn(c0,"4.7.3",e),Dn(c0,"4.7.3","esm2017")})();const y2={apiKey:"AIzaSyDgDperrtprIFnPtoTCuLnYuxPpqQ6ytcI",authDomain:"room-automation-a1ce8.firebaseapp.com",databaseURL:"https://room-automation-a1ce8-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"room-automation-a1ce8",storageBucket:"room-automation-a1ce8.appspot.com",messagingSenderId:"74575195502",appId:"1:74575195502:web:72689f56d7cb6cec8fe57f"},m1=KS(y2),mi=TN(m1),fe=JL(m1);new qn;const v2=new og,_2=()=>xO(mi,v2),w2=()=>cO(mi),T2="/assets/ThaparLogo-BpdlEW3T.png";function E2(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function sl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Op=t=>Array.isArray(t);function g1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function ol(t){return typeof t=="string"||Array.isArray(t)}function Q0(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Wg(t,e,n,r){if(typeof e=="function"){const[i,s]=Q0(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Q0(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function jh(t,e,n){const r=t.getProps();return Wg(r,e,n!==void 0?n:r.custom,t)}const qg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Kg=["initial",...qg],Cl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gi=new Set(Cl),nr=t=>t*1e3,rr=t=>t/1e3,S2={type:"spring",stiffness:500,damping:25,restSpeed:10},I2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),P2={type:"keyframes",duration:.8},A2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},R2=(t,{keyframes:e})=>e.length>2?P2:gi.has(t)?t.startsWith("scale")?I2(e[1]):S2:A2;function Gg(t,e){return t?t[e]||t.default||t:void 0}const C2={skipAnimations:!1,useManualTiming:!1},k2=t=>t!==null;function Bh(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(k2),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const kt=t=>t;function x2(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,h=!1,f=!1)=>{const T=f&&r?e:n;return h&&s.add(c),T.has(c)||T.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(c))}};return l}const wu=["read","resolveKeyframes","update","preRender","render","postRender"],b2=40;function y1(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=wu.reduce((_,v)=>(_[v]=x2(s),_),{}),{read:a,resolveKeyframes:l,update:c,preRender:h,render:f,postRender:p}=o,T=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,b2),1),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(T))},C=()=>{n=!0,r=!0,i.isProcessing||t(T)};return{schedule:wu.reduce((_,v)=>{const E=o[v];return _[v]=(b,L=!1,N=!1)=>(n||C(),E.schedule(b,L,N)),_},{}),cancel:_=>{for(let v=0;v<wu.length;v++)o[wu[v]].cancel(_)},state:i,steps:o}}const{schedule:Se,cancel:ii,state:ct,steps:Yd}=y1(typeof requestAnimationFrame<"u"?requestAnimationFrame:kt,!0),v1=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,D2=1e-7,O2=12;function N2(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=v1(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>D2&&++a<O2);return o}function kl(t,e,n,r){if(t===e&&n===r)return kt;const i=s=>N2(s,0,1,t,n);return s=>s===0||s===1?s:v1(i(s),e,r)}const _1=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,w1=t=>e=>1-t(1-e),T1=kl(.33,1.53,.69,.99),Qg=w1(T1),E1=_1(Qg),S1=t=>(t*=2)<1?.5*Qg(t):.5*(2-Math.pow(2,-10*(t-1))),Yg=t=>1-Math.sin(Math.acos(t)),I1=w1(Yg),P1=_1(Yg),A1=t=>/^0[^.\s]+$/u.test(t);function V2(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||A1(t):!0}let Np=kt;const R1=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),C1=t=>e=>typeof e=="string"&&e.startsWith(t),k1=C1("--"),M2=C1("var(--"),Xg=t=>M2(t)?L2.test(t.split("/*")[0].trim()):!1,L2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,U2=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F2(t){const e=U2.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function x1(t,e,n=1){const[r,i]=F2(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return R1(o)?parseFloat(o):o}return Xg(i)?x1(i,e,n+1):i}const si=(t,e,n)=>n>e?e:n<t?t:n,Vo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},al={...Vo,transform:t=>si(0,1,t)},Tu={...Vo,default:1},xl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rr=xl("deg"),Mn=xl("%"),re=xl("px"),j2=xl("vh"),B2=xl("vw"),Y0={...Mn,parse:t=>Mn.parse(t)/100,transform:t=>Mn.transform(t*100)},$2=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),X0=t=>t===Vo||t===re,J0=(t,e)=>parseFloat(t.split(", ")[e]),Z0=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return J0(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?J0(s[1],t):0}},z2=new Set(["x","y","z"]),H2=Cl.filter(t=>!z2.has(t));function W2(t){const e=[];return H2.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const _o={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Z0(4,13),y:Z0(5,14)};_o.translateX=_o.x;_o.translateY=_o.y;const b1=t=>e=>e.test(t),q2={test:t=>t==="auto",parse:t=>t},D1=[Vo,re,Mn,Rr,B2,j2,q2],ew=t=>D1.find(b1(t)),qi=new Set;let Vp=!1,Mp=!1;function O1(){if(Mp){const t=Array.from(qi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=W2(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Mp=!1,Vp=!1,qi.forEach(t=>t.complete()),qi.clear()}function N1(){qi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Mp=!0)})}function K2(){N1(),O1()}class Jg{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(qi.add(this),Vp||(Vp=!0,Se.read(N1),Se.resolveKeyframes(O1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),qi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,qi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ba=t=>Math.round(t*1e5)/1e5,Zg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G2(t){return t==null}const Q2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ey=(t,e)=>n=>!!(typeof n=="string"&&Q2.test(n)&&n.startsWith(t)||e&&!G2(n)&&Object.prototype.hasOwnProperty.call(n,e)),V1=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Zg);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Y2=t=>si(0,255,t),Xd={...Vo,transform:t=>Math.round(Y2(t))},Fi={test:ey("rgb","red"),parse:V1("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Xd.transform(t)+", "+Xd.transform(e)+", "+Xd.transform(n)+", "+ba(al.transform(r))+")"};function X2(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Lp={test:ey("#"),parse:X2,transform:Fi.transform},Fs={test:ey("hsl","hue"),parse:V1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Mn.transform(ba(e))+", "+Mn.transform(ba(n))+", "+ba(al.transform(r))+")"},It={test:t=>Fi.test(t)||Lp.test(t)||Fs.test(t),parse:t=>Fi.test(t)?Fi.parse(t):Fs.test(t)?Fs.parse(t):Lp.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fi.transform(t):Fs.transform(t)},J2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Z2(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Zg))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(J2))===null||n===void 0?void 0:n.length)||0)>0}const M1="number",L1="color",eU="var",tU="var(",tw="${}",nU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ll(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(nU,l=>(It.test(l)?(r.color.push(s),i.push(L1),n.push(It.parse(l))):l.startsWith(tU)?(r.var.push(s),i.push(eU),n.push(l)):(r.number.push(s),i.push(M1),n.push(parseFloat(l))),++s,tw)).split(tw);return{values:n,split:a,indexes:r,types:i}}function U1(t){return ll(t).values}function F1(t){const{split:e,types:n}=ll(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===M1?s+=ba(i[o]):a===L1?s+=It.transform(i[o]):s+=i[o]}return s}}const rU=t=>typeof t=="number"?0:t;function iU(t){const e=U1(t);return F1(t)(e.map(rU))}const oi={test:Z2,parse:U1,createTransformer:F1,getAnimatableNone:iU},sU=new Set(["brightness","contrast","saturate","opacity"]);function oU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Zg)||[];if(!r)return t;const i=n.replace(r,"");let s=sU.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const aU=/\b([a-z-]*)\(.*?\)/gu,Up={...oi,getAnimatableNone:t=>{const e=t.match(aU);return e?e.map(oU).join(" "):t}},lU={borderWidth:re,borderTopWidth:re,borderRightWidth:re,borderBottomWidth:re,borderLeftWidth:re,borderRadius:re,radius:re,borderTopLeftRadius:re,borderTopRightRadius:re,borderBottomRightRadius:re,borderBottomLeftRadius:re,width:re,maxWidth:re,height:re,maxHeight:re,top:re,right:re,bottom:re,left:re,padding:re,paddingTop:re,paddingRight:re,paddingBottom:re,paddingLeft:re,margin:re,marginTop:re,marginRight:re,marginBottom:re,marginLeft:re,backgroundPositionX:re,backgroundPositionY:re},uU={rotate:Rr,rotateX:Rr,rotateY:Rr,rotateZ:Rr,scale:Tu,scaleX:Tu,scaleY:Tu,scaleZ:Tu,skew:Rr,skewX:Rr,skewY:Rr,distance:re,translateX:re,translateY:re,translateZ:re,x:re,y:re,z:re,perspective:re,transformPerspective:re,opacity:al,originX:Y0,originY:Y0,originZ:re},nw={...Vo,transform:Math.round},ty={...lU,...uU,zIndex:nw,size:re,fillOpacity:al,strokeOpacity:al,numOctaves:nw},cU={...ty,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:Up,WebkitFilter:Up},ny=t=>cU[t];function j1(t,e){let n=ny(t);return n!==Up&&(n=oi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hU=new Set(["auto","none","0"]);function dU(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!hU.has(s)&&ll(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=j1(n,i)}class B1 extends Jg{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Xg(c))){const h=x1(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$2.has(r)||e.length!==2)return;const[i,s]=e,o=ew(i),a=ew(s);if(o!==a)if(X0(o)&&X0(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)V2(e[i])&&r.push(i);r.length&&dU(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_o[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=_o[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function ry(t){return typeof t=="function"}let Ku;function fU(){Ku=void 0}const Ln={now:()=>(Ku===void 0&&Ln.set(ct.isProcessing||C2.useManualTiming?ct.timestamp:performance.now()),Ku),set:t=>{Ku=t,queueMicrotask(fU)}},rw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oi.test(t)||t==="0")&&!t.startsWith("url("));function pU(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function mU(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=rw(i,e),a=rw(s,e);return!o||!a?!1:pU(t)||(n==="spring"||ry(n))&&r}const gU=40;class $1{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ln.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>gU?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&K2(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ln.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!mU(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(Bh(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,n);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...h},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function z1(t,e){return e?t*(1e3/e):0}const yU=5;function H1(t,e,n){const r=Math.max(e-yU,0);return z1(n-t(r),e-r)}const Jd=.001,vU=.01,_U=10,wU=.05,TU=1;function EU({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=si(wU,TU,o),t=si(vU,_U,rr(t)),o<1?(i=c=>{const h=c*o,f=h*t,p=h-n,T=Fp(c,o),C=Math.exp(-f);return Jd-p/T*C},s=c=>{const f=c*o*t,p=f*n+n,T=Math.pow(o,2)*Math.pow(c,2)*t,C=Math.exp(-f),x=Fp(Math.pow(c,2),o);return(-i(c)+Jd>0?-1:1)*((p-T)*C)/x}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-Jd+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,l=IU(i,s,a);if(t=nr(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const SU=12;function IU(t,e,n){let r=n;for(let i=1;i<SU;i++)r=r-t(r)/e(r);return r}function Fp(t,e){return t*Math.sqrt(1-e*e)}const PU=["duration","bounce"],AU=["stiffness","damping","mass"];function iw(t,e){return e.some(n=>t[n]!==void 0)}function RU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!iw(t,AU)&&iw(t,PU)){const n=EU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function W1({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:h,velocity:f,isResolvedFromDuration:p}=RU({...r,velocity:-rr(r.velocity||0)}),T=f||0,C=l/(2*Math.sqrt(a*c)),x=s-i,k=rr(Math.sqrt(a/c)),_=Math.abs(x)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let v;if(C<1){const E=Fp(k,C);v=b=>{const L=Math.exp(-C*k*b);return s-L*((T+C*k*x)/E*Math.sin(E*b)+x*Math.cos(E*b))}}else if(C===1)v=E=>s-Math.exp(-k*E)*(x+(T+k*x)*E);else{const E=k*Math.sqrt(C*C-1);v=b=>{const L=Math.exp(-C*k*b),N=Math.min(E*b,300);return s-L*((T+C*k*x)*Math.sinh(N)+E*x*Math.cosh(N))/E}}return{calculatedDuration:p&&h||null,next:E=>{const b=v(E);if(p)o.done=E>=h;else{let L=0;C<1&&(L=E===0?nr(T):H1(v,E,b));const N=Math.abs(L)<=n,P=Math.abs(s-b)<=e;o.done=N&&P}return o.value=o.done?s:b,o}}}function sw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},T=g=>a!==void 0&&g<a||l!==void 0&&g>l,C=g=>a===void 0?l:l===void 0||Math.abs(a-g)<Math.abs(l-g)?a:l;let x=n*e;const k=f+x,_=o===void 0?k:o(k);_!==k&&(x=_-f);const v=g=>-x*Math.exp(-g/r),E=g=>_+v(g),b=g=>{const y=v(g),w=E(g);p.done=Math.abs(y)<=c,p.value=p.done?_:w};let L,N;const P=g=>{T(p.value)&&(L=g,N=W1({keyframes:[p.value,C(p.value)],velocity:H1(E,g,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return P(0),{calculatedDuration:null,next:g=>{let y=!1;return!N&&L===void 0&&(y=!0,b(g),P(g)),L!==void 0&&g>=L?N.next(g-L):(!y&&b(g),p)}}}const CU=kl(.42,0,1,1),kU=kl(0,0,.58,1),q1=kl(.42,0,.58,1),xU=t=>Array.isArray(t)&&typeof t[0]!="number",iy=t=>Array.isArray(t)&&typeof t[0]=="number",ow={linear:kt,easeIn:CU,easeInOut:q1,easeOut:kU,circIn:Yg,circInOut:P1,circOut:I1,backIn:Qg,backInOut:E1,backOut:T1,anticipate:S1},aw=t=>{if(iy(t)){Np(t.length===4);const[e,n,r,i]=t;return kl(e,n,r,i)}else if(typeof t=="string")return Np(ow[t]!==void 0),ow[t];return t},bU=(t,e)=>n=>e(t(n)),ir=(...t)=>t.reduce(bU),wo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ve=(t,e,n)=>t+(e-t)*n;function Zd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function DU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Zd(l,a,t+1/3),s=Zd(l,a,t),o=Zd(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function zc(t,e){return n=>n>0?e:t}const ef=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},OU=[Lp,Fi,Fs],NU=t=>OU.find(e=>e.test(t));function lw(t){const e=NU(t);if(!e)return!1;let n=e.parse(t);return e===Fs&&(n=DU(n)),n}const uw=(t,e)=>{const n=lw(t),r=lw(e);if(!n||!r)return zc(t,e);const i={...n};return s=>(i.red=ef(n.red,r.red,s),i.green=ef(n.green,r.green,s),i.blue=ef(n.blue,r.blue,s),i.alpha=Ve(n.alpha,r.alpha,s),Fi.transform(i))},jp=new Set(["none","hidden"]);function VU(t,e){return jp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function MU(t,e){return n=>Ve(t,e,n)}function sy(t){return typeof t=="number"?MU:typeof t=="string"?Xg(t)?zc:It.test(t)?uw:FU:Array.isArray(t)?K1:typeof t=="object"?It.test(t)?uw:LU:zc}function K1(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>sy(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function LU(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=sy(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function UU(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const FU=(t,e)=>{const n=oi.createTransformer(e),r=ll(t),i=ll(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?jp.has(t)&&!i.values.length||jp.has(e)&&!r.values.length?VU(t,e):ir(K1(UU(r,i),i.values),n):zc(t,e)};function G1(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ve(t,e,n):sy(t)(t,e)}function jU(t,e,n){const r=[],i=n||G1,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||kt:e;a=ir(l,a)}r.push(a)}return r}function BU(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Np(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=jU(e,r,i),a=o.length,l=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const f=wo(t[h],t[h+1],c);return o[h](f)};return n?c=>l(si(t[0],t[s-1],c)):l}function $U(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=wo(0,e,r);t.push(Ve(n,1,i))}}function zU(t){const e=[0];return $U(e,t.length-1),e}function HU(t,e){return t.map(n=>n*e)}function WU(t,e){return t.map(()=>e||q1).splice(0,t.length-1)}function Hc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=xU(r)?r.map(aw):aw(r),s={done:!1,value:e[0]},o=HU(n&&n.length===e.length?n:zU(e),t),a=BU(o,e,{ease:Array.isArray(i)?i:WU(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const cw=2e4;function qU(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<cw;)e+=n,r=t.next(e);return e>=cw?1/0:e}const KU=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Se.update(e,!0),stop:()=>ii(e),now:()=>ct.isProcessing?ct.timestamp:Ln.now()}},GU={decay:sw,inertia:sw,tween:Hc,keyframes:Hc,spring:W1},QU=t=>t/100;class oy extends $1{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Jg,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=ry(n)?n:GU[n]||Hc;let l,c;a!==Hc&&typeof e[0]!="number"&&(l=ir(QU,G1(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=qU(h));const{calculatedDuration:f}=h,p=f+i,T=p*(r+1)-i;return{generator:h,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:T}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:g}=this.options;return{done:!0,value:g[g.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:T,repeatType:C,repeatDelay:x,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-p*(this.speed>=0?1:-1),v=this.speed>=0?_<0:_>h;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let E=this.currentTime,b=s;if(T){const g=Math.min(this.currentTime,h)/f;let y=Math.floor(g),w=g%1;!w&&g>=1&&(w=1),w===1&&y--,y=Math.min(y,T+1),!!(y%2)&&(C==="reverse"?(w=1-w,x&&(w-=x/f)):C==="mirror"&&(b=o)),E=si(0,1,w)*f}const L=v?{done:!1,value:l[0]}:b.next(E);a&&(L.value=a(L.value));let{done:N}=L;!v&&c!==null&&(N=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return P&&i!==void 0&&(L.value=Bh(l,this.options,i)),k&&k(L.value),P&&this.finish(),L}get duration(){const{resolved:e}=this;return e?rr(e.calculatedDuration):0}get time(){return rr(this.currentTime)}set time(e){e=nr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=rr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=KU,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Q1=new Set(["opacity","clipPath","filter","transform"]),YU=10,XU=(t,e)=>{let n="";const r=Math.max(Math.round(e/YU),2);for(let i=0;i<r;i++)n+=t(wo(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function ay(t){let e;return()=>(e===void 0&&(e=t()),e)}const JU={linearEasing:void 0};function ZU(t,e){const n=ay(t);return()=>{var r;return(r=JU[e])!==null&&r!==void 0?r:n()}}const Wc=ZU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function Y1(t){return!!(typeof t=="function"&&Wc()||!t||typeof t=="string"&&(t in Bp||Wc())||iy(t)||Array.isArray(t)&&t.every(Y1))}const pa=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Bp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pa([0,.65,.55,1]),circOut:pa([.55,0,1,.45]),backIn:pa([.31,.01,.66,-.59]),backOut:pa([.33,1.53,.69,.99])};function X1(t,e){if(t)return typeof t=="function"&&Wc()?XU(t,e):iy(t)?pa(t):Array.isArray(t)?t.map(n=>X1(n,e)||Bp.easeOut):Bp[t]}function eF(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const h=X1(a,i);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function hw(t,e){t.timeline=e,t.onfinish=null}const tF=ay(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),qc=10,nF=2e4;function rF(t){return ry(t.type)||t.type==="spring"||!Y1(t.ease)}function iF(t,e){const n=new oy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<nF;)r=n.sample(s),i.push(r.value),s+=qc;return{times:void 0,keyframes:i,duration:s-qc,ease:"linear"}}const J1={anticipate:S1,backInOut:E1,circInOut:P1};function sF(t){return t in J1}class dw extends $1{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new B1(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:c,startTime:h}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&Wc()&&sF(o)&&(o=J1[o]),rF(this.options)){const{onComplete:p,onUpdate:T,motionValue:C,element:x,...k}=this.options,_=iF(e,k);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,s=_.times,o=_.ease,a="keyframes"}const f=eF(l.owner.current,c,e,{...this.options,duration:i,times:s,ease:o});return f.startTime=h??this.calcStartTime(),this.pendingTimeline?(hw(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;l.set(Bh(e,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return rr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return rr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=nr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return kt;const{animation:r}=n;hw(r,e)}return kt}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:h,onComplete:f,element:p,...T}=this.options,C=new oy({...T,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),x=nr(this.time);c.setWithVelocity(C.sample(x-qc).value,C.sample(x).value,qc)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return tF()&&r&&Q1.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const oF=ay(()=>window.ScrollTimeline!==void 0);class aF{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>oF()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function lF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const ly=(t,e,n,r={},i,s)=>o=>{const a=Gg(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-nr(l);let h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};lF(a)||(h={...h,...R2(t,h)}),h.duration&&(h.duration=nr(h.duration)),h.repeatDelay&&(h.repeatDelay=nr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Bh(h.keyframes,a);if(p!==void 0)return Se.update(()=>{h.onUpdate(p),h.onComplete()}),new aF([])}return!s&&dw.supports(h)?new dw(h):new oy(h)},uF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),cF=t=>Op(t)?t[t.length-1]||0:t;function uy(t,e){t.indexOf(e)===-1&&t.push(e)}function cy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class hy{constructor(){this.subscriptions=[]}add(e){return uy(this.subscriptions,e),()=>cy(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fw=30,hF=t=>!isNaN(parseFloat(t));class dF{constructor(e,n={}){this.version="11.11.9",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Ln.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new hy);const r=this.events[e].add(n);return e==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,fw);return z1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ul(t,e){return new dF(t,e)}function fF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ul(n))}function pF(t,e){const n=jh(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=cF(s[o]);fF(t,o,a)}}const $h=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mF="framerAppearId",Z1="data-"+$h(mF);function eA(t){return t.props[Z1]}const Ct=t=>!!(t&&t.getVelocity);function gF(t){return!!(Ct(t)&&t.add)}function $p(t,e){if(!t.applyWillChange)return;const n=t.getValue("willChange");if(gF(n))return n.add(e)}function yF({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function tA(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),T=l[f];if(T===void 0||h&&yF(h,f))continue;const C={delay:n,...Gg(o||{},f)};let x=!1;if(window.MotionHandoffAnimation){const _=eA(t);if(_){const v=window.MotionHandoffAnimation(_,f,Se);v!==null&&(C.startTime=v,x=!0)}}$p(t,f),p.start(ly(f,p,T,t.shouldReduceMotion&&gi.has(f)?{type:!1}:C,t,x));const k=p.animation;k&&c.push(k)}return a&&Promise.all(c).then(()=>{Se.update(()=>{a&&pF(t,a)})}),c}function zp(t,e,n={}){var r;const i=jh(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(tA(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=s;return vF(t,e,h+c,f,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,h]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function vF(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(_F).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(zp(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function _F(t,e){return t.sortNodePosition(e)}function wF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>zp(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=zp(t,e,n);else{const i=typeof e=="function"?jh(t,e,n.custom):e;r=Promise.all(tA(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const TF=Kg.length;function nA(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?nA(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<TF;n++){const r=Kg[n],i=t.props[r];(ol(i)||i===!1)&&(e[r]=i)}return e}const EF=[...qg].reverse(),SF=qg.length;function IF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>wF(t,n,r)))}function PF(t){let e=IF(t),n=pw(),r=!0;const i=l=>(c,h)=>{var f;const p=jh(t,h,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:T,transitionEnd:C,...x}=p;c={...c,...x,...C}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=nA(t.parent)||{},f=[],p=new Set;let T={},C=1/0;for(let k=0;k<SF;k++){const _=EF[k],v=n[_],E=c[_]!==void 0?c[_]:h[_],b=ol(E),L=_===l?v.isActive:null;L===!1&&(C=k);let N=E===h[_]&&E!==c[_]&&b;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),v.protectedKeys={...T},!v.isActive&&L===null||!E&&!v.prevProp||sl(E)||typeof E=="boolean")continue;const P=AF(v.prevProp,E);let g=P||_===l&&v.isActive&&!N&&b||k>C&&b,y=!1;const w=Array.isArray(E)?E:[E];let R=w.reduce(i(_),{});L===!1&&(R={});const{prevResolvedValues:A={}}=v,S={...A,...R},X=te=>{g=!0,p.has(te)&&(y=!0,p.delete(te)),v.needsAnimating[te]=!0;const V=t.getValue(te);V&&(V.liveStyle=!1)};for(const te in S){const V=R[te],O=A[te];if(T.hasOwnProperty(te))continue;let U=!1;Op(V)&&Op(O)?U=!g1(V,O):U=V!==O,U?V!=null?X(te):p.add(te):V!==void 0&&p.has(te)?X(te):v.protectedKeys[te]=!0}v.prevProp=E,v.prevResolvedValues=R,v.isActive&&(T={...T,...R}),r&&t.blockInitialAnimation&&(g=!1),g&&(!(N&&P)||y)&&f.push(...w.map(te=>({animation:te,options:{type:_}})))}if(p.size){const k={};p.forEach(_=>{const v=t.getBaseTarget(_),E=t.getValue(_);E&&(E.liveStyle=!0),k[_]=v??null}),f.push({animation:k})}let x=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(p=>{var T;return(T=p.animationState)===null||T===void 0?void 0:T.setActive(l,c)}),n[l].isActive=c;const f=o(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=pw(),r=!0}}}function AF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!g1(e,t):!1}function Ri(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pw(){return{animate:Ri(!0),whileInView:Ri(),whileHover:Ri(),whileTap:Ri(),whileDrag:Ri(),whileFocus:Ri(),exit:Ri()}}class yi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class RF extends yi{constructor(e){super(e),e.animationState||(e.animationState=PF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let CF=0;class kF extends yi{constructor(){super(...arguments),this.id=CF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const xF={animation:{Feature:RF},exit:{Feature:kF}},rA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function zh(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const bF=t=>e=>rA(e)&&t(e,zh(e));function Zn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function sr(t,e,n,r){return Zn(t,e,bF(n),r)}const mw=(t,e)=>Math.abs(t-e);function DF(t,e){const n=mw(t.x,e.x),r=mw(t.y,e.y);return Math.sqrt(n**2+r**2)}class iA{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=nf(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,T=DF(f.offset,{x:0,y:0})>=3;if(!p&&!T)return;const{point:C}=f,{timestamp:x}=ct;this.history.push({...C,timestamp:x});const{onStart:k,onMove:_}=this.handlers;p||(k&&k(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=tf(p,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:T,onSessionEnd:C,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=nf(f.type==="pointercancel"?this.lastMoveEventInfo:tf(p,this.transformPagePoint),this.history);this.startEvent&&T&&T(f,k),C&&C(f,k)},!rA(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=zh(e),a=tf(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ct;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,nf(a,this.history)),this.removeListeners=ir(sr(this.contextWindow,"pointermove",this.handlePointerMove),sr(this.contextWindow,"pointerup",this.handlePointerUp),sr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ii(this.updatePoint)}}function tf(t,e){return e?{point:e(t.point)}:t}function gw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nf({point:t},e){return{point:t,delta:gw(t,sA(e)),offset:gw(t,OF(e)),velocity:NF(e,.1)}}function OF(t){return t[0]}function sA(t){return t[t.length-1]}function NF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=sA(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>nr(e)));)n--;if(!r)return{x:0,y:0};const s=rr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function oA(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const yw=oA("dragHorizontal"),vw=oA("dragVertical");function aA(t){let e=!1;if(t==="y")e=vw();else if(t==="x")e=yw();else{const n=yw(),r=vw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function lA(){const t=aA(!0);return t?(t(),!1):!0}function js(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const uA=1e-4,VF=1-uA,MF=1+uA,cA=.01,LF=0-cA,UF=0+cA;function Jt(t){return t.max-t.min}function FF(t,e,n){return Math.abs(t-e)<=n}function _w(t,e,n,r=.5){t.origin=r,t.originPoint=Ve(e.min,e.max,t.origin),t.scale=Jt(n)/Jt(e),t.translate=Ve(n.min,n.max,t.origin)-t.originPoint,(t.scale>=VF&&t.scale<=MF||isNaN(t.scale))&&(t.scale=1),(t.translate>=LF&&t.translate<=UF||isNaN(t.translate))&&(t.translate=0)}function Da(t,e,n,r){_w(t.x,e.x,n.x,r?r.originX:void 0),_w(t.y,e.y,n.y,r?r.originY:void 0)}function ww(t,e,n){t.min=n.min+e.min,t.max=t.min+Jt(e)}function jF(t,e,n){ww(t.x,e.x,n.x),ww(t.y,e.y,n.y)}function Tw(t,e,n){t.min=e.min-n.min,t.max=t.min+Jt(e)}function Oa(t,e,n){Tw(t.x,e.x,n.x),Tw(t.y,e.y,n.y)}function BF(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ve(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ve(n,t,r.max):Math.min(t,n)),t}function Ew(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function $F(t,{top:e,left:n,bottom:r,right:i}){return{x:Ew(t.x,n,i),y:Ew(t.y,e,r)}}function Sw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function zF(t,e){return{x:Sw(t.x,e.x),y:Sw(t.y,e.y)}}function HF(t,e){let n=.5;const r=Jt(t),i=Jt(e);return i>r?n=wo(e.min,e.max-r,t.min):r>i&&(n=wo(t.min,t.max-i,e.min)),si(0,1,n)}function WF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Hp=.35;function qF(t=Hp){return t===!1?t=0:t===!0&&(t=Hp),{x:Iw(t,"left","right"),y:Iw(t,"top","bottom")}}function Iw(t,e,n){return{min:Pw(t,e),max:Pw(t,n)}}function Pw(t,e){return typeof t=="number"?t:t[e]||0}const Aw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bs=()=>({x:Aw(),y:Aw()}),Rw=()=>({min:0,max:0}),ze=()=>({x:Rw(),y:Rw()});function nn(t){return[t("x"),t("y")]}function hA({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function KF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function GF(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function rf(t){return t===void 0||t===1}function Wp({scale:t,scaleX:e,scaleY:n}){return!rf(t)||!rf(e)||!rf(n)}function bi(t){return Wp(t)||dA(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function dA(t){return Cw(t.x)||Cw(t.y)}function Cw(t){return t&&t!=="0%"}function Kc(t,e,n){const r=t-n,i=e*r;return n+i}function kw(t,e,n,r,i){return i!==void 0&&(t=Kc(t,i,r)),Kc(t,n,r)+e}function qp(t,e=0,n=1,r,i){t.min=kw(t.min,e,n,r,i),t.max=kw(t.max,e,n,r,i)}function fA(t,{x:e,y:n}){qp(t.x,e.translate,e.scale,e.originPoint),qp(t.y,n.translate,n.scale,n.originPoint)}const xw=.999999999999,bw=1.0000000000001;function QF(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zs(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,fA(t,o)),r&&bi(s.latestValues)&&zs(t,s.latestValues))}e.x<bw&&e.x>xw&&(e.x=1),e.y<bw&&e.y>xw&&(e.y=1)}function $s(t,e){t.min=t.min+e,t.max=t.max+e}function Dw(t,e,n,r,i=.5){const s=Ve(t.min,t.max,i);qp(t,e,n,s,r)}function zs(t,e){Dw(t.x,e.x,e.scaleX,e.scale,e.originX),Dw(t.y,e.y,e.scaleY,e.scale,e.originY)}function pA(t,e){return hA(GF(t.getBoundingClientRect(),e))}function YF(t,e,n){const r=pA(t,n),{scroll:i}=e;return i&&($s(r.x,i.offset.x),$s(r.y,i.offset.y)),r}const mA=({current:t})=>t?t.ownerDocument.defaultView:null,XF=new WeakMap;class JF{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ze(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(zh(h,"page").point)},s=(h,f)=>{const{drag:p,dragPropagation:T,onDragStart:C}=this.getProps();if(p&&!T&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=aA(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nn(k=>{let _=this.getAxisMotionValue(k).get()||0;if(Mn.test(_)){const{projection:v}=this.visualElement;if(v&&v.layout){const E=v.layout.layoutBox[k];E&&(_=Jt(E)*(parseFloat(_)/100))}}this.originPoint[k]=_}),C&&Se.postRender(()=>C(h,f)),$p(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:T,onDirectionLock:C,onDrag:x}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:k}=f;if(T&&this.currentDirection===null){this.currentDirection=ZF(k),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",f.point,k),this.updateAxis("y",f.point,k),this.visualElement.render(),x&&x(h,f)},a=(h,f)=>this.stop(h,f),l=()=>nn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new iA(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:mA(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Se.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Eu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=BF(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&js(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=$F(i.layoutBox,n):this.constraints=!1,this.elastic=qF(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&nn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=WF(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!js(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=YF(r,i.root,this.visualElement.getTransformPagePoint());let o=zF(i.layout.layoutBox,s);if(n){const a=n(KF(o));this.hasMutatedConstraints=!!a,a&&(o=hA(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=nn(h=>{if(!Eu(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,T=i?40:1e7,C={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,C)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return $p(this.visualElement,e),r.start(ly(e,r,0,n,this.visualElement,!1))}stopAnimation(){nn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nn(n=>{const{drag:r}=this.getProps();if(!Eu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ve(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!js(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};nn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=HF({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nn(o=>{if(!Eu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ve(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;XF.set(this.visualElement,this);const e=this.visualElement.current,n=sr(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();js(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Se.read(r);const o=Zn(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(nn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Hp,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Eu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ZF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class ej extends yi{constructor(e){super(e),this.removeGroupControls=kt,this.removeListeners=kt,this.controls=new JF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ow=t=>(e,n)=>{t&&Se.postRender(()=>t(e,n))};class tj extends yi{constructor(){super(...arguments),this.removePointerDownListener=kt}onPointerDown(e){this.session=new iA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ow(e),onStart:Ow(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Se.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=sr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dy=F.createContext(null);function nj(){const t=F.useContext(dy);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=F.useId();F.useEffect(()=>r(i),[]);const s=F.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const gA=F.createContext({}),yA=F.createContext({}),Gu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Nw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ra={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(re.test(t))t=parseFloat(t);else return t;const n=Nw(t,e.target.x),r=Nw(t,e.target.y);return`${n}% ${r}%`}},rj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=oi.parse(t);if(i.length>5)return r;const s=oi.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ve(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}},Gc={};function ij(t){Object.assign(Gc,t)}const{schedule:fy,cancel:MB}=y1(queueMicrotask,!1);class sj extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;ij(oj),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vA(t){const[e,n]=nj(),r=F.useContext(gA);return M.jsx(sj,{...t,layoutGroup:r,switchLayoutGroup:F.useContext(yA),isPresent:e,safeToRemove:n})}const oj={borderRadius:{...ra,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ra,borderTopRightRadius:ra,borderBottomLeftRadius:ra,borderBottomRightRadius:ra,boxShadow:rj},_A=["TopLeft","TopRight","BottomLeft","BottomRight"],aj=_A.length,Vw=t=>typeof t=="string"?parseFloat(t):t,Mw=t=>typeof t=="number"||re.test(t);function lj(t,e,n,r,i,s){i?(t.opacity=Ve(0,n.opacity!==void 0?n.opacity:1,uj(r)),t.opacityExit=Ve(e.opacity!==void 0?e.opacity:1,0,cj(r))):s&&(t.opacity=Ve(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<aj;o++){const a=`border${_A[o]}Radius`;let l=Lw(e,a),c=Lw(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Mw(l)===Mw(c)?(t[a]=Math.max(Ve(Vw(l),Vw(c),r),0),(Mn.test(c)||Mn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ve(e.rotate||0,n.rotate||0,r))}function Lw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const uj=wA(0,.5,I1),cj=wA(.5,.95,kt);function wA(t,e,n){return r=>r<t?0:r>e?1:n(wo(t,e,r))}function Uw(t,e){t.min=e.min,t.max=e.max}function tn(t,e){Uw(t.x,e.x),Uw(t.y,e.y)}function Fw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jw(t,e,n,r,i){return t-=e,t=Kc(t,1/n,r),i!==void 0&&(t=Kc(t,1/i,r)),t}function hj(t,e=0,n=1,r=.5,i,s=t,o=t){if(Mn.test(e)&&(e=parseFloat(e),e=Ve(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ve(s.min,s.max,r);t===s&&(a-=e),t.min=jw(t.min,e,n,a,i),t.max=jw(t.max,e,n,a,i)}function Bw(t,e,[n,r,i],s,o){hj(t,e[n],e[r],e[i],e.scale,s,o)}const dj=["x","scaleX","originX"],fj=["y","scaleY","originY"];function $w(t,e,n,r){Bw(t.x,e,dj,n?n.x:void 0,r?r.x:void 0),Bw(t.y,e,fj,n?n.y:void 0,r?r.y:void 0)}function zw(t){return t.translate===0&&t.scale===1}function TA(t){return zw(t.x)&&zw(t.y)}function Hw(t,e){return t.min===e.min&&t.max===e.max}function pj(t,e){return Hw(t.x,e.x)&&Hw(t.y,e.y)}function Ww(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function EA(t,e){return Ww(t.x,e.x)&&Ww(t.y,e.y)}function qw(t){return Jt(t.x)/Jt(t.y)}function Kw(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class mj{constructor(){this.members=[]}add(e){uy(this.members,e),e.scheduleRender()}remove(e){if(cy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gj(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:T,skewY:C}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),T&&(r+=`skewX(${T}deg) `),C&&(r+=`skewY(${C}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const yj=(t,e)=>t.depth-e.depth;class vj{constructor(){this.children=[],this.isDirty=!1}add(e){uy(this.children,e),this.isDirty=!0}remove(e){cy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yj),this.isDirty=!1,this.children.forEach(e)}}function Qu(t){const e=Ct(t)?t.get():t;return uF(e)?e.toValue():e}function _j(t,e){const n=Ln.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ii(r),t(s-e))};return Se.read(r,!0),()=>ii(r)}function wj(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Tj(t,e,n){const r=Ct(t)?t:ul(t);return r.start(ly("",r,e,n)),r.animation}const Di={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ma=typeof window<"u"&&window.MotionDebug!==void 0,sf=["","X","Y","Z"],Ej={visibility:"hidden"},Gw=1e3;let Sj=0;function of(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function SA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=eA(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Se,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&SA(r)}function IA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Sj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ma&&(Di.totalNodes=Di.resolvedTargetDeltas=Di.recalculatedProjection=0),this.nodes.forEach(Aj),this.nodes.forEach(bj),this.nodes.forEach(Dj),this.nodes.forEach(Rj),ma&&window.MotionDebug.record(Di)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new hy),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wj(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=_j(p,250),Gu.hasAnimatedSinceResize&&(Gu.hasAnimatedSinceResize=!1,this.nodes.forEach(Yw))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:T,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||Lj,{onLayoutAnimationStart:k,onLayoutAnimationComplete:_}=h.getProps(),v=!this.targetLayout||!EA(this.targetLayout,C)||T,E=!p&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,E);const b={...Gg(x,"layout"),onPlay:k,onComplete:_};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else p||Yw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ii(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Oj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&SA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qw);return}this.isUpdating||this.nodes.forEach(kj),this.isUpdating=!1,this.nodes.forEach(xj),this.nodes.forEach(Ij),this.nodes.forEach(Pj),this.clearAllSnapshots();const a=Ln.now();ct.delta=si(0,1e3/60,a-ct.timestamp),ct.timestamp=a,ct.isProcessing=!0,Yd.update.process(ct),Yd.preRender.process(ct),Yd.render.process(ct),ct.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Cj),this.sharedNodes.forEach(Nj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!TA(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||bi(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Uj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ze();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Fj))){const{scroll:h}=this.root;h&&($s(l.x,h.offset.x),$s(l.y,h.offset.y))}return l}removeElementScroll(o){var a;const l=ze();if(tn(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&tn(l,o),$s(l.x,f.offset.x),$s(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=ze();tn(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&zs(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),bi(h.latestValues)&&zs(l,h.latestValues)}return bi(this.latestValues)&&zs(l,this.latestValues),l}removeTransform(o){const a=ze();tn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!bi(c.latestValues))continue;Wp(c.latestValues)&&c.updateSnapshot();const h=ze(),f=c.measurePageBox();tn(h,f),$w(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return bi(this.latestValues)&&$w(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ct.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ct.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ze(),this.relativeTargetOrigin=ze(),Oa(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ze(),this.targetWithTransforms=ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tn(this.target,this.layout.layoutBox),fA(this.target,this.targetDelta)):tn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ze(),this.relativeTargetOrigin=ze(),Oa(this.relativeTargetOrigin,this.target,T.target),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ma&&Di.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Wp(this.parent.latestValues)||dA(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ct.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;tn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,T=this.treeScale.y;QF(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ze());const{target:C}=a;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Fw(this.prevProjectionDelta.x,this.projectionDelta.x),Fw(this.prevProjectionDelta.y,this.projectionDelta.y)),Da(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==T||!Kw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Kw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),ma&&Di.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bs(),this.projectionDelta=Bs(),this.projectionDeltaWithTransform=Bs()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=Bs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=ze(),T=l?l.source:void 0,C=this.layout?this.layout.source:void 0,x=T!==C,k=this.getStack(),_=!k||k.members.length<=1,v=!!(x&&!_&&this.options.crossfade===!0&&!this.path.some(Mj));this.animationProgress=0;let E;this.mixTargetDelta=b=>{const L=b/1e3;Xw(f.x,o.x,L),Xw(f.y,o.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oa(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Vj(this.relativeTarget,this.relativeTargetOrigin,p,L),E&&pj(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ze()),tn(E,this.relativeTarget)),x&&(this.animationValues=h,lj(h,c,this.latestValues,L,v,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ii(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{Gu.hasAnimatedSinceResize=!0,this.currentAnimation=Tj(0,Gw,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&PA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ze();const f=Jt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=Jt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}tn(a,l),zs(a,h),Da(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mj),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&of("z",o,c,this.animationValues);for(let h=0;h<sf.length;h++)of(`rotate${sf[h]}`,o,c,this.animationValues),of(`skew${sf[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ej;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Qu(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Qu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!bi(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=gj(this.projectionDeltaWithTransform,this.treeScale,p),h&&(c.transform=h(p,c.transform));const{x:T,y:C}=this.projectionDelta;c.transformOrigin=`${T.origin*100}% ${C.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const x in Gc){if(p[x]===void 0)continue;const{correct:k,applyTo:_}=Gc[x],v=c.transform==="none"?p[x]:k(p[x],f);if(_){const E=_.length;for(let b=0;b<E;b++)c[_[b]]=v}else c[x]=v}return this.options.layoutId&&(c.pointerEvents=f===this?Qu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Qw),this.root.sharedNodes.clear()}}}function Ij(t){t.updateLayout()}function Pj(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?nn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],T=Jt(p);p.min=r[f].min,p.max=p.min+T}):PA(s,n.layoutBox,r)&&nn(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],T=Jt(r[f]);p.max=p.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+T)});const a=Bs();Da(a,r,n.layoutBox);const l=Bs();o?Da(l,t.applyTransform(i,!0),n.measuredBox):Da(l,r,n.layoutBox);const c=!TA(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:T}=f;if(p&&T){const C=ze();Oa(C,n.layoutBox,p.layoutBox);const x=ze();Oa(x,r,T.layoutBox),EA(C,x)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=C,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Aj(t){ma&&Di.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Rj(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Cj(t){t.clearSnapshot()}function Qw(t){t.clearMeasurements()}function kj(t){t.isLayoutDirty=!1}function xj(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Yw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function bj(t){t.resolveTargetDelta()}function Dj(t){t.calcProjection()}function Oj(t){t.resetSkewAndRotation()}function Nj(t){t.removeLeadSnapshot()}function Xw(t,e,n){t.translate=Ve(e.translate,0,n),t.scale=Ve(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Jw(t,e,n,r){t.min=Ve(e.min,n.min,r),t.max=Ve(e.max,n.max,r)}function Vj(t,e,n,r){Jw(t.x,e.x,n.x,r),Jw(t.y,e.y,n.y,r)}function Mj(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Lj={duration:.45,ease:[.4,0,.1,1]},Zw=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),eT=Zw("applewebkit/")&&!Zw("chrome/")?Math.round:kt;function tT(t){t.min=eT(t.min),t.max=eT(t.max)}function Uj(t){tT(t.x),tT(t.y)}function PA(t,e,n){return t==="position"||t==="preserve-aspect"&&!FF(qw(e),qw(n),.2)}function Fj(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const jj=IA({attachResizeListener:(t,e)=>Zn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),af={current:void 0},AA=IA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!af.current){const t=new jj({});t.mount(window),t.setOptions({layoutScroll:!0}),af.current=t}return af.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Bj={pan:{Feature:tj},drag:{Feature:ej,ProjectionNode:AA,MeasureLayout:vA}};function nT(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||lA())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&Se.postRender(()=>l(s,o))};return sr(t.current,n,i,{passive:!t.getProps()[r]})}class $j extends yi{mount(){this.unmount=ir(nT(this.node,!0),nT(this.node,!1))}unmount(){}}class zj extends yi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ir(Zn(this.node.current,"focus",()=>this.onFocus()),Zn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const RA=(t,e)=>e?t===e?!0:RA(t,e.parentElement):!1;function lf(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,zh(n))}class Hj extends yi{constructor(){super(...arguments),this.removeStartListeners=kt,this.removeEndListeners=kt,this.removeAccessibleListeners=kt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=sr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:f}=this.node.getProps(),p=!f&&!RA(this.node.current,a.target)?h:c;p&&Se.update(()=>p(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=sr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ir(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||lf("up",(l,c)=>{const{onTap:h}=this.node.getProps();h&&Se.postRender(()=>h(l,c))})};this.removeEndListeners(),this.removeEndListeners=Zn(this.node.current,"keyup",o),lf("down",(a,l)=>{this.startPress(a,l)})},n=Zn(this.node.current,"keydown",e),r=()=>{this.isPressing&&lf("cancel",(s,o)=>this.cancelPress(s,o))},i=Zn(this.node.current,"blur",r);this.removeAccessibleListeners=ir(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Se.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!lA()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Se.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=sr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Zn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ir(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Kp=new WeakMap,uf=new WeakMap,Wj=t=>{const e=Kp.get(t.target);e&&e(t)},qj=t=>{t.forEach(Wj)};function Kj({root:t,...e}){const n=t||document;uf.has(n)||uf.set(n,{});const r=uf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(qj,{root:t,...e})),r[i]}function Gj(t,e,n){const r=Kj(e);return Kp.set(t,n),r.observe(t),()=>{Kp.delete(t),r.unobserve(t)}}const Qj={some:0,all:1};class Yj extends yi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Qj[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(l)};return Gj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Xj(e,n))&&this.startObserver()}unmount(){}}function Xj({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Jj={inView:{Feature:Yj},tap:{Feature:Hj},focus:{Feature:zj},hover:{Feature:$j}},Zj={layout:{ProjectionNode:AA,MeasureLayout:vA}},CA=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Hh=F.createContext({}),py=typeof window<"u",e4=py?F.useLayoutEffect:F.useEffect,kA=F.createContext({strict:!1});function t4(t,e,n,r,i){var s,o;const{visualElement:a}=F.useContext(Hh),l=F.useContext(kA),c=F.useContext(dy),h=F.useContext(CA).reducedMotion,f=F.useRef();r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:h}));const p=f.current,T=F.useContext(yA);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&n4(f.current,n,i,T),F.useInsertionEffect(()=>{p&&p.update(n,c)});const C=n[Z1],x=F.useRef(!!C&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,C))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,C)));return e4(()=>{p&&(window.MotionIsMounted=!0,p.updateFeatures(),fy.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),F.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,C)}),x.current=!1))}),p}function n4(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xA(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&js(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function xA(t){if(t)return t.options.allowProjection!==!1?t.projection:xA(t.parent)}function r4(t,e,n){return F.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):js(n)&&(n.current=r))},[e])}function Wh(t){return sl(t.animate)||Kg.some(e=>ol(t[e]))}function bA(t){return!!(Wh(t)||t.variants)}function i4(t,e){if(Wh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ol(n)?n:void 0,animate:ol(r)?r:void 0}}return t.inherit!==!1?e:{}}function s4(t){const{initial:e,animate:n}=i4(t,F.useContext(Hh));return F.useMemo(()=>({initial:e,animate:n}),[rT(e),rT(n)])}function rT(t){return Array.isArray(t)?t.join(" "):t}const iT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},To={};for(const t in iT)To[t]={isEnabled:e=>iT[t].some(n=>!!e[n])};function o4(t){for(const e in t)To[e]={...To[e],...t[e]}}const a4=Symbol.for("motionComponentSymbol");function l4({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&o4(t);function s(a,l){let c;const h={...F.useContext(CA),...a,layoutId:u4(a)},{isStatic:f}=h,p=s4(a),T=r(a,f);if(!f&&py){c4();const C=h4(h);c=C.MeasureLayout,p.visualElement=t4(i,T,h,e,C.ProjectionNode)}return M.jsxs(Hh.Provider,{value:p,children:[c&&p.visualElement?M.jsx(c,{visualElement:p.visualElement,...h}):null,n(i,a,r4(T,p.visualElement,l),T,f,p.visualElement)]})}const o=F.forwardRef(s);return o[a4]=i,o}function u4({layoutId:t}){const e=F.useContext(gA).id;return e&&t!==void 0?e+"-"+t:t}function c4(t,e){F.useContext(kA).strict}function h4(t){const{drag:e,layout:n}=To;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const d4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function my(t){return typeof t!="string"||t.includes("-")?!1:!!(d4.indexOf(t)>-1||/[A-Z]/u.test(t))}function DA(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const OA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NA(t,e,n,r){DA(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(OA.has(i)?i:$h(i),e.attrs[i])}function VA(t,{layout:e,layoutId:n}){return gi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Gc[t]||t==="opacity")}function gy(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Ct(i[o])||e.style&&Ct(e.style[o])||VA(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),s}function MA(t,e,n){const r=gy(t,e,n);for(const i in t)if(Ct(t[i])||Ct(e[i])){const s=Cl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function f4(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}function p4(t){if(gi.has(t))return"transform";if(Q1.has(t))return $h(t)}function m4({applyWillChange:t=!1,scrapeMotionValuesFromProps:e,createRenderState:n,onMount:r},i,s,o,a){const l={latestValues:g4(i,s,o,a?!1:t,e),renderState:n()};return r&&(l.mount=c=>r(i,c,l)),l}const LA=t=>(e,n)=>{const r=F.useContext(Hh),i=F.useContext(dy),s=()=>m4(t,e,r,i,n);return n?s():f4(s)};function sT(t,e,n){const r=Array.isArray(e)?e:[e];for(let i=0;i<r.length;i++){const s=Wg(t,r[i]);if(s){const{transitionEnd:o,transition:a,...l}=s;n(l,o)}}}function g4(t,e,n,r,i){var s;const o={},a=new Set,l=r&&((s=t.style)===null||s===void 0?void 0:s.willChange)===void 0,c=i(t,{});for(const k in c)o[k]=Qu(c[k]);let{initial:h,animate:f}=t;const p=Wh(t),T=bA(t);e&&T&&!p&&t.inherit!==!1&&(h===void 0&&(h=e.initial),f===void 0&&(f=e.animate));let C=n?n.initial===!1:!1;C=C||h===!1;const x=C?f:h;return x&&typeof x!="boolean"&&!sl(x)&&sT(t,x,(k,_)=>{for(const v in k){let E=k[v];if(Array.isArray(E)){const b=C?E.length-1:0;E=E[b]}E!==null&&(o[v]=E)}for(const v in _)o[v]=_[v]}),l&&(f&&h!==!1&&!sl(f)&&sT(t,f,k=>{for(const _ in k){const v=p4(_);v&&a.add(v)}}),a.size&&(o.willChange=Array.from(a).join(","))),o}const yy=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),UA=()=>({...yy(),attrs:{}}),FA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,y4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},v4=Cl.length;function _4(t,e,n){let r="",i=!0;for(let s=0;s<v4;s++){const o=Cl[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=FA(a,ty[o]);if(!l){i=!1;const h=y4[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function vy(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(gi.has(l)){o=!0;continue}else if(k1(l)){i[l]=c;continue}else{const h=FA(c,ty[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=_4(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}function oT(t,e,n){return typeof t=="string"?t:re.transform(e+n*t)}function w4(t,e,n){const r=oT(e,t.x,t.width),i=oT(n,t.y,t.height);return`${r} ${i}`}const T4={offset:"stroke-dashoffset",array:"stroke-dasharray"},E4={offset:"strokeDashoffset",array:"strokeDasharray"};function S4(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?T4:E4;t[s.offset]=re.transform(-r);const o=re.transform(e),a=re.transform(n);t[s.array]=`${o} ${a}`}function _y(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},h,f){if(vy(t,c,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:T,dimensions:C}=t;p.transform&&(C&&(T.transform=p.transform),delete p.transform),C&&(i!==void 0||s!==void 0||T.transform)&&(T.transformOrigin=w4(C,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&S4(p,o,a,l,!1)}const wy=t=>typeof t=="string"&&t.toLowerCase()==="svg",I4={useVisualState:LA({scrapeMotionValuesFromProps:MA,createRenderState:UA,onMount:(t,e,{renderState:n,latestValues:r})=>{Se.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Se.render(()=>{_y(n,r,wy(e.tagName),t.transformTemplate),NA(e,n)})}})},P4={useVisualState:LA({applyWillChange:!0,scrapeMotionValuesFromProps:gy,createRenderState:yy})};function jA(t,e,n){for(const r in e)!Ct(e[r])&&!VA(r,n)&&(t[r]=e[r])}function A4({transformTemplate:t},e){return F.useMemo(()=>{const n=yy();return vy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function R4(t,e){const n=t.style||{},r={};return jA(r,n,t),Object.assign(r,A4(t,e)),r}function C4(t,e){const n={},r=R4(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const k4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||k4.has(t)}let BA=t=>!Qc(t);function x4(t){t&&(BA=e=>e.startsWith("on")?!Qc(e):t(e))}try{x4(require("@emotion/is-prop-valid").default)}catch{}function b4(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(BA(i)||n===!0&&Qc(i)||!e&&!Qc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function D4(t,e,n,r){const i=F.useMemo(()=>{const s=UA();return _y(s,e,wy(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};jA(s,t.style,t),i.style={...s,...i.style}}return i}function O4(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(my(n)?D4:C4)(r,s,o,n),c=b4(r,typeof n=="string",t),h=n!==F.Fragment?{...c,...l,ref:i}:{},{children:f}=r,p=F.useMemo(()=>Ct(f)?f.get():f,[f]);return F.createElement(n,{...h,children:p})}}function N4(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...my(r)?I4:P4,preloadedFeatures:t,useRender:O4(i),createVisualElement:e,Component:r};return l4(o)}}const Gp={current:null},$A={current:!1};function V4(){if($A.current=!0,!!py)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Gp.current=t.matches;t.addListener(e),e()}else Gp.current=!1}function M4(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ct(i))t.addValue(r,i);else if(Ct(s))t.addValue(r,ul(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ul(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const aT=new WeakMap,L4=[...D1,It,oi],U4=t=>L4.find(b1(t)),lT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class F4{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Jg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ln.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Se.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Wh(n),this.isVariantNode=bA(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const T=f[p];l[p]!==void 0&&Ct(T)&&T.set(l[p],!1)}}mount(e){this.current=e,aT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),$A.current||V4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){aT.delete(this.current),this.projection&&this.projection.unmount(),ii(this.notifyUpdate),ii(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=gi.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Se.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in To){const n=To[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ze()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<lT.length;r++){const i=lT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=M4(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ul(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(R1(i)||A1(i))?i=parseFloat(i):!U4(i)&&oi.test(n)&&(i=j1(e,n)),this.setBaseTarget(e,Ct(i)?i.get():i)),Ct(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Wg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ct(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new hy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class zA extends F4{constructor(){super(...arguments),this.KeyframeResolver=B1}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function j4(t){return window.getComputedStyle(t)}class B4 extends zA{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=DA}readValueFromInstance(e,n){if(gi.has(n)){const r=ny(n);return r&&r.default||0}else{const r=j4(e),i=(k1(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pA(e,n)}build(e,n,r){vy(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return gy(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ct(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class $4 extends zA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ze}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(gi.has(n)){const r=ny(n);return r&&r.default||0}return n=OA.has(n)?n:$h(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return MA(e,n,r)}build(e,n,r){_y(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){NA(e,n,r,i)}mount(e){this.isSVGTag=wy(e.tagName),super.mount(e)}}const z4=(t,e)=>my(t)?new $4(e):new B4(e,{allowProjection:t!==F.Fragment}),H4=N4({...xF,...Jj,...Bj,...Zj},z4),Tn=E2(H4);function W4(){const[t]=xo(mi),e=fh();em.useEffect(()=>{t&&e("/")},[t,e]);const n={hidden:{opacity:0,scale:1},visible:{opacity:1,scale:1,transition:{duration:.5,ease:"easeOut"}}},r={hover:{scale:1.07,transition:{duration:.3,type:"spring",stiffness:400}}};return M.jsx(Tn.div,{initial:"hidden",animate:"visible",variants:n,className:"flex items-center justify-center min-h-screen bg-gradient-to-r from-red-900 to-red-700",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},children:M.jsxs(Tn.div,{className:"p-8 bg-white/20 backdrop-blur-lg rounded-lg shadow-md",initial:{y:50,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2,duration:.6,ease:"easeOut"}},children:[M.jsx("div",{className:"flex justify-center mb-4",children:M.jsx("img",{src:T2,alt:"Thapar University Logo",className:"h-24 w-auto bg-white p-2 rounded-md"})}),M.jsx("h2",{className:"text-2xl font-bold text-white mb-4 text-center",children:"Room Sync Management App"}),M.jsx(Tn.button,{variants:r,whileHover:"hover",onClick:_2,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full shadow-md flex justify-center",children:M.jsxs("div",{className:"flex",children:[M.jsxs("svg",{className:"h-6 w-6 mr-2",fill:"#fff",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:[M.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),M.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),M.jsxs("g",{id:"SVGRepo_iconCarrier",children:[M.jsx("title",{children:"ionicons-v5_logos"}),M.jsx("path",{d:"M473.16,221.48l-2.26-9.59H262.46v88.22H387c-12.93,61.4-72.93,93.72-121.94,93.72-35.66,0-73.25-15-98.13-39.11a140.08,140.08,0,0,1-41.8-98.88c0-37.16,16.7-74.33,41-98.78s61-38.13,97.49-38.13c41.79,0,71.74,22.19,82.94,32.31l62.69-62.36C390.86,72.72,340.34,32,261.6,32h0c-60.75,0-119,23.27-161.58,65.71C58,139.5,36.25,199.93,36.25,256S56.83,369.48,97.55,411.6C141.06,456.52,202.68,480,266.13,480c57.73,0,112.45-22.62,151.45-63.66,38.34-40.4,58.17-96.3,58.17-154.9C475.75,236.77,473.27,222.12,473.16,221.48Z"})]})]}),"Sign in with Google"]})})]})})}function HA(){const[t]=xo(mi),[e,n]=F.useState(!1);F.useEffect(()=>{localStorage.getItem("theme")==="dark"&&(n(!0),document.documentElement.classList.add("dark"))},[]);const r=()=>{e?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")),n(!e)};return M.jsx("nav",{className:"bg-gradient-to-r from-blue-600 to-blue-400 dark:from-gray-800 dark:to-gray-600 shadow-lg p-4 transition-colors",children:M.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[M.jsxs(Nd,{to:"/",className:"text-white dark:text-gray-100 text-2xl font-extrabold tracking-tight hover:text-gray-100 transition-colors",children:["Room",M.jsx("span",{className:"text-yellow-400",children:" Sync "})]}),M.jsxs("div",{className:"flex items-center space-x-6",children:[t?M.jsxs(M.Fragment,{children:[M.jsx(Nd,{to:"/",className:"text-white dark:text-gray-100 text-lg hover:text-yellow-300 transition duration-300",children:"Dashboard"}),M.jsx("button",{onClick:w2,className:"bg-red-500 hover:bg-red-600 dark:bg-red-700 dark:hover:bg-red-800 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300",children:"Logout"})]}):M.jsx(Nd,{to:"/login",className:"bg-green-500 hover:bg-green-600 dark:bg-green-700 dark:hover:bg-green-800 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition duration-300",children:"Login"}),M.jsx("button",{onClick:r,className:"text-white dark:text-gray-100 bg-gray-800 dark:bg-gray-500 p-2 rounded-full focus:outline-none transition duration-300",children:e?M.jsx("span",{className:"h-2 w-6 text-yellow-400",children:"🌞︎︎"}):M.jsx("span",{className:"h-2 w-6 text-blue-300",children:"🌙"})})]})]})})}var WA={},qA={exports:{}},q4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",K4=q4,G4=K4;function KA(){}function GA(){}GA.resetWarningCache=KA;var Q4=function(){function t(r,i,s,o,a,l){if(l!==G4){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:GA,resetWarningCache:KA};return n.PropTypes=n,n};qA.exports=Q4();var bl=qA.exports;function Y4(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=t.length;if(e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var X4=Y4,QA={},uT=function(){function t(e,n){var r=[],i=!0,s=!1,o=void 0;try{for(var a=e[Symbol.iterator](),l;!(i=(l=a.next()).done)&&(r.push(l.value),!(n&&r.length===n));i=!0);}catch(c){s=!0,o=c}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return r}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),J4=function(t){var e=t.data,n=t.multiSection;function r(l){for(l===null?l=0:l++;l<e.length&&e[l]===0;)l++;return l===e.length?null:l}function i(l){for(l===null?l=e.length-1:l--;l>=0&&e[l]===0;)l--;return l===-1?null:l}function s(l){var c=uT(l,2),h=c[0],f=c[1];return n?f===null||f===e[h]-1?(h=r(h),h===null?[null,null]:[h,0]):[h,f+1]:e===0||f===e-1?[null,null]:f===null?[null,0]:[null,f+1]}function o(l){var c=uT(l,2),h=c[0],f=c[1];return n?f===null||f===0?(h=i(h),h===null?[null,null]:[h,e[h]-1]):[h,f-1]:e===0||f===0?[null,null]:f===null?[null,e-1]:[null,f-1]}function a(l){return s(l)[1]===null}return{next:s,prev:o,isLast:a}},Qp={exports:{}},Z4=Object.prototype.propertyIsEnumerable;function eB(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function tB(t){var e=Object.getOwnPropertyNames(t);return Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t))),e.filter(function(n){return Z4.call(t,n)})}var nB=Object.assign||function(t,e){for(var n,r,i=eB(t),s=1;s<arguments.length;s++){n=arguments[s],r=tB(Object(n));for(var o=0;o<r.length;o++)i[r[o]]=n[r[o]]}return i};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function l(c,h){var f=[],p=!0,T=!1,C=void 0;try{for(var x=c[Symbol.iterator](),k;!(p=(k=x.next()).done)&&(f.push(k.value),!(h&&f.length===h));p=!0);}catch(_){T=!0,C=_}finally{try{!p&&x.return&&x.return()}finally{if(T)throw C}}return f}return function(c,h){if(Array.isArray(c))return c;if(Symbol.iterator in Object(c))return l(c,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function r(l){return l&&l.__esModule?l:{default:l}}function i(l){if(Array.isArray(l)){for(var c=0,h=Array(l.length);c<l.length;c++)h[c]=l[c];return h}else return Array.from(l)}var s=nB,o=r(s),a=function(c){return c};e.default=function(l){var c=Array.isArray(l)&&l.length===2?l:[l,null],h=n(c,2),f=h[0],p=h[1];return function(T){for(var C=arguments.length,x=Array(C>1?C-1:0),k=1;k<C;k++)x[k-1]=arguments[k];var _=x.map(function(v){return f[v]}).filter(a);return typeof _[0]=="string"||typeof p=="function"?{key:T,className:p?p.apply(void 0,i(_)):_.join(" ")}:{key:T,style:o.default.apply(void 0,[{}].concat(i(_)))}}},t.exports=e.default})(Qp,Qp.exports);var rB=Qp.exports,YA={},qh={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function e(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(s){return typeof s}:e=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e(r)}function n(r,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r===i)return!1;var o=Object.keys(r),a=Object.keys(i);if(o.length!==a.length)return!0;var l={},c,h;for(c=0,h=s.length;c<h;c++)l[s[c]]=!0;for(c=0,h=o.length;c<h;c++){var f=o[c],p=r[f],T=i[f];if(p!==T){if(!l[f]||p===null||T===null||e(p)!=="object"||e(T)!=="object")return!0;var C=Object.keys(p),x=Object.keys(T);if(C.length!==x.length)return!0;for(var k=0,_=C.length;k<_;k++){var v=C[k];if(p[v]!==T[v])return!0}}}return!1}})(qh);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(F),n=i(bl),r=i(qh);function i(b){return b&&b.__esModule?b:{default:b}}function s(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return s=function(){return b},b}function o(b){if(b&&b.__esModule)return b;if(b===null||a(b)!=="object"&&typeof b!="function")return{default:b};var L=s();if(L&&L.has(b))return L.get(b);var N={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in b)if(Object.prototype.hasOwnProperty.call(b,g)){var y=P?Object.getOwnPropertyDescriptor(b,g):null;y&&(y.get||y.set)?Object.defineProperty(N,g,y):N[g]=b[g]}return N.default=b,L&&L.set(b,N),N}function a(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(N){return typeof N}:a=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},a(b)}function l(b,L){if(!(b instanceof L))throw new TypeError("Cannot call a class as a function")}function c(b,L){for(var N=0;N<L.length;N++){var P=L[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}function h(b,L,N){return L&&c(b.prototype,L),b}function f(b){return function(){var L=x(b),N;if(C()){var P=x(this).constructor;N=Reflect.construct(L,arguments,P)}else N=L.apply(this,arguments);return p(this,N)}}function p(b,L){return L&&(a(L)==="object"||typeof L=="function")?L:T(b)}function T(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function C(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function x(b){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},x(b)}function k(b,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(L&&L.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),L&&_(b,L)}function _(b,L){return _=Object.setPrototypeOf||function(P,g){return P.__proto__=g,P},_(b,L)}function v(b,L,N){return L in b?Object.defineProperty(b,L,{value:N,enumerable:!0,configurable:!0,writable:!0}):b[L]=N,b}var E=function(b){k(N,b);var L=f(N);function N(){return l(this,N),L.apply(this,arguments)}return h(N,[{key:"shouldComponentUpdate",value:function(g){return(0,r.default)(g,this.props)}},{key:"render",value:function(){var g=this.props,y=g.section,w=g.renderSectionTitle,R=g.theme,A=g.sectionKeyPrefix,S=w(y);return S?e.default.createElement("div",R("".concat(A,"title"),"sectionTitle"),S):null}}]),N}(e.Component);t.default=E,v(E,"propTypes",{section:n.default.any.isRequired,renderSectionTitle:n.default.func.isRequired,theme:n.default.func.isRequired,sectionKeyPrefix:n.default.string.isRequired})})(YA);var XA={},JA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(F),n=i(bl),r=i(qh);function i(y){return y&&y.__esModule?y:{default:y}}function s(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return s=function(){return y},y}function o(y){if(y&&y.__esModule)return y;if(y===null||a(y)!=="object"&&typeof y!="function")return{default:y};var w=s();if(w&&w.has(y))return w.get(y);var R={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in y)if(Object.prototype.hasOwnProperty.call(y,S)){var X=A?Object.getOwnPropertyDescriptor(y,S):null;X&&(X.get||X.set)?Object.defineProperty(R,S,X):R[S]=y[S]}return R.default=y,w&&w.set(y,R),R}function a(y){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(R){return typeof R}:a=function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},a(y)}function l(){return l=Object.assign||function(y){for(var w=1;w<arguments.length;w++){var R=arguments[w];for(var A in R)Object.prototype.hasOwnProperty.call(R,A)&&(y[A]=R[A])}return y},l.apply(this,arguments)}function c(y,w){var R=Object.keys(y);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(y);w&&(A=A.filter(function(S){return Object.getOwnPropertyDescriptor(y,S).enumerable})),R.push.apply(R,A)}return R}function h(y){for(var w=1;w<arguments.length;w++){var R=arguments[w]!=null?arguments[w]:{};w%2?c(Object(R),!0).forEach(function(A){P(y,A,R[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(R)):c(Object(R)).forEach(function(A){Object.defineProperty(y,A,Object.getOwnPropertyDescriptor(R,A))})}return y}function f(y,w){if(y==null)return{};var R=p(y,w),A,S;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(y);for(S=0;S<X.length;S++)A=X[S],!(w.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(y,A)&&(R[A]=y[A])}return R}function p(y,w){if(y==null)return{};var R={},A=Object.keys(y),S,X;for(X=0;X<A.length;X++)S=A[X],!(w.indexOf(S)>=0)&&(R[S]=y[S]);return R}function T(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")}function C(y,w){for(var R=0;R<w.length;R++){var A=w[R];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}function x(y,w,R){return w&&C(y.prototype,w),y}function k(y){return function(){var w=b(y),R;if(E()){var A=b(this).constructor;R=Reflect.construct(w,arguments,A)}else R=w.apply(this,arguments);return _(this,R)}}function _(y,w){return w&&(a(w)==="object"||typeof w=="function")?w:v(y)}function v(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function E(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(y){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},b(y)}function L(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(w&&w.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),w&&N(y,w)}function N(y,w){return N=Object.setPrototypeOf||function(A,S){return A.__proto__=S,A},N(y,w)}function P(y,w,R){return w in y?Object.defineProperty(y,w,{value:R,enumerable:!0,configurable:!0,writable:!0}):y[w]=R,y}var g=function(y){L(R,y);var w=k(R);function R(){var A;T(this,R);for(var S=arguments.length,X=new Array(S),ae=0;ae<S;ae++)X[ae]=arguments[ae];return A=w.call.apply(w,[this].concat(X)),P(v(A),"storeItemReference",function(ce){ce!==null&&(A.item=ce)}),P(v(A),"onMouseEnter",function(ce){var te=A.props,V=te.sectionIndex,O=te.itemIndex;A.props.onMouseEnter(ce,{sectionIndex:V,itemIndex:O})}),P(v(A),"onMouseLeave",function(ce){var te=A.props,V=te.sectionIndex,O=te.itemIndex;A.props.onMouseLeave(ce,{sectionIndex:V,itemIndex:O})}),P(v(A),"onMouseDown",function(ce){var te=A.props,V=te.sectionIndex,O=te.itemIndex;A.props.onMouseDown(ce,{sectionIndex:V,itemIndex:O})}),P(v(A),"onClick",function(ce){var te=A.props,V=te.sectionIndex,O=te.itemIndex;A.props.onClick(ce,{sectionIndex:V,itemIndex:O})}),A}return x(R,[{key:"shouldComponentUpdate",value:function(S){return(0,r.default)(S,this.props,["renderItemData"])}},{key:"render",value:function(){var S=this.props,X=S.isHighlighted,ae=S.item,ce=S.renderItem,te=S.renderItemData,V=f(S,["isHighlighted","item","renderItem","renderItemData"]);return delete V.sectionIndex,delete V.itemIndex,typeof V.onMouseEnter=="function"&&(V.onMouseEnter=this.onMouseEnter),typeof V.onMouseLeave=="function"&&(V.onMouseLeave=this.onMouseLeave),typeof V.onMouseDown=="function"&&(V.onMouseDown=this.onMouseDown),typeof V.onClick=="function"&&(V.onClick=this.onClick),e.default.createElement("li",l({role:"option"},V,{ref:this.storeItemReference}),ce(ae,h({isHighlighted:X},te)))}}]),R}(e.Component);t.default=g,P(g,"propTypes",{sectionIndex:n.default.number,isHighlighted:n.default.bool.isRequired,itemIndex:n.default.number.isRequired,item:n.default.any.isRequired,renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,onMouseEnter:n.default.func,onMouseLeave:n.default.func,onMouseDown:n.default.func,onClick:n.default.func})})(JA);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=a(F),n=s(bl),r=s(JA),i=s(qh);function s(g){return g&&g.__esModule?g:{default:g}}function o(){if(typeof WeakMap!="function")return null;var g=new WeakMap;return o=function(){return g},g}function a(g){if(g&&g.__esModule)return g;if(g===null||l(g)!=="object"&&typeof g!="function")return{default:g};var y=o();if(y&&y.has(g))return y.get(g);var w={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in g)if(Object.prototype.hasOwnProperty.call(g,A)){var S=R?Object.getOwnPropertyDescriptor(g,A):null;S&&(S.get||S.set)?Object.defineProperty(w,A,S):w[A]=g[A]}return w.default=g,y&&y.set(g,w),w}function l(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(w){return typeof w}:l=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},l(g)}function c(){return c=Object.assign||function(g){for(var y=1;y<arguments.length;y++){var w=arguments[y];for(var R in w)Object.prototype.hasOwnProperty.call(w,R)&&(g[R]=w[R])}return g},c.apply(this,arguments)}function h(g,y){var w=Object.keys(g);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(g);y&&(R=R.filter(function(A){return Object.getOwnPropertyDescriptor(g,A).enumerable})),w.push.apply(w,R)}return w}function f(g){for(var y=1;y<arguments.length;y++){var w=arguments[y]!=null?arguments[y]:{};y%2?h(Object(w),!0).forEach(function(R){N(g,R,w[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(w)):h(Object(w)).forEach(function(R){Object.defineProperty(g,R,Object.getOwnPropertyDescriptor(w,R))})}return g}function p(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function T(g,y){for(var w=0;w<y.length;w++){var R=y[w];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(g,R.key,R)}}function C(g,y,w){return y&&T(g.prototype,y),g}function x(g){return function(){var y=E(g),w;if(v()){var R=E(this).constructor;w=Reflect.construct(y,arguments,R)}else w=y.apply(this,arguments);return k(this,w)}}function k(g,y){return y&&(l(y)==="object"||typeof y=="function")?y:_(g)}function _(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(g){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},E(g)}function b(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),y&&L(g,y)}function L(g,y){return L=Object.setPrototypeOf||function(R,A){return R.__proto__=A,R},L(g,y)}function N(g,y,w){return y in g?Object.defineProperty(g,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[y]=w,g}var P=function(g){b(w,g);var y=x(w);function w(){var R;p(this,w);for(var A=arguments.length,S=new Array(A),X=0;X<A;X++)S[X]=arguments[X];return R=y.call.apply(y,[this].concat(S)),N(_(R),"storeHighlightedItemReference",function(ae){R.props.onHighlightedItemChange(ae===null?null:ae.item)}),R}return C(w,[{key:"shouldComponentUpdate",value:function(A){return(0,i.default)(A,this.props,["itemProps"])}},{key:"render",value:function(){var A=this,S=this.props,X=S.items,ae=S.itemProps,ce=S.renderItem,te=S.renderItemData,V=S.sectionIndex,O=S.highlightedItemIndex,U=S.getItemId,$=S.theme,D=S.keyPrefix,B=V===null?D:"".concat(D,"section-").concat(V,"-"),H=typeof ae=="function";return e.default.createElement("ul",c({role:"listbox"},$("".concat(B,"items-list"),"itemsList")),X.map(function(q,Y){var ie=Y===0,ye=Y===O,De="".concat(B,"item-").concat(Y),Oe=H?ae({sectionIndex:V,itemIndex:Y}):ae,$e=f({id:U(V,Y),"aria-selected":ye},$(De,"item",ie&&"itemFirst",ye&&"itemHighlighted"),{},Oe);return ye&&($e.ref=A.storeHighlightedItemReference),e.default.createElement(r.default,c({},$e,{sectionIndex:V,isHighlighted:ye,itemIndex:Y,item:q,renderItem:ce,renderItemData:te}))}))}}]),w}(e.Component);t.default=P,N(P,"propTypes",{items:n.default.array.isRequired,itemProps:n.default.oneOfType([n.default.object,n.default.func]),renderItem:n.default.func.isRequired,renderItemData:n.default.object.isRequired,sectionIndex:n.default.number,highlightedItemIndex:n.default.number,onHighlightedItemChange:n.default.func.isRequired,getItemId:n.default.func.isRequired,theme:n.default.func.isRequired,keyPrefix:n.default.string.isRequired}),N(P,"defaultProps",{sectionIndex:null})})(XA);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=c(F),n=a(bl),r=a(J4),i=a(rB),s=a(YA),o=a(XA);function a(O){return O&&O.__esModule?O:{default:O}}function l(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return l=function(){return O},O}function c(O){if(O&&O.__esModule)return O;if(O===null||v(O)!=="object"&&typeof O!="function")return{default:O};var U=l();if(U&&U.has(O))return U.get(O);var $={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in O)if(Object.prototype.hasOwnProperty.call(O,B)){var H=D?Object.getOwnPropertyDescriptor(O,B):null;H&&(H.get||H.set)?Object.defineProperty($,B,H):$[B]=O[B]}return $.default=O,U&&U.set(O,$),$}function h(O,U){var $=Object.keys(O);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(O);U&&(D=D.filter(function(B){return Object.getOwnPropertyDescriptor(O,B).enumerable})),$.push.apply($,D)}return $}function f(O){for(var U=1;U<arguments.length;U++){var $=arguments[U]!=null?arguments[U]:{};U%2?h(Object($),!0).forEach(function(D){S(O,D,$[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors($)):h(Object($)).forEach(function(D){Object.defineProperty(O,D,Object.getOwnPropertyDescriptor($,D))})}return O}function p(O,U){return _(O)||k(O,U)||C(O,U)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(O,U){if(O){if(typeof O=="string")return x(O,U);var $=Object.prototype.toString.call(O).slice(8,-1);if($==="Object"&&O.constructor&&($=O.constructor.name),$==="Map"||$==="Set")return Array.from($);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return x(O,U)}}function x(O,U){(U==null||U>O.length)&&(U=O.length);for(var $=0,D=new Array(U);$<U;$++)D[$]=O[$];return D}function k(O,U){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(O)))){var $=[],D=!0,B=!1,H=void 0;try{for(var q=O[Symbol.iterator](),Y;!(D=(Y=q.next()).done)&&($.push(Y.value),!(U&&$.length===U));D=!0);}catch(ie){B=!0,H=ie}finally{try{!D&&q.return!=null&&q.return()}finally{if(B)throw H}}return $}}function _(O){if(Array.isArray(O))return O}function v(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function($){return typeof $}:v=function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},v(O)}function E(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")}function b(O,U){for(var $=0;$<U.length;$++){var D=U[$];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}function L(O,U,$){return U&&b(O.prototype,U),O}function N(O){return function(){var U=w(O),$;if(y()){var D=w(this).constructor;$=Reflect.construct(U,arguments,D)}else $=U.apply(this,arguments);return P(this,$)}}function P(O,U){return U&&(v(U)==="object"||typeof U=="function")?U:g(O)}function g(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function w(O){return w=Object.setPrototypeOf?Object.getPrototypeOf:function($){return $.__proto__||Object.getPrototypeOf($)},w(O)}function R(O,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(U&&U.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),U&&A(O,U)}function A(O,U){return A=Object.setPrototypeOf||function(D,B){return D.__proto__=B,D},A(O,U)}function S(O,U,$){return U in O?Object.defineProperty(O,U,{value:$,enumerable:!0,configurable:!0,writable:!0}):O[U]=$,O}var X={},ae=function(U){return e.default.createElement("input",U)},ce=function(U){var $=U.containerProps,D=U.children;return e.default.createElement("div",$,D)},te={container:"react-autowhatever__container",containerOpen:"react-autowhatever__container--open",input:"react-autowhatever__input",inputOpen:"react-autowhatever__input--open",inputFocused:"react-autowhatever__input--focused",itemsContainer:"react-autowhatever__items-container",itemsContainerOpen:"react-autowhatever__items-container--open",itemsList:"react-autowhatever__items-list",item:"react-autowhatever__item",itemFirst:"react-autowhatever__item--first",itemHighlighted:"react-autowhatever__item--highlighted",sectionContainer:"react-autowhatever__section-container",sectionContainerFirst:"react-autowhatever__section-container--first",sectionTitle:"react-autowhatever__section-title"},V=function(O){R($,O);var U=N($);function $(D){var B;return E(this,$),B=U.call(this,D),S(g(B),"storeInputReference",function(H){H!==null&&(B.input=H);var q=B.props.inputProps.ref;q&&(typeof q=="function"?q(H):v(q)==="object"&&Object.prototype.hasOwnProperty.call(q,"current")&&(q.current=H))}),S(g(B),"storeItemsContainerReference",function(H){H!==null&&(B.itemsContainer=H)}),S(g(B),"onHighlightedItemChange",function(H){B.highlightedItem=H}),S(g(B),"getItemId",function(H,q){if(q===null)return null;var Y=B.props.id,ie=H===null?"":"section-".concat(H);return"react-autowhatever-".concat(Y,"-").concat(ie,"-item-").concat(q)}),S(g(B),"onFocus",function(H){var q=B.props.inputProps;B.setState({isInputFocused:!0}),q.onFocus&&q.onFocus(H)}),S(g(B),"onBlur",function(H){var q=B.props.inputProps;B.setState({isInputFocused:!1}),q.onBlur&&q.onBlur(H)}),S(g(B),"onKeyDown",function(H){var q=B.props,Y=q.inputProps,ie=q.highlightedSectionIndex,ye=q.highlightedItemIndex,De=H.keyCode;switch(De){case 40:case 38:{var Oe=De===40?"next":"prev",$e=B.sectionIterator[Oe]([ie,ye]),yt=p($e,2),vt=yt[0],hn=yt[1];Y.onKeyDown(H,{newHighlightedSectionIndex:vt,newHighlightedItemIndex:hn});break}default:Y.onKeyDown(H,{highlightedSectionIndex:ie,highlightedItemIndex:ye})}}),B.highlightedItem=null,B.state={isInputFocused:!1},B.setSectionsItems(D),B.setSectionIterator(D),B.setTheme(D),B}return L($,[{key:"componentDidMount",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"UNSAFE_componentWillReceiveProps",value:function(B){B.items!==this.props.items&&this.setSectionsItems(B),(B.items!==this.props.items||B.multiSection!==this.props.multiSection)&&this.setSectionIterator(B),B.theme!==this.props.theme&&this.setTheme(B)}},{key:"componentDidUpdate",value:function(){this.ensureHighlightedItemIsVisible()}},{key:"setSectionsItems",value:function(B){B.multiSection&&(this.sectionsItems=B.items.map(function(H){return B.getSectionItems(H)}),this.sectionsLengths=this.sectionsItems.map(function(H){return H.length}),this.allSectionsAreEmpty=this.sectionsLengths.every(function(H){return H===0}))}},{key:"setSectionIterator",value:function(B){this.sectionIterator=(0,r.default)({multiSection:B.multiSection,data:B.multiSection?this.sectionsLengths:B.items.length})}},{key:"setTheme",value:function(B){this.theme=(0,i.default)(B.theme)}},{key:"renderSections",value:function(){var B=this;if(this.allSectionsAreEmpty)return null;var H=this.theme,q=this.props,Y=q.id,ie=q.items,ye=q.renderItem,De=q.renderItemData,Oe=q.renderSectionTitle,$e=q.highlightedSectionIndex,yt=q.highlightedItemIndex,vt=q.itemProps;return ie.map(function(hn,nt){var jn="react-autowhatever-".concat(Y,"-"),yr="".concat(jn,"section-").concat(nt,"-"),dn=nt===0;return e.default.createElement("div",H("".concat(yr,"container"),"sectionContainer",dn&&"sectionContainerFirst"),e.default.createElement(s.default,{section:hn,renderSectionTitle:Oe,theme:H,sectionKeyPrefix:yr}),e.default.createElement(o.default,{items:B.sectionsItems[nt],itemProps:vt,renderItem:ye,renderItemData:De,sectionIndex:nt,highlightedItemIndex:$e===nt?yt:null,onHighlightedItemChange:B.onHighlightedItemChange,getItemId:B.getItemId,theme:H,keyPrefix:jn,ref:B.storeItemsListReference}))})}},{key:"renderItems",value:function(){var B=this.props.items;if(B.length===0)return null;var H=this.theme,q=this.props,Y=q.id,ie=q.renderItem,ye=q.renderItemData,De=q.highlightedSectionIndex,Oe=q.highlightedItemIndex,$e=q.itemProps;return e.default.createElement(o.default,{items:B,itemProps:$e,renderItem:ie,renderItemData:ye,highlightedItemIndex:De===null?Oe:null,onHighlightedItemChange:this.onHighlightedItemChange,getItemId:this.getItemId,theme:H,keyPrefix:"react-autowhatever-".concat(Y,"-")})}},{key:"ensureHighlightedItemIsVisible",value:function(){var B=this.highlightedItem;if(B){var H=this.itemsContainer,q=B.offsetParent===H?B.offsetTop:B.offsetTop-H.offsetTop,Y=H.scrollTop;q<Y?Y=q:q+B.offsetHeight>Y+H.offsetHeight&&(Y=q+B.offsetHeight-H.offsetHeight),Y!==H.scrollTop&&(H.scrollTop=Y)}}},{key:"render",value:function(){var B=this.theme,H=this.props,q=H.id,Y=H.multiSection,ie=H.renderInputComponent,ye=H.renderItemsContainer,De=H.highlightedSectionIndex,Oe=H.highlightedItemIndex,$e=this.state.isInputFocused,yt=Y?this.renderSections():this.renderItems(),vt=yt!==null,hn=this.getItemId(De,Oe),nt="react-autowhatever-".concat(q),jn=f({role:"combobox","aria-haspopup":"listbox","aria-owns":nt,"aria-expanded":vt},B("react-autowhatever-".concat(q,"-container"),"container",vt&&"containerOpen"),{},this.props.containerProps),yr=ie(f({type:"text",value:"",autoComplete:"off","aria-autocomplete":"list","aria-controls":nt,"aria-activedescendant":hn},B("react-autowhatever-".concat(q,"-input"),"input",vt&&"inputOpen",$e&&"inputFocused"),{},this.props.inputProps,{onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.props.inputProps.onKeyDown&&this.onKeyDown,ref:this.storeInputReference})),dn=ye({containerProps:f({id:nt,role:"listbox"},B("react-autowhatever-".concat(q,"-items-container"),"itemsContainer",vt&&"itemsContainerOpen"),{ref:this.storeItemsContainerReference}),children:yt});return e.default.createElement("div",jn,yr,dn)}}]),$}(e.Component);t.default=V,S(V,"propTypes",{id:n.default.string,multiSection:n.default.bool,renderInputComponent:n.default.func,renderItemsContainer:n.default.func,items:n.default.array.isRequired,renderItem:n.default.func,renderItemData:n.default.object,renderSectionTitle:n.default.func,getSectionItems:n.default.func,containerProps:n.default.object,inputProps:n.default.object,itemProps:n.default.oneOfType([n.default.object,n.default.func]),highlightedSectionIndex:n.default.number,highlightedItemIndex:n.default.number,theme:n.default.oneOfType([n.default.object,n.default.array])}),S(V,"defaultProps",{id:"1",multiSection:!1,renderInputComponent:ae,renderItemsContainer:ce,renderItem:function(){throw new Error("`renderItem` must be provided")},renderItemData:X,renderSectionTitle:function(){throw new Error("`renderSectionTitle` must be provided")},getSectionItems:function(){throw new Error("`getSectionItems` must be provided")},containerProps:X,inputProps:X,itemProps:X,highlightedSectionIndex:null,highlightedItemIndex:null,theme:te})})(QA);var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.mapToAutowhateverTheme=Eo.defaultTheme=void 0;var iB={container:"react-autosuggest__container",containerOpen:"react-autosuggest__container--open",input:"react-autosuggest__input",inputOpen:"react-autosuggest__input--open",inputFocused:"react-autosuggest__input--focused",suggestionsContainer:"react-autosuggest__suggestions-container",suggestionsContainerOpen:"react-autosuggest__suggestions-container--open",suggestionsList:"react-autosuggest__suggestions-list",suggestion:"react-autosuggest__suggestion",suggestionFirst:"react-autosuggest__suggestion--first",suggestionHighlighted:"react-autosuggest__suggestion--highlighted",sectionContainer:"react-autosuggest__section-container",sectionContainerFirst:"react-autosuggest__section-container--first",sectionTitle:"react-autosuggest__section-title"};Eo.defaultTheme=iB;var sB=function(e){var n={};for(var r in e)switch(r){case"suggestionsContainer":n.itemsContainer=e[r];break;case"suggestionsContainerOpen":n.itemsContainerOpen=e[r];break;case"suggestion":n.item=e[r];break;case"suggestionFirst":n.itemFirst=e[r];break;case"suggestionHighlighted":n.itemHighlighted=e[r];break;case"suggestionsList":n.itemsList=e[r];break;default:n[r]=e[r]}return n};Eo.mapToAutowhateverTheme=sB;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=l(F),n=o(bl),r=o(X4),i=o(QA),s=Eo;function o(V){return V&&V.__esModule?V:{default:V}}function a(){if(typeof WeakMap!="function")return null;var V=new WeakMap;return a=function(){return V},V}function l(V){if(V&&V.__esModule)return V;if(V===null||c(V)!=="object"&&typeof V!="function")return{default:V};var O=a();if(O&&O.has(V))return O.get(V);var U={},$=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in V)if(Object.prototype.hasOwnProperty.call(V,D)){var B=$?Object.getOwnPropertyDescriptor(V,D):null;B&&(B.get||B.set)?Object.defineProperty(U,D,B):U[D]=V[D]}return U.default=V,O&&O.set(V,U),U}function c(V){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(U){return typeof U}:c=function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},c(V)}function h(V,O){var U=Object.keys(V);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(V);O&&($=$.filter(function(D){return Object.getOwnPropertyDescriptor(V,D).enumerable})),U.push.apply(U,$)}return U}function f(V){for(var O=1;O<arguments.length;O++){var U=arguments[O]!=null?arguments[O]:{};O%2?h(Object(U),!0).forEach(function($){N(V,$,U[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(V,Object.getOwnPropertyDescriptors(U)):h(Object(U)).forEach(function($){Object.defineProperty(V,$,Object.getOwnPropertyDescriptor(U,$))})}return V}function p(V,O){if(!(V instanceof O))throw new TypeError("Cannot call a class as a function")}function T(V,O){for(var U=0;U<O.length;U++){var $=O[U];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(V,$.key,$)}}function C(V,O,U){return O&&T(V.prototype,O),V}function x(V){return function(){var O=E(V),U;if(v()){var $=E(this).constructor;U=Reflect.construct(O,arguments,$)}else U=O.apply(this,arguments);return k(this,U)}}function k(V,O){return O&&(c(O)==="object"||typeof O=="function")?O:_(V)}function _(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function E(V){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(U){return U.__proto__||Object.getPrototypeOf(U)},E(V)}function b(V,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(O&&O.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),O&&L(V,O)}function L(V,O){return L=Object.setPrototypeOf||function($,D){return $.__proto__=D,$},L(V,O)}function N(V,O,U){return O in V?Object.defineProperty(V,O,{value:U,enumerable:!0,configurable:!0,writable:!0}):V[O]=U,V}var P=function(){return!0},g=function(O){return O.trim().length>0},y=function(O){var U=O.containerProps,$=O.children;return e.default.createElement("div",U,$)},w="suggestions-revealed",R="suggestions-updated",A="suggestion-selected",S="input-focused",X="input-changed",ae="input-blurred",ce="escape-pressed",te=function(V){b(U,V);var O=x(U);function U($){var D,B=$.alwaysRenderSuggestions;return p(this,U),D=O.call(this),N(_(D),"onDocumentMouseDown",function(H){D.justClickedOnSuggestionsContainer=!1;for(var q=H.detail&&H.detail.target||H.target;q!==null&&q!==document;){if(q.getAttribute&&q.getAttribute("data-suggestion-index")!==null)return;if(q===D.suggestionsContainer){D.justClickedOnSuggestionsContainer=!0;return}q=q.parentNode}}),N(_(D),"storeAutowhateverRef",function(H){H!==null&&(D.autowhatever=H)}),N(_(D),"onSuggestionMouseEnter",function(H,q){var Y=q.sectionIndex,ie=q.itemIndex;D.updateHighlightedSuggestion(Y,ie),H.target===D.pressedSuggestion&&(D.justSelectedSuggestion=!0),D.justMouseEntered=!0,setTimeout(function(){D.justMouseEntered=!1})}),N(_(D),"highlightFirstSuggestion",function(){D.updateHighlightedSuggestion(D.props.multiSection?0:null,0)}),N(_(D),"onDocumentMouseUp",function(){D.pressedSuggestion&&!D.justSelectedSuggestion&&D.input.focus(),D.pressedSuggestion=null}),N(_(D),"onSuggestionMouseDown",function(H){D.justSelectedSuggestion||(D.justSelectedSuggestion=!0,D.pressedSuggestion=H.target)}),N(_(D),"onSuggestionsClearRequested",function(){var H=D.props.onSuggestionsClearRequested;H&&H()}),N(_(D),"onSuggestionSelected",function(H,q){var Y=D.props,ie=Y.alwaysRenderSuggestions,ye=Y.onSuggestionSelected,De=Y.onSuggestionsFetchRequested;ye&&ye(H,q);var Oe=D.props.shouldKeepSuggestionsOnSelect(q.suggestion);ie||Oe?De({value:q.suggestionValue,reason:A}):D.onSuggestionsClearRequested(),D.resetHighlightedSuggestion()}),N(_(D),"onSuggestionClick",function(H){var q=D.props,Y=q.alwaysRenderSuggestions,ie=q.focusInputOnSuggestionClick,ye=D.getSuggestionIndices(D.findSuggestionElement(H.target)),De=ye.sectionIndex,Oe=ye.suggestionIndex,$e=D.getSuggestion(De,Oe),yt=D.props.getSuggestionValue($e);D.maybeCallOnChange(H,yt,"click"),D.onSuggestionSelected(H,{suggestion:$e,suggestionValue:yt,suggestionIndex:Oe,sectionIndex:De,method:"click"});var vt=D.props.shouldKeepSuggestionsOnSelect($e);Y||vt||D.closeSuggestions(),ie===!0?D.input.focus():D.onBlur(),setTimeout(function(){D.justSelectedSuggestion=!1})}),N(_(D),"onBlur",function(){var H=D.props,q=H.inputProps,Y=H.shouldRenderSuggestions,ie=q.value,ye=q.onBlur,De=D.getHighlightedSuggestion(),Oe=Y(ie,ae);D.setState({isFocused:!1,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!Oe}),ye&&ye(D.blurEvent,{highlightedSuggestion:De})}),N(_(D),"onSuggestionMouseLeave",function(H){D.resetHighlightedSuggestion(!1),D.justSelectedSuggestion&&H.target===D.pressedSuggestion&&(D.justSelectedSuggestion=!1)}),N(_(D),"onSuggestionTouchStart",function(){D.justSelectedSuggestion=!0}),N(_(D),"onSuggestionTouchMove",function(){D.justSelectedSuggestion=!1,D.pressedSuggestion=null,D.input.focus()}),N(_(D),"itemProps",function(H){var q=H.sectionIndex,Y=H.itemIndex;return{"data-section-index":q,"data-suggestion-index":Y,onMouseEnter:D.onSuggestionMouseEnter,onMouseLeave:D.onSuggestionMouseLeave,onMouseDown:D.onSuggestionMouseDown,onTouchStart:D.onSuggestionTouchStart,onTouchMove:D.onSuggestionTouchMove,onClick:D.onSuggestionClick}}),N(_(D),"renderSuggestionsContainer",function(H){var q=H.containerProps,Y=H.children,ie=D.props.renderSuggestionsContainer;return ie({containerProps:q,children:Y,query:D.getQuery()})}),D.state={isFocused:!1,isCollapsed:!B,highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null},D.justPressedUpDown=!1,D.justMouseEntered=!1,D.pressedSuggestion=null,D}return C(U,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("mouseup",this.onDocumentMouseUp),this.input=this.autowhatever.input,this.suggestionsContainer=this.autowhatever.itemsContainer}},{key:"UNSAFE_componentWillReceiveProps",value:function(D){var B=this.state.highlightedSuggestionIndex===0&&this.props.highlightFirstSuggestion&&!D.highlightFirstSuggestion;(0,r.default)(D.suggestions,this.props.suggestions)?D.highlightFirstSuggestion&&D.suggestions.length>0&&this.justPressedUpDown===!1&&this.justMouseEntered===!1?this.highlightFirstSuggestion():B&&this.resetHighlightedSuggestion():this.willRenderSuggestions(D,R)?(this.state.isCollapsed&&!this.justSelectedSuggestion&&this.revealSuggestions(),B&&this.resetHighlightedSuggestion()):this.resetHighlightedSuggestion()}},{key:"componentDidUpdate",value:function(D,B){var H=this.props,q=H.suggestions,Y=H.onSuggestionHighlighted,ie=H.highlightFirstSuggestion;if(!(0,r.default)(q,D.suggestions)&&q.length>0&&ie){this.highlightFirstSuggestion();return}if(Y){var ye=this.getHighlightedSuggestion(),De=B.highlightedSuggestion;ye!=De&&Y({suggestion:ye})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("mouseup",this.onDocumentMouseUp)}},{key:"updateHighlightedSuggestion",value:function(D,B,H){var q=this;this.setState(function(Y){var ie=Y.valueBeforeUpDown;return B===null?ie=null:ie===null&&typeof H<"u"&&(ie=H),{highlightedSectionIndex:D,highlightedSuggestionIndex:B,highlightedSuggestion:B===null?null:q.getSuggestion(D,B),valueBeforeUpDown:ie}})}},{key:"resetHighlightedSuggestion",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.setState(function(B){var H=B.valueBeforeUpDown;return{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:D?null:H}})}},{key:"revealSuggestions",value:function(){this.setState({isCollapsed:!1})}},{key:"closeSuggestions",value:function(){this.setState({highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null,valueBeforeUpDown:null,isCollapsed:!0})}},{key:"getSuggestion",value:function(D,B){var H=this.props,q=H.suggestions,Y=H.multiSection,ie=H.getSectionSuggestions;return Y?ie(q[D])[B]:q[B]}},{key:"getHighlightedSuggestion",value:function(){var D=this.state,B=D.highlightedSectionIndex,H=D.highlightedSuggestionIndex;return H===null?null:this.getSuggestion(B,H)}},{key:"getSuggestionValueByIndex",value:function(D,B){var H=this.props.getSuggestionValue;return H(this.getSuggestion(D,B))}},{key:"getSuggestionIndices",value:function(D){var B=D.getAttribute("data-section-index"),H=D.getAttribute("data-suggestion-index");return{sectionIndex:typeof B=="string"?parseInt(B,10):null,suggestionIndex:parseInt(H,10)}}},{key:"findSuggestionElement",value:function(D){var B=D;do{if(B.getAttribute&&B.getAttribute("data-suggestion-index")!==null)return B;B=B.parentNode}while(B!==null);throw console.error("Clicked element:",D),new Error("Couldn't find suggestion element")}},{key:"maybeCallOnChange",value:function(D,B,H){var q=this.props.inputProps,Y=q.value,ie=q.onChange;B!==Y&&ie(D,{newValue:B,method:H})}},{key:"willRenderSuggestions",value:function(D,B){var H=D.suggestions,q=D.inputProps,Y=D.shouldRenderSuggestions,ie=q.value;return H.length>0&&Y(ie,B)}},{key:"getQuery",value:function(){var D=this.props.inputProps,B=D.value,H=this.state.valueBeforeUpDown;return(H===null?B:H).trim()}},{key:"render",value:function(){var D=this,B=this.props,H=B.suggestions,q=B.renderInputComponent,Y=B.onSuggestionsFetchRequested,ie=B.renderSuggestion,ye=B.inputProps,De=B.multiSection,Oe=B.renderSectionTitle,$e=B.id,yt=B.getSectionSuggestions,vt=B.theme,hn=B.getSuggestionValue,nt=B.alwaysRenderSuggestions,jn=B.highlightFirstSuggestion,yr=B.containerProps,dn=this.state,Dl=dn.isFocused,ls=dn.isCollapsed,Mo=dn.highlightedSectionIndex,Ol=dn.highlightedSuggestionIndex,vr=dn.valueBeforeUpDown,_r=nt?P:this.props.shouldRenderSuggestions,Bn=ye.value,Xe=ye.onFocus,rt=ye.onKeyDown,us=this.willRenderSuggestions(this.props,"render"),vi=nt||Dl&&!ls&&us,Nl=vi?H:[],Kh=f({},ye,{onFocus:function(Fe){if(!D.justSelectedSuggestion&&!D.justClickedOnSuggestionsContainer){var Ht=_r(Bn,S);D.setState({isFocused:!0,isCollapsed:!Ht}),Xe&&Xe(Fe),Ht&&Y({value:Bn,reason:S})}},onBlur:function(Fe){if(D.justClickedOnSuggestionsContainer){D.input.focus();return}D.blurEvent=Fe,D.justSelectedSuggestion||(D.onBlur(),D.onSuggestionsClearRequested())},onChange:function(Fe){var Ht=Fe.target.value,wi=_r(Ht,X);D.maybeCallOnChange(Fe,Ht,"type"),D.suggestionsContainer&&(D.suggestionsContainer.scrollTop=0),D.setState(f({},jn?{}:{highlightedSectionIndex:null,highlightedSuggestionIndex:null,highlightedSuggestion:null},{valueBeforeUpDown:null,isCollapsed:!wi})),wi?Y({value:Ht,reason:X}):D.onSuggestionsClearRequested()},onKeyDown:function(Fe,Ht){var wi=Fe.keyCode;switch(wi){case 40:case 38:if(ls)_r(Bn,w)&&(Y({value:Bn,reason:w}),D.revealSuggestions(),Fe.preventDefault());else if(H.length>0){var Vl=Ht.newHighlightedSectionIndex,Ti=Ht.newHighlightedItemIndex,hs;Ti===null?hs=vr===null?Bn:vr:hs=D.getSuggestionValueByIndex(Vl,Ti),D.updateHighlightedSuggestion(Vl,Ti,Bn),D.maybeCallOnChange(Fe,hs,wi===40?"down":"up"),Fe.preventDefault()}D.justPressedUpDown=!0,setTimeout(function(){D.justPressedUpDown=!1});break;case 13:{if(Fe.keyCode===229)break;var ds=D.getHighlightedSuggestion();if(vi&&!nt&&D.closeSuggestions(),ds!=null){Fe.preventDefault();var wr=hn(ds);D.maybeCallOnChange(Fe,wr,"enter"),D.onSuggestionSelected(Fe,{suggestion:ds,suggestionValue:wr,suggestionIndex:Ol,sectionIndex:Mo,method:"enter"}),D.justSelectedSuggestion=!0,setTimeout(function(){D.justSelectedSuggestion=!1})}break}case 27:{vi&&Fe.preventDefault();var fs=vi&&!nt;if(vr===null){if(!fs){var Ei="";D.maybeCallOnChange(Fe,Ei,"escape"),_r(Ei,ce)?Y({value:Ei,reason:ce}):D.onSuggestionsClearRequested()}}else D.maybeCallOnChange(Fe,vr,"escape");fs?(D.onSuggestionsClearRequested(),D.closeSuggestions()):D.resetHighlightedSuggestion();break}}rt&&rt(Fe)}}),_i={query:this.getQuery()};return e.default.createElement(i.default,{multiSection:De,items:Nl,renderInputComponent:q,renderItemsContainer:this.renderSuggestionsContainer,renderItem:ie,renderItemData:_i,renderSectionTitle:Oe,getSectionItems:yt,highlightedSectionIndex:Mo,highlightedItemIndex:Ol,containerProps:yr,inputProps:Kh,itemProps:this.itemProps,theme:(0,s.mapToAutowhateverTheme)(vt),id:$e,ref:this.storeAutowhateverRef})}}]),U}(e.Component);t.default=te,N(te,"propTypes",{suggestions:n.default.array.isRequired,onSuggestionsFetchRequested:function(O,U){var $=O[U];if(typeof $!="function")throw new Error("'onSuggestionsFetchRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsFetchRequestedProp")},onSuggestionsClearRequested:function(O,U){var $=O[U];if(O.alwaysRenderSuggestions===!1&&typeof $!="function")throw new Error("'onSuggestionsClearRequested' must be implemented. See: https://github.com/moroshko/react-autosuggest#onSuggestionsClearRequestedProp")},shouldKeepSuggestionsOnSelect:n.default.func,onSuggestionSelected:n.default.func,onSuggestionHighlighted:n.default.func,renderInputComponent:n.default.func,renderSuggestionsContainer:n.default.func,getSuggestionValue:n.default.func.isRequired,renderSuggestion:n.default.func.isRequired,inputProps:function(O,U){var $=O[U];if(!$)throw new Error("'inputProps' must be passed.");if(!Object.prototype.hasOwnProperty.call($,"value"))throw new Error("'inputProps' must have 'value'.");if(!Object.prototype.hasOwnProperty.call($,"onChange"))throw new Error("'inputProps' must have 'onChange'.")},shouldRenderSuggestions:n.default.func,alwaysRenderSuggestions:n.default.bool,multiSection:n.default.bool,renderSectionTitle:function(O,U){var $=O[U];if(O.multiSection===!0&&typeof $!="function")throw new Error("'renderSectionTitle' must be implemented. See: https://github.com/moroshko/react-autosuggest#renderSectionTitleProp")},getSectionSuggestions:function(O,U){var $=O[U];if(O.multiSection===!0&&typeof $!="function")throw new Error("'getSectionSuggestions' must be implemented. See: https://github.com/moroshko/react-autosuggest#getSectionSuggestionsProp")},focusInputOnSuggestionClick:n.default.bool,highlightFirstSuggestion:n.default.bool,theme:n.default.object,id:n.default.string,containerProps:n.default.object}),N(te,"defaultProps",{renderSuggestionsContainer:y,shouldRenderSuggestions:g,alwaysRenderSuggestions:!1,multiSection:!1,shouldKeepSuggestionsOnSelect:function(){return!1},focusInputOnSuggestionClick:!0,highlightFirstSuggestion:!1,theme:s.defaultTheme,id:"1",containerProps:{}})})(WA);var oB=WA.default;const cT=dT(oB);function aB(){const[t,e]=F.useState(""),[n,r]=F.useState(""),[i,s]=F.useState(""),[o,a]=F.useState([]),[l,c]=F.useState([]),[h,f]=F.useState(null),[p,T]=F.useState(null),[C,x]=F.useState(!1),[k,_,v]=xo(mi),[E,b]=F.useState([]),L=async()=>{if(i)try{const A=at(fe,"Hostels",i,"Rooms"),S=Hi(A,Kn("users","!=",[])),X=await Yt(S),ae=[];X.forEach(V=>{ae.push({id:V.id,...V.data()})});const ce=ae.map(async V=>{const O=V.users.map(async $=>{const D=await Wi(Ze(fe,"Users",$));return D.exists()?D.data().email:"Unknown User"}),U=await Promise.all(O);return{...V,userEmails:U}}),te=await Promise.all(ce);b(te)}catch(A){console.error("Error fetching assigned rooms:",A)}};F.useEffect(()=>{L()},[i]),F.useEffect(()=>{(async()=>{if(!_){if(v){console.error("Firebase auth error:",v);return}if(k){const S=k.uid,X=Ze(fe,"Users",S);try{const ae=await Wi(X);if(ae.exists()){const ce=ae.data();ce.role==="caretaker"&&ce.hostelId?s(ce.hostelId):console.error("User is not a caretaker or hostelId is missing.")}else console.error("User not found!")}catch(ae){console.error("Error fetching user data:",ae)}}else console.log("User is not logged in.")}})()},[k,_,v]);const N=(A,{newValue:S})=>{e(S),g(S)},P=(A,{newValue:S})=>{r(S),y(S)},g=async A=>{if(A.length>=3){const S=at(fe,"Users"),X=Hi(S,Kn("email",">=",A),Kn("email","<=",A+""));try{const ce=(await Yt(X)).docs.map(te=>({email:te.data().email,id:te.id}));a(ce)}catch(ae){console.error("Error fetching user suggestions:",ae)}}else a([])},y=async A=>{if(A&&A.length>1&&i)try{const S=at(fe,"Hostels",i,"Rooms"),X=Hi(S,Kn("roomNumber",">=",A.toUpperCase()),Kn("roomNumber","<=",A.toUpperCase()+"")),ce=(await Yt(X)).docs.map(te=>({roomNumber:te.data().roomNumber,id:te.id}));c(ce)}catch(S){console.error("Error fetching room suggestions:",S),c([])}else c([])},w=async()=>{if(!h||!p||!i){alert("Please select a user and a room.");return}try{x(!0);const A=h.id,S=Ze(fe,"Hostels",i,"Rooms",p.id),X=Ze(fe,"Users",A),ae=await Wi(S);if((ae.exists()&&ae.data().users?ae.data().users:[]).includes(A)){alert("User is already assigned to this room."),x(!1);return}await Cn(S,{users:m2(A)}),await Cn(X,{roomId:p.id}),await Cn(X,{hostelId:i}),alert("Room assigned successfully"),e(""),r(""),f(null),T(null),L()}catch(A){console.error("Error assigning room:",A),alert("An error occurred while assigning the room")}finally{x(!1)}},R=async(A,S)=>{try{const X=Ze(fe,"Hostels",i,"Rooms",A),ae=Ze(fe,"Users",S);await Cn(X,{users:g2(S)}),await Cn(ae,{roomId:null}),await Cn(ae,{hostelId:null}),alert("User removed from room successfully!"),L()}catch(X){console.error("Error removing user from room:",X),alert("Error removing user. Please try again.")}};return M.jsxs("div",{className:"p-4 bg-white rounded shadow-md",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Assign Room to User"}),M.jsx(cT,{suggestions:o,onSuggestionsFetchRequested:({value:A})=>g(A),onSuggestionsClearRequested:()=>a([]),getSuggestionValue:A=>A.email,renderSuggestion:A=>M.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer",children:A.email}),inputProps:{placeholder:"User Email",value:t,onChange:N,className:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},onSuggestionSelected:(A,{suggestion:S})=>{e(S.email),f(S)},theme:{container:"relative",suggestionsList:"absolute z-10 w-full bg-white border rounded shadow-lg mt-1",suggestion:"p-2 hover:bg-gray-100"}}),M.jsx(cT,{suggestions:l,onSuggestionsFetchRequested:({value:A})=>y(A),onSuggestionsClearRequested:()=>c([]),getSuggestionValue:A=>A.roomNumber,renderSuggestion:A=>M.jsx("div",{className:"p-2 hover:bg-gray-100 cursor-pointer",children:A.roomNumber}),inputProps:{placeholder:"Room Number",value:n,onChange:P,className:"w-full p-2 border rounded mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},onSuggestionSelected:(A,{suggestion:S})=>{r(S.roomNumber),T(S)},theme:{container:"relative",suggestionsList:"absolute z-10 w-full bg-white border rounded shadow-lg mt-1",suggestion:"p-2 hover:bg-gray-100"}}),M.jsx("button",{onClick:w,disabled:C,className:`w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded ${C?"opacity-50 cursor-not-allowed":""}`,children:C?"Assigning...":"Assign Room"}),M.jsx("h3",{className:"text-lg font-semibold mt-6",children:"Assigned Rooms"}),M.jsx("ul",{children:E.map(A=>M.jsxs("li",{className:"border-b p-2",children:[M.jsxs("span",{className:"font-medium",children:["Room ",A.roomNumber,":"]}),M.jsx("ul",{className:"ml-4",children:A.userEmails&&A.userEmails.map((S,X)=>M.jsxs("li",{className:"flex items-center justify-between",children:[M.jsx("span",{children:S}),M.jsx("button",{onClick:()=>R(A.id,A.users[X]),className:"text-red-500 hover:text-red-700 ml-2 p-1",children:"Remove"})]},X))})]},A.id))})]})}function lB({hostelId:t}){const[e,n]=F.useState([]);return F.useEffect(()=>{(async()=>{const i=Hi(at(fe,"Devices"),Kn("hostelId","==",t)),o=(await Yt(i)).docs.map(a=>({id:a.id,...a.data()}));n(o)})()},[t]),M.jsxs("div",{className:"p-4 bg-white rounded shadow-md",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Devices in Hostel"}),M.jsx("ul",{children:e.map(r=>M.jsxs("li",{className:"mb-2",children:[r.name," - ",r.type]},r.id))})]})}function ZA(){const t={hidden:{opacity:0,scale:.5},visible:{opacity:1,scale:1,transition:{duration:.8,ease:"easeInOut",type:"spring",stiffness:100,damping:10}}},e={spin:{rotate:360,transition:{duration:1.2,repeat:1/0,ease:"linear"}}},n={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.8,delay:.3,ease:"easeOut",type:"spring",stiffness:80}}};return M.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-500 to-purple-500",children:M.jsxs(Tn.div,{variants:t,initial:"hidden",animate:"visible",className:"p-8 bg-white/20 backdrop-blur-lg rounded-lg shadow-md flex flex-col items-center",children:[M.jsx(Tn.div,{variants:e,animate:"spin",className:"border-t-4 border-blue-600 rounded-full h-16 w-16 mb-4"}),M.jsx(Tn.h2,{variants:n,initial:"hidden",animate:"visible",className:"text-xl font-bold text-white",children:"Loading..."})]})})}const uB=()=>M.jsx("div",{className:"flex justify-center items-center w-24 h-24",children:M.jsxs(Tn.div,{className:"relative w-full h-full",animate:{rotate:360},transition:{repeat:1/0,duration:3,ease:"linear"},children:[M.jsx("div",{className:"absolute inset-0 flex justify-center items-center",children:M.jsx(Tn.div,{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-green-400 shadow-lg",animate:{rotate:[0,360]},transition:{repeat:1/0,duration:5,ease:"linear"}})}),Array.from({length:4}).map((t,e)=>M.jsx(Tn.div,{className:"absolute w-3 h-6 bg-green-500 rounded-full",style:{top:`${Math.sin(e*2*Math.PI/4)*45+50}%`,left:`${Math.cos(e*2*Math.PI/4)*45+50}%`,borderRadius:"50% 50% 50% 50% / 60% 40% 60% 40%"},animate:{rotate:[0,360],scale:[1,1.2,1]},transition:{repeat:1/0,duration:2,delay:e*.3,ease:"easeInOut"}},e))]})});function cB(){var _;const[t,e,n]=xo(mi),[r,i]=F.useState(null),[s,o]=F.useState([]),a=F.useRef(null),[l,c]=F.useState([]),[h,f]=F.useState("Loading..."),[p,T]=F.useState(!1);F.useEffect(()=>{(async()=>{try{const E=await Yt(at(fe,"Hostels"));c(E.docs.map(b=>({id:b.id,...b.data()})))}catch(E){console.error("Error fetching hostels:",E)}})()},[]),F.useEffect(()=>{!e&&!n&&(async()=>{if(t)try{const E=Ze(fe,"Users",t.uid),b=await Wi(E);b.exists()?i(b.data()):console.log("No user document found.")}catch(E){console.error("Error fetching user data:",E)}})()},[t,e,n]),F.useEffect(()=>{(async()=>{if(r&&r.roomId&&r.hostelId)try{await C(r.roomId,r.hostelId),await x(r.roomId,r.hostelId)}catch(E){console.error("Error fetching room info:",E)}})()},[r]),F.useEffect(()=>{if(r&&r.roomId&&r.hostelId&&t){const v=new WebSocket("wss://merasabkuch-roomsync.hf.space");return a.current=v,v.onopen=()=>{console.log("Connected to WebSocket"),v.send(JSON.stringify({type:"joinRoom",roomId:r.roomId,hostelId:r.hostelId,userId:t.uid}))},v.onclose=()=>{console.log("Disconnected from WebSocket"),a.current=null},v.onerror=E=>{console.error("WebSocket Error:",E)},v.onmessage=E=>{const b=JSON.parse(E.data);console.log("Received data from WebSocket:",b),b.roomId===r.roomId&&(b.type==="deviceUpdate"&&o(L=>L.map(N=>N.id===b.deviceId?{...N,state:b.state}:N)),b.type==="roomData"&&(o(b.roomData.devices),T(!0)))},()=>{v&&v.close()}}},[r,t]);const C=async(v,E)=>{try{const b=at(fe,"Devices"),L=Hi(b,Kn("hostelId","==",E),Kn("roomId","==",v)),N=await Yt(L);o(N.docs.map(P=>({id:P.id,...P.data()})))}catch(b){console.error("Error fetching room devices:",b)}},x=async(v,E)=>{try{const b=at(fe,"Hostels",E,"Rooms"),L=await Wi(Ze(b,v));L.exists()?f(L.data().roomNumber):(console.log("Room not found"),f("N/A"))}catch(b){console.error("Error fetching room name:",b),f("N/A")}},k=(v,E)=>{a.current&&a.current.readyState===WebSocket.OPEN?(a.current.send(JSON.stringify({type:"updateDeviceState",deviceId:v,roomId:r.roomId,state:E,userId:t.uid})),console.log("Sent data to WebSocket:",{type:"updateDeviceState",deviceId:v,roomId:r.roomId,state:E,userId:t.uid})):console.warn("WebSocket is not connected.")};return r?r.roomId?M.jsxs(Tn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 bg-white rounded shadow-md relative",children:[!p&&M.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center",children:M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"loader mb-4"}),M.jsx(uB,{})]})}),M.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Welcome, ",r.name,"!"]}),M.jsxs("p",{children:[M.jsx("span",{className:"font-medium",children:"Hostel:"})," ",((_=l.find(v=>v.id===r.hostelId))==null?void 0:_.name)||r.hostelId||"N/A"]}),M.jsxs("p",{children:[M.jsx("span",{className:"font-medium",children:"Room:"})," ",h]}),M.jsx("h3",{className:"text-lg font-semibold mt-6",children:"Room Devices"}),M.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(v=>M.jsxs(Tn.div,{whileHover:{scale:1.05},className:"bg-gray-100 p-4 rounded-lg",children:[M.jsx("p",{className:"font-medium",children:v.name}),M.jsx("p",{className:"text-gray-600 text-sm",children:v.type}),M.jsx("div",{className:"mt-2",children:M.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[M.jsx("input",{type:"checkbox",checked:v.state,className:"sr-only peer",onChange:E=>k(v.id,E.target.checked),disabled:!p}),M.jsx("div",{className:`w-11 h-6 ${p?"bg-gray-200":"bg-gray-300"} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full
                                    peer-checked:after:translate-x-full peer-checked:after:border-white
                                    after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white
                                    after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all
                                    dark:border-gray-600 ${v.state?"peer-checked:bg-blue-600":""}`})]})})]},v.id))})]}):M.jsx("div",{className:"m-4",children:M.jsxs("div",{className:"text-center",children:[M.jsx("h1",{className:"text-2xl font-bold mb-4",children:" Nothing Here Yet. "}),M.jsx("p",{children:"You are not assigned to a room yet"})]})}):M.jsx("div",{children:"Loading user data..."})}function hB(){const[t]=xo(mi),[e,n]=F.useState(null),[r,i]=F.useState(null),s=async()=>{if(t){const o=await Wi(Ze(fe,"Users",t.uid));o.exists()&&(n(o.data().role),i(o.data().hostelId))}};return F.useEffect(()=>{s()},[t]),e?M.jsxs("div",{children:[M.jsx(HA,{}),M.jsxs("div",{className:"container mx-auto p-4",children:[M.jsx("h1",{className:"text-2xl font-bold mb-6",children:e==="caretaker"?"Hostel Management Dashboard":"Room Management Dashboard"}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e==="caretaker"&&M.jsxs(M.Fragment,{children:[" ",M.jsx(aB,{hostelId:r}),M.jsx(lB,{hostelId:r})," "]}),e==="user"&&M.jsx(cB,{})]})]})]}):M.jsx(ZA,{})}function dB(){const[t,e]=F.useState([]),[n,r]=F.useState(""),[i,s]=F.useState(null);F.useEffect(()=>{o()},[]);const o=async()=>{const h=await Yt(at(fe,"Hostels"));e(h.docs.map(f=>({id:f.id,...f.data()})))},a=async()=>{await Uh(at(fe,"Hostels"),{name:n}),r(""),o()},l=async()=>{await Cn(Ze(fe,"Hostels",i),{name:n}),s(null),r(""),o()},c=async h=>{await Lh(Ze(fe,"Hostels",h)),o()};return M.jsxs("div",{className:"p-4 bg-white rounded shadow-md",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Manage Hostels"}),M.jsx("input",{type:"text",value:n,onChange:h=>r(h.target.value),placeholder:"Hostel Name",className:"w-full p-2 mb-2 border rounded"}),i?M.jsx("button",{onClick:l,className:"bg-yellow-500 text-white p-2 rounded",children:"Update Hostel"}):M.jsx("button",{onClick:a,className:"bg-green-500 text-white p-2 rounded",children:"Add Hostel"}),M.jsx("ul",{className:"mt-4",children:t.map(h=>M.jsxs("li",{className:"flex justify-between items-center mb-2",children:[h.name,M.jsxs("div",{children:[M.jsx("button",{onClick:()=>{s(h.id),r(h.name)},className:"bg-blue-500 text-white p-1 rounded mr-2",children:"Edit"}),M.jsx("button",{onClick:()=>c(h.id),className:"bg-red-500 text-white p-1 rounded",children:"Delete"})]})]},h.id))})]})}function fB(){const[t,e]=F.useState([]),[n,r]=F.useState([]),[i,s]=F.useState(""),[o,a]=F.useState(""),[l,c]=F.useState(null);F.useEffect(()=>{h()},[]),F.useEffect(()=>{o&&f(o)},[o]);const h=async()=>{const k=await Yt(at(fe,"Hostels"));r(k.docs.map(_=>({id:_.id,..._.data()})))},f=async k=>{const _=Hi(at(fe,"Hostels",k,"Rooms")),v=await Yt(_);e(v.docs.map(E=>({id:E.id,...E.data()})))},p=async()=>{if(!o){alert("Please select a hostel.");return}try{await Uh(at(fe,"Hostels",o,"Rooms"),{roomNumber:i}),s(""),f(o)}catch(k){console.error("Error adding room: ",k),alert("Error adding room. Please try again.")}},T=async()=>{if(!o){alert("Please select a hostel.");return}await Cn(Ze(fe,"Hostels",o,"Rooms",l),{roomNumber:i}),c(null),s(""),f(o)},C=async k=>{await Lh(Ze(fe,"Hostels",o,"Rooms",k)),f(o)},x=k=>{a(k.target.value),e([]),c(null),s("")};return M.jsxs("div",{className:"p-4 bg-white rounded shadow-md",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Manage Rooms"}),M.jsxs("select",{value:o,onChange:x,className:"w-full p-2 mb-2 border rounded",children:[M.jsx("option",{value:"",children:"Select Hostel"}),n.map(k=>M.jsx("option",{value:k.id,children:k.name},k.id))]}),o&&M.jsxs(M.Fragment,{children:[M.jsx("input",{type:"text",value:i,onChange:k=>s(k.target.value.toUpperCase()),placeholder:"Room Number",className:"w-full p-2 mb-2 border rounded"}),l?M.jsx("button",{onClick:T,className:"bg-yellow-500 text-white p-2 rounded",children:"Update Room"}):M.jsx("button",{onClick:p,className:"bg-green-500 text-white p-2 rounded",children:"Add Room"}),M.jsx("ul",{className:"mt-4",children:t.map(k=>M.jsxs("li",{className:"flex justify-between items-center mb-2",children:["Room ",k.roomNumber,M.jsxs("div",{children:[M.jsx("button",{onClick:()=>{c(k.id),s(k.roomNumber.toUpperCase())},className:"bg-blue-500 text-white p-1 rounded mr-2",children:"Edit"}),M.jsx("button",{onClick:()=>C(k.id),className:"bg-red-500 text-white p-1 rounded",children:"Delete"})]})]},k.id))})]})]})}function pB(){const[t,e]=F.useState([]),[n,r]=F.useState([]),[i,s]=F.useState(""),[o,a]=F.useState(""),[l,c]=F.useState(""),[h,f]=F.useState(null);F.useEffect(()=>{p(),l&&T()},[l]);const p=async()=>{const _=await Yt(at(fe,"Hostels"));r(_.docs.map(v=>({id:v.id,...v.data()})))},T=async()=>{const _=Hi(at(fe,"Devices"),Kn("hostelId","==",l)),v=await Yt(_);e(v.docs.map(E=>({id:E.id,...E.data()})))},C=async()=>{if(!l){alert("Please select a hostel first.");return}await Uh(at(fe,"Devices"),{name:i,type:o,hostelId:l}),s(""),a(""),T()},x=async()=>{await Cn(Ze(fe,"Devices",h),{name:i,type:o,hostelId:l}),f(null),s(""),a(""),T()},k=async _=>{await Lh(Ze(fe,"Devices",_)),T()};return M.jsxs("div",{className:"p-4 bg-white rounded shadow-md",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Manage Devices Per Room For hostel"}),M.jsxs("select",{value:l,onChange:_=>c(_.target.value),className:"w-full p-2 mb-2 border rounded",children:[M.jsx("option",{value:"",children:"Select a Hostel"}),n.map(_=>M.jsxs("option",{value:_.id,children:[_.name," "]},_.id))]}),l&&M.jsxs(M.Fragment,{children:[M.jsx("input",{type:"text",value:i,onChange:_=>s(_.target.value),placeholder:"Device Name",className:"w-full p-2 mb-2 border rounded"}),M.jsx("input",{type:"text",value:o,onChange:_=>a(_.target.value),placeholder:"Device Type",className:"w-full p-2 mb-2 border rounded"}),h?M.jsx("button",{onClick:x,className:"bg-yellow-500 text-white p-2 rounded",children:"Update Device"}):M.jsx("button",{onClick:C,className:"bg-green-500 text-white p-2 rounded",children:"Add Device"}),M.jsx("ul",{className:"mt-4",children:t.map(_=>M.jsxs("li",{className:"flex justify-between items-center mb-2",children:[_.name," (",_.type,")",M.jsxs("div",{children:[M.jsx("button",{onClick:()=>{f(_.id),s(_.name),a(_.type)},className:"bg-blue-500 text-white p-1 rounded mr-2",children:"Edit"}),M.jsx("button",{onClick:()=>k(_.id),className:"bg-red-500 text-white p-1 rounded",children:"Delete"})]})]},_.id))})]})]})}function mB(){const[t,e]=F.useState([]),[n,r]=F.useState(""),[i,s]=F.useState(""),[o,a]=F.useState(""),[l,c]=F.useState([]),[h,f]=F.useState(null),[p,T]=F.useState(!0),[C,x]=F.useState(null);F.useEffect(()=>{(async()=>{try{T(!0),await k(),await _()}catch(P){x("Error fetching data: "+P.message)}finally{T(!1)}})()},[]);const k=async()=>{const N=await Yt(at(fe,"Users"));e(N.docs.map(P=>({id:P.id,...P.data()})))},_=async()=>{const N=await Yt(at(fe,"Hostels"));c(N.docs.map(P=>({id:P.id,...P.data()})))},v=async()=>{try{await Uh(at(fe,"Users"),{email:n,role:i,hostelId:o}),r(""),s(""),a(""),k()}catch(N){x("Error adding user: "+N.message)}},E=async()=>{try{await Cn(Ze(fe,"Users",h),{email:n,role:i,hostelId:o}),f(null),r(""),s(""),a(""),k()}catch(N){x("Error updating user: "+N.message)}},b=async N=>{try{await Lh(Ze(fe,"Users",N)),k()}catch(P){x("Error deleting user: "+P.message)}},L=()=>{r(""),s(""),a(""),f(null)};return p?M.jsx("div",{children:"Loading..."}):C?M.jsxs("div",{children:["Error: ",C]}):M.jsxs("div",{className:"p-4 bg-white rounded shadow-md",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Manage Users"}),M.jsx("input",{type:"email",value:n,onChange:N=>r(N.target.value),placeholder:"Email",className:"w-full p-2 mb-2 border rounded"}),M.jsxs("select",{value:i,onChange:N=>s(N.target.value),className:"w-full p-2 mb-2 border rounded",children:[M.jsx("option",{value:"",children:"Select Role"}),M.jsx("option",{value:"user",children:"User"}),M.jsx("option",{value:"caretaker",children:"Caretaker"}),M.jsx("option",{value:"superadmin",children:"Superadmin"})]}),i==="caretaker"&&M.jsxs("select",{value:o||"",onChange:N=>a(N.target.value),className:"w-full p-2 mb-2 border rounded",children:[M.jsx("option",{value:"",children:"Select Hostel"}),l.map(N=>M.jsx("option",{value:N.id,children:N.name},N.id))]}),h?M.jsxs("div",{className:"flex space-x-2",children:[" ",M.jsx("button",{onClick:E,className:"bg-yellow-500 text-white p-2 rounded",children:"Update User"}),M.jsx("button",{onClick:L,className:"bg-gray-500 text-white p-2 rounded",children:"Cancel"})]}):M.jsx("button",{onClick:v,className:"bg-green-500 text-white p-2 rounded",children:"Add User"}),M.jsx("ul",{className:"mt-4",children:t.map(N=>{var P;return M.jsxs("li",{className:"flex justify-between items-center mb-2",children:[M.jsxs("li",{className:"flex justify-between items-center mb-2 bg-white p-2 rounded shadow-sm",children:[M.jsxs("div",{children:[M.jsx("span",{className:"font-medium",children:N.email})," -",M.jsxs("span",{className:"text-gray-600",children:[" (",N.role,")"]})," -",M.jsxs("span",{className:"text-gray-600",children:["Hostel: ",N.hostelId?((P=l.find(g=>g.id===N.hostelId))==null?void 0:P.name)||N.hostelId:"N/A"]})," "]}),M.jsxs("div",{children:[M.jsx("button",{onClick:()=>{f(N.id),r(N.email),s(N.role),a(N.hostelId||"")},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded mr-2 focus:outline-none focus:shadow-outline ml-4",children:"Edit"}),M.jsx("button",{onClick:()=>b(N.id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded focus:outline-none focus:shadow-outline",children:"Delete"})]})]},N.id),"          "]},N.id)})})]})}function gB(){return M.jsxs("div",{children:[M.jsx(HA,{}),M.jsxs("div",{className:"container mx-auto p-4",children:[M.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Super Admin Dashboard"}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[M.jsx(dB,{}),M.jsx(fB,{}),M.jsx(pB,{}),M.jsx(mB,{})]})]})]})}function hT({children:t,allowedRoles:e}){const[n,r]=xo(mi),[i,s]=em.useState(null),o=fh(),a=async()=>{if(n){const l=Ze(fe,"Users",n.uid),c=await Wi(l);if(c.exists())s(c.data().role||"user");else try{await f2(l,{email:n.email,role:"user",hostelId:null,name:n.displayName}),s("user")}catch(h){console.error("Error creating user document: ",h)}}else o("/login")};return F.useEffect(()=>{a()},[n,fe,o]),r||i===null?M.jsx(ZA,{}):n?e.includes(i)?t:(console.log("User role: ",i,"Allowed roles: ",e),i==="superadmin"?M.jsx(Od,{to:"/admin"}):M.jsx(Od,{to:"/unauthorized"})):M.jsx(Od,{to:"/login"})}function yB(){return M.jsx("div",{className:"flex items-center justify-center h-screen",children:M.jsxs("div",{className:"text-center",children:[M.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Unauthorized Access"}),M.jsx("p",{children:"You do not have permission to view this page."})]})})}function vB(){return M.jsx(Wx,{children:M.jsxs(Ux,{children:[M.jsx(la,{path:"/login",element:M.jsx(W4,{})}),M.jsx(la,{path:"/unauthorized",element:M.jsx(yB,{})}),M.jsx(la,{path:"/",element:M.jsx(hT,{allowedRoles:["user","caretaker"],children:M.jsx(hB,{})})}),M.jsx(la,{path:"/admin",element:M.jsx(hT,{allowedRoles:["superadmin"],children:M.jsx(gB,{})})})]})})}PS(document.getElementById("root")).render(M.jsx(vB,{}));
